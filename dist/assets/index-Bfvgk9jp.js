(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function fE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tp={exports:{}},Bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function gR(){if(Jv)return Bc;Jv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return Bc.Fragment=e,Bc.jsx=t,Bc.jsxs=t,Bc}var ex;function pR(){return ex||(ex=1,tp.exports=gR()),tp.exports}var p=pR(),np={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function yR(){if(tx)return qe;tx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function R(V,ae,te){this.props=V,this.context=ae,this.refs=k,this.updater=te||w}R.prototype.isReactComponent={},R.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ae,"setState")},R.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function j(){}j.prototype=R.prototype;function B(V,ae,te){this.props=V,this.context=ae,this.refs=k,this.updater=te||w}var W=B.prototype=new j;W.constructor=B,A(W,R.prototype),W.isPureReactComponent=!0;var Z=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function P(V,ae,te,Y,ge,ye){return te=ye.ref,{$$typeof:n,type:V,key:ae,ref:te!==void 0?te:null,props:ye}}function I(V,ae){return P(V.type,ae,void 0,void 0,void 0,V.props)}function T(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function O(V){var ae={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(te){return ae[te]})}var C=/\/+/g;function z(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):ae.toString(36)}function L(){}function be(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(L,L):(V.status="pending",V.then(function(ae){V.status==="pending"&&(V.status="fulfilled",V.value=ae)},function(ae){V.status==="pending"&&(V.status="rejected",V.reason=ae)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Ae(V,ae,te,Y,ge){var ye=typeof V;(ye==="undefined"||ye==="boolean")&&(V=null);var _e=!1;if(V===null)_e=!0;else switch(ye){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(V.$$typeof){case n:case e:_e=!0;break;case y:return _e=V._init,Ae(_e(V._payload),ae,te,Y,ge)}}if(_e)return ge=ge(V),_e=Y===""?"."+z(V,0):Y,Z(ge)?(te="",_e!=null&&(te=_e.replace(C,"$&/")+"/"),Ae(ge,ae,te,"",function(oe){return oe})):ge!=null&&(T(ge)&&(ge=I(ge,te+(ge.key==null||V&&V.key===ge.key?"":(""+ge.key).replace(C,"$&/")+"/")+_e)),ae.push(ge)),1;_e=0;var _t=Y===""?".":Y+":";if(Z(V))for(var G=0;G<V.length;G++)Y=V[G],ye=_t+z(Y,G),_e+=Ae(Y,ae,te,ye,ge);else if(G=x(V),typeof G=="function")for(V=G.call(V),G=0;!(Y=V.next()).done;)Y=Y.value,ye=_t+z(Y,G++),_e+=Ae(Y,ae,te,ye,ge);else if(ye==="object"){if(typeof V.then=="function")return Ae(be(V),ae,te,Y,ge);throw ae=String(V),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return _e}function F(V,ae,te){if(V==null)return V;var Y=[],ge=0;return Ae(V,Y,"","",function(ye){return ae.call(te,ye,ge++)}),Y}function ee(V){if(V._status===-1){var ae=V._result;ae=ae(),ae.then(function(te){(V._status===0||V._status===-1)&&(V._status=1,V._result=te)},function(te){(V._status===0||V._status===-1)&&(V._status=2,V._result=te)}),V._status===-1&&(V._status=0,V._result=ae)}if(V._status===1)return V._result.default;throw V._result}var ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function xe(){}return qe.Children={map:F,forEach:function(V,ae,te){F(V,function(){ae.apply(this,arguments)},te)},count:function(V){var ae=0;return F(V,function(){ae++}),ae},toArray:function(V){return F(V,function(ae){return ae})||[]},only:function(V){if(!T(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},qe.Component=R,qe.Fragment=t,qe.Profiler=r,qe.PureComponent=B,qe.StrictMode=i,qe.Suspense=d,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,qe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return $.H.useMemoCache(V)}},qe.cache=function(V){return function(){return V.apply(null,arguments)}},qe.cloneElement=function(V,ae,te){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Y=A({},V.props),ge=V.key,ye=void 0;if(ae!=null)for(_e in ae.ref!==void 0&&(ye=void 0),ae.key!==void 0&&(ge=""+ae.key),ae)!le.call(ae,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&ae.ref===void 0||(Y[_e]=ae[_e]);var _e=arguments.length-2;if(_e===1)Y.children=te;else if(1<_e){for(var _t=Array(_e),G=0;G<_e;G++)_t[G]=arguments[G+2];Y.children=_t}return P(V.type,ge,void 0,void 0,ye,Y)},qe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},qe.createElement=function(V,ae,te){var Y,ge={},ye=null;if(ae!=null)for(Y in ae.key!==void 0&&(ye=""+ae.key),ae)le.call(ae,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ge[Y]=ae[Y]);var _e=arguments.length-2;if(_e===1)ge.children=te;else if(1<_e){for(var _t=Array(_e),G=0;G<_e;G++)_t[G]=arguments[G+2];ge.children=_t}if(V&&V.defaultProps)for(Y in _e=V.defaultProps,_e)ge[Y]===void 0&&(ge[Y]=_e[Y]);return P(V,ye,void 0,void 0,null,ge)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(V){return{$$typeof:u,render:V}},qe.isValidElement=T,qe.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:ee}},qe.memo=function(V,ae){return{$$typeof:f,type:V,compare:ae===void 0?null:ae}},qe.startTransition=function(V){var ae=$.T,te={};$.T=te;try{var Y=V(),ge=$.S;ge!==null&&ge(te,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(xe,ue)}catch(ye){ue(ye)}finally{$.T=ae}},qe.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},qe.use=function(V){return $.H.use(V)},qe.useActionState=function(V,ae,te){return $.H.useActionState(V,ae,te)},qe.useCallback=function(V,ae){return $.H.useCallback(V,ae)},qe.useContext=function(V){return $.H.useContext(V)},qe.useDebugValue=function(){},qe.useDeferredValue=function(V,ae){return $.H.useDeferredValue(V,ae)},qe.useEffect=function(V,ae,te){var Y=$.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(V,ae)},qe.useId=function(){return $.H.useId()},qe.useImperativeHandle=function(V,ae,te){return $.H.useImperativeHandle(V,ae,te)},qe.useInsertionEffect=function(V,ae){return $.H.useInsertionEffect(V,ae)},qe.useLayoutEffect=function(V,ae){return $.H.useLayoutEffect(V,ae)},qe.useMemo=function(V,ae){return $.H.useMemo(V,ae)},qe.useOptimistic=function(V,ae){return $.H.useOptimistic(V,ae)},qe.useReducer=function(V,ae,te){return $.H.useReducer(V,ae,te)},qe.useRef=function(V){return $.H.useRef(V)},qe.useState=function(V){return $.H.useState(V)},qe.useSyncExternalStore=function(V,ae,te){return $.H.useSyncExternalStore(V,ae,te)},qe.useTransition=function(){return $.H.useTransition()},qe.version="19.1.1",qe}var nx;function _y(){return nx||(nx=1,np.exports=yR()),np.exports}var H=_y();const vy=fE(H);var ip={exports:{}},Hc={},sp={exports:{}},rp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function bR(){return ix||(ix=1,(function(n){function e(F,ee){var ue=F.length;F.push(ee);e:for(;0<ue;){var xe=ue-1>>>1,V=F[xe];if(0<r(V,ee))F[xe]=ee,F[ue]=V,ue=xe;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var ee=F[0],ue=F.pop();if(ue!==ee){F[0]=ue;e:for(var xe=0,V=F.length,ae=V>>>1;xe<ae;){var te=2*(xe+1)-1,Y=F[te],ge=te+1,ye=F[ge];if(0>r(Y,ue))ge<V&&0>r(ye,Y)?(F[xe]=ye,F[ge]=ue,xe=ge):(F[xe]=Y,F[te]=ue,xe=te);else if(ge<V&&0>r(ye,ue))F[xe]=ye,F[ge]=ue,xe=ge;else break e}}return ee}function r(F,ee){var ue=F.sortIndex-ee.sortIndex;return ue!==0?ue:F.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],f=[],y=1,_=null,x=3,w=!1,A=!1,k=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function Z(F){for(var ee=t(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=F)i(f),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(f)}}function $(F){if(k=!1,Z(F),!A)if(t(d)!==null)A=!0,le||(le=!0,z());else{var ee=t(f);ee!==null&&Ae($,ee.startTime-F)}}var le=!1,P=-1,I=5,T=-1;function O(){return R?!0:!(n.unstable_now()-T<I)}function C(){if(R=!1,le){var F=n.unstable_now();T=F;var ee=!0;try{e:{A=!1,k&&(k=!1,B(P),P=-1),w=!0;var ue=x;try{t:{for(Z(F),_=t(d);_!==null&&!(_.expirationTime>F&&O());){var xe=_.callback;if(typeof xe=="function"){_.callback=null,x=_.priorityLevel;var V=xe(_.expirationTime<=F);if(F=n.unstable_now(),typeof V=="function"){_.callback=V,Z(F),ee=!0;break t}_===t(d)&&i(d),Z(F)}else i(d);_=t(d)}if(_!==null)ee=!0;else{var ae=t(f);ae!==null&&Ae($,ae.startTime-F),ee=!1}}break e}finally{_=null,x=ue,w=!1}ee=void 0}}finally{ee?z():le=!1}}}var z;if(typeof W=="function")z=function(){W(C)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,be=L.port2;L.port1.onmessage=C,z=function(){be.postMessage(null)}}else z=function(){j(C,0)};function Ae(F,ee){P=j(function(){F(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(F){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var ue=x;x=ee;try{return F()}finally{x=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(F,ee){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ue=x;x=F;try{return ee()}finally{x=ue}},n.unstable_scheduleCallback=function(F,ee,ue){var xe=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ue+V,F={id:y++,callback:ee,priorityLevel:F,startTime:ue,expirationTime:V,sortIndex:-1},ue>xe?(F.sortIndex=ue,e(f,F),t(d)===null&&F===t(f)&&(k?(B(P),P=-1):k=!0,Ae($,ue-xe))):(F.sortIndex=V,e(d,F),A||w||(A=!0,le||(le=!0,z()))),F},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(F){var ee=x;return function(){var ue=x;x=ee;try{return F.apply(this,arguments)}finally{x=ue}}}})(rp)),rp}var sx;function _R(){return sx||(sx=1,sp.exports=bR()),sp.exports}var ap={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function vR(){if(rx)return An;rx=1;var n=_y();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:d,containerInfo:f,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,An.createPortal=function(d,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,y)},An.flushSync=function(d){var f=c.T,y=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=y,i.d.f()}},An.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},An.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},An.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var y=f.as,_=u(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:w}):y==="script"&&i.d.X(d,{crossOrigin:_,integrity:x,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},An.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},An.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=u(y,f.crossOrigin);i.d.L(d,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},An.preloadModule=function(d,f){if(typeof d=="string")if(f){var y=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},An.requestFormReset=function(d){i.d.r(d)},An.unstable_batchedUpdates=function(d,f){return d(f)},An.useFormState=function(d,f,y){return c.H.useFormState(d,f,y)},An.useFormStatus=function(){return c.H.useHostTransitionStatus()},An.version="19.1.1",An}var ax;function xR(){if(ax)return ap.exports;ax=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ap.exports=vR(),ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function wR(){if(ox)return Hc;ox=1;var n=_R(),e=_y(),t=xR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,h=a;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return u(g),s;if(b===h)return u(g),a;b=b.sibling}throw Error(i(188))}if(l.return!==h.return)l=g,h=b;else{for(var S=!1,N=g.child;N;){if(N===l){S=!0,l=g,h=b;break}if(N===h){S=!0,h=g,l=b;break}N=N.sibling}if(!S){for(N=b.child;N;){if(N===l){S=!0,l=b,h=g;break}if(N===h){S=!0,h=b,l=g;break}N=N.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==h)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function f(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=f(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),W=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function be(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case R:return"Profiler";case k:return"StrictMode";case $:return"Suspense";case le:return"SuspenseList";case T:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case W:return(s.displayName||"Context")+".Provider";case B:return(s._context.displayName||"Context")+".Consumer";case Z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return a=s.displayName||null,a!==null?a:be(s.type)||"Memo";case I:a=s._payload,s=s._init;try{return be(s(a))}catch{}}return null}var Ae=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],V=-1;function ae(s){return{current:s}}function te(s){0>V||(s.current=xe[V],xe[V]=null,V--)}function Y(s,a){V++,xe[V]=s.current,s.current=a}var ge=ae(null),ye=ae(null),_e=ae(null),_t=ae(null);function G(s,a){switch(Y(_e,a),Y(ye,s),Y(ge,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Rv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Rv(a),s=Nv(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ge),Y(ge,s)}function oe(){te(ge),te(ye),te(_e)}function He(s){s.memoizedState!==null&&Y(_t,s);var a=ge.current,l=Nv(a,s.type);a!==l&&(Y(ye,s),Y(ge,l))}function Ce(s){ye.current===s&&(te(ge),te(ye)),_t.current===s&&(te(_t),Lc._currentValue=ue)}var Zn=Object.prototype.hasOwnProperty,Is=n.unstable_scheduleCallback,ji=n.unstable_cancelCallback,Jn=n.unstable_shouldYield,br=n.unstable_requestPaint,zn=n.unstable_now,Ao=n.unstable_getCurrentPriorityLevel,wa=n.unstable_ImmediatePriority,Li=n.unstable_UserBlockingPriority,ei=n.unstable_NormalPriority,_r=n.unstable_LowPriority,Bn=n.unstable_IdlePriority,vr=n.log,Ea=n.unstable_setDisableYieldValue,Nt=null,rt=null;function On(s){if(typeof vr=="function"&&Ea(s),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Nt,s)}catch{}}var Zt=Math.clz32?Math.clz32:ti,Hn=Math.log,Sa=Math.LN2;function ti(s){return s>>>=0,s===0?32:31-(Hn(s)/Sa|0)|0}var Ds=256,gi=4194304;function ni(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function xr(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var g=0,b=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var N=h&134217727;return N!==0?(h=N&~b,h!==0?g=ni(h):(S&=N,S!==0?g=ni(S):l||(l=N&~s,l!==0&&(g=ni(l))))):(N=h&~b,N!==0?g=ni(N):S!==0?g=ni(S):l||(l=h&~s,l!==0&&(g=ni(l)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:g}function Xi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Qi(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Je(){var s=Ds;return Ds<<=1,(Ds&4194048)===0&&(Ds=256),s}function Ta(){var s=gi;return gi<<=1,(gi&62914560)===0&&(gi=4194304),s}function Vi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function pi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Aa(s,a,l,h,g,b){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var N=s.entanglements,U=s.expirationTimes,J=s.hiddenUpdates;for(l=S&~l;0<l;){var ce=31-Zt(l),fe=1<<ce;N[ce]=0,U[ce]=-1;var ne=J[ce];if(ne!==null)for(J[ce]=null,ce=0;ce<ne.length;ce++){var ie=ne[ce];ie!==null&&(ie.lane&=-536870913)}l&=~fe}h!==0&&yi(s,h,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(S&~a))}function yi(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Zt(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function Ra(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-Zt(l),g=1<<h;g&a|s[h]&a&&(s[h]|=a),l&=~g}}function Zi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ms(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ii(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:Wv(s.type))}function Na(s,a){var l=ee.p;try{return ee.p=s,a()}finally{ee.p=l}}var Ue=Math.random().toString(36).slice(2),mt="__reactFiber$"+Ue,vt="__reactProps$"+Ue,En="__reactContainer$"+Ue,wr="__reactEvents$"+Ue,Ro="__reactListeners$"+Ue,lt="__reactHandles$"+Ue,bi="__reactResources$"+Ue,jn="__reactMarker$"+Ue;function _i(s){delete s[mt],delete s[vt],delete s[wr],delete s[Ro],delete s[lt]}function Sn(s){var a=s[mt];if(a)return a;for(var l=s.parentNode;l;){if(a=l[En]||l[mt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=Dv(s);s!==null;){if(l=s[mt])return l;s=Dv(s)}return a}s=l,l=s.parentNode}return null}function Ln(s){if(s=s[mt]||s[En]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function qt(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function ln(s){var a=s[bi];return a||(a=s[bi]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ut(s){s[jn]=!0}var ka=new Set,Ji={};function si(s,a){qn(s,a),qn(s+"Capture",a)}function qn(s,a){for(Ji[s]=a,s=0;s<a.length;s++)ka.add(a[s])}var Vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Ps={};function Er(s){return Zn.call(Ps,s)?!0:Zn.call(No,s)?!1:Vn.test(s)?Ps[s]=!0:(No[s]=!0,!1)}function Ui(s,a,l){if(Er(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function Dt(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Gt(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}var es,Sr;function D(s){if(es===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);es=a&&a[1]||"",Sr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+es+s+Sr}var se=!1;function pe(s,a){if(!s||se)return"";se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var ne=ie}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(ie){ne=ie}s.call(fe.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),S=b[0],N=b[1];if(S&&N){var U=S.split(`
`),J=N.split(`
`);for(g=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(h===U.length||g===J.length)for(h=U.length-1,g=J.length-1;1<=h&&0<=g&&U[h]!==J[g];)g--;for(;1<=h&&0<=g;h--,g--)if(U[h]!==J[g]){if(h!==1||g!==1)do if(h--,g--,0>g||U[h]!==J[g]){var ce=`
`+U[h].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=h&&0<=g);break}}}finally{se=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?D(l):""}function De(s){switch(s.tag){case 26:case 27:case 5:return D(s.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return pe(s.type,!1);case 11:return pe(s.type.render,!1);case 1:return pe(s.type,!0);case 31:return D("Activity");default:return""}}function Fe(s){try{var a="";do a+=De(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Re(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function $t(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function je(s){var a=$t(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,b=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,b.call(this,S)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ie(s){s._valueTracker||(s._valueTracker=je(s))}function et(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=$t(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function kt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var gn=/[\n"\\]/g;function Se(s){return s.replace(gn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ri(s,a,l,h,g,b,S,N){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),a!=null?S==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Re(a)):s.value!==""+Re(a)&&(s.value=""+Re(a)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),a!=null?Tr(s,S,Re(a)):l!=null?Tr(s,S,Re(l)):h!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+Re(N):s.removeAttribute("name")}function Ca(s,a,l,h,g,b,S,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;l=l!=null?""+Re(l):"",a=a!=null?""+Re(a):l,N||a===s.value||(s.value=a),s.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=N?s.checked:!!h,s.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Tr(s,a,l){a==="number"&&kt(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Os(s,a,l,h){if(s=s.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=a.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&h&&(s[l].defaultSelected=!0)}else{for(l=""+Re(l),a=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function xt(s,a,l){if(a!=null&&(a=""+Re(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Re(l):""}function Ia(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(i(92));if(Ae(h)){if(1<h.length)throw Error(i(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Re(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function vi(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Da=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qu(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Da.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Wl(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&Qu(s,g,h)}else for(var b in a)a.hasOwnProperty(b)&&Qu(s,b,a[b])}function Yl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(s){return lm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var js=null;function xi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ls=null,Vs=null;function Kl(s){var a=Ln(s);if(a&&(s=a.stateNode)){var l=s[vt]||null;e:switch(s=a.stateNode,a.type){case"input":if(ri(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Se(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var g=h[vt]||null;if(!g)throw Error(i(90));ri(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&et(h)}break e;case"textarea":xt(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Os(s,!!l.multiple,a,!1)}}}var ts=!1;function Zu(s,a,l){if(ts)return s(a,l);ts=!0;try{var h=s(a);return h}finally{if(ts=!1,(Ls!==null||Vs!==null)&&(Gh(),Ls&&(a=Ls,s=Vs,Vs=Ls=null,Kl(a),s)))for(a=0;a<s.length;a++)Kl(s[a])}}function Ma(s,a){var l=s.stateNode;if(l===null)return null;var h=l[vt]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(Fi)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{wi=!1}var ns=null,Ar=null,Us=null;function Xl(){if(Us)return Us;var s,a=Ar,l=a.length,h,g="value"in ns?ns.value:ns.textContent,b=g.length;for(s=0;s<l&&a[s]===g[s];s++);var S=l-s;for(h=1;h<=S&&a[l-h]===g[b-h];h++);return Us=g.slice(s,1<h?1-h:void 0)}function is(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ss(){return!0}function Ql(){return!1}function cn(s){function a(l,h,g,b,S){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(l=s[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ss:Ql,this.isPropagationStopped=Ql,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),a}var ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Co=cn(ht),Oa=y({},ht,{view:0,detail:0}),Ju=cn(Oa),Io,Do,rs,ja=y({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rs&&(rs&&s.type==="mousemove"?(Io=s.screenX-rs.screenX,Do=s.screenY-rs.screenY):Do=Io=0,rs=s),Io)},movementY:function(s){return"movementY"in s?s.movementY:Do}}),Ei=cn(ja),eh=y({},ja,{dataTransfer:0}),cm=cn(eh),La=y({},Oa,{relatedTarget:0}),Mo=cn(La),Zl=y({},ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=cn(Zl),th=y({},ht,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Oo=cn(th),um=y({},ht,{data:0}),Jl=cn(um),Va={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ih[s])?!!a[s]:!1}function Ua(){return ec}var sh=y({},Oa,{key:function(s){if(s.key){var a=Va[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=is(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(s){return s.type==="keypress"?is(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?is(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jo=cn(sh),rh=y({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=cn(rh),Fs=y({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),ah=cn(Fs),oh=y({},ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=cn(oh),ch=y({},ja,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Lo=cn(ch),Un=y({},ht,{newState:0,oldState:0}),uh=cn(Un),hh=[9,13,27,32],as=Fi&&"CompositionEvent"in window,m=null;Fi&&"documentMode"in document&&(m=document.documentMode);var v=Fi&&"TextEvent"in window&&!m,E=Fi&&(!as||m&&8<m&&11>=m),M=" ",X=!1;function re(s,a){switch(s){case"keyup":return hh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var tt=!1;function Jt(s,a){switch(s){case"compositionend":return ve(a);case"keypress":return a.which!==32?null:(X=!0,M);case"textInput":return s=a.data,s===M&&X?null:s;default:return null}}function nt(s,a){if(tt)return s==="compositionend"||!as&&re(s,a)?(s=Xl(),Us=Ar=ns=null,tt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!un[s.type]:a==="textarea"}function zs(s,a,l,h){Ls?Vs?Vs.push(h):Vs=[h]:Ls=h,a=Qh(a,"onChange"),0<a.length&&(l=new Co("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var pn=null,os=null;function nc(s){wv(s,0)}function dh(s){var a=qt(s);if(et(a))return s}function H0(s,a){if(s==="change")return a}var q0=!1;if(Fi){var hm;if(Fi){var dm="oninput"in document;if(!dm){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),dm=typeof G0.oninput=="function"}hm=dm}else hm=!1;q0=hm&&(!document.documentMode||9<document.documentMode)}function $0(){pn&&(pn.detachEvent("onpropertychange",W0),os=pn=null)}function W0(s){if(s.propertyName==="value"&&dh(os)){var a=[];zs(a,os,s,xi(s)),Zu(nc,a)}}function GA(s,a,l){s==="focusin"?($0(),pn=a,os=l,pn.attachEvent("onpropertychange",W0)):s==="focusout"&&$0()}function $A(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return dh(os)}function WA(s,a){if(s==="click")return dh(a)}function YA(s,a){if(s==="input"||s==="change")return dh(a)}function KA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ai=typeof Object.is=="function"?Object.is:KA;function ic(s,a){if(ai(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Zn.call(a,g)||!ai(s[g],a[g]))return!1}return!0}function Y0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function K0(s,a){var l=Y0(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Y0(l)}}function X0(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?X0(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Q0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=kt(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=kt(s.document)}return a}function fm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var XA=Fi&&"documentMode"in document&&11>=document.documentMode,Vo=null,mm=null,sc=null,gm=!1;function Z0(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gm||Vo==null||Vo!==kt(h)||(h=Vo,"selectionStart"in h&&fm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sc&&ic(sc,h)||(sc=h,h=Qh(mm,"onSelect"),0<h.length&&(a=new Co("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=Vo)))}function Fa(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Uo={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},pm={},J0={};Fi&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function za(s){if(pm[s])return pm[s];if(!Uo[s])return s;var a=Uo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in J0)return pm[s]=a[l];return s}var eb=za("animationend"),tb=za("animationiteration"),nb=za("animationstart"),QA=za("transitionrun"),ZA=za("transitionstart"),JA=za("transitioncancel"),ib=za("transitionend"),sb=new Map,ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ym.push("scrollEnd");function zi(s,a){sb.set(s,a),si(a,[s])}var rb=new WeakMap;function Si(s,a){if(typeof s=="object"&&s!==null){var l=rb.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Fe(a)},rb.set(s,a),a)}return{value:s,source:a,stack:Fe(a)}}var Ti=[],Fo=0,bm=0;function fh(){for(var s=Fo,a=bm=Fo=0;a<s;){var l=Ti[a];Ti[a++]=null;var h=Ti[a];Ti[a++]=null;var g=Ti[a];Ti[a++]=null;var b=Ti[a];if(Ti[a++]=null,h!==null&&g!==null){var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}b!==0&&ab(l,g,b)}}function mh(s,a,l,h){Ti[Fo++]=s,Ti[Fo++]=a,Ti[Fo++]=l,Ti[Fo++]=h,bm|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function _m(s,a,l,h){return mh(s,a,l,h),gh(s)}function zo(s,a){return mh(s,null,null,a),gh(s)}function ab(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var g=!1,b=s.return;b!==null;)b.childLanes|=l,h=b.alternate,h!==null&&(h.childLanes|=l),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&a!==null&&(g=31-Zt(l),s=b.hiddenUpdates,h=s[g],h===null?s[g]=[a]:h.push(a),a.lane=l|536870912),b):null}function gh(s){if(50<kc)throw kc=0,Tg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Bo={};function e2(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(s,a,l,h){return new e2(s,a,l,h)}function vm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bs(s,a){var l=s.alternate;return l===null?(l=oi(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function ob(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function ph(s,a,l,h,g,b){var S=0;if(h=s,typeof s=="function")vm(s)&&(S=1);else if(typeof s=="string")S=nR(s,l,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case T:return s=oi(31,l,a,g),s.elementType=T,s.lanes=b,s;case A:return Ba(l.children,g,b,a);case k:S=8,g|=24;break;case R:return s=oi(12,l,a,g|2),s.elementType=R,s.lanes=b,s;case $:return s=oi(13,l,a,g),s.elementType=$,s.lanes=b,s;case le:return s=oi(19,l,a,g),s.elementType=le,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:case W:S=10;break e;case B:S=9;break e;case Z:S=11;break e;case P:S=14;break e;case I:S=16,h=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=oi(S,l,a,g),a.elementType=s,a.type=h,a.lanes=b,a}function Ba(s,a,l,h){return s=oi(7,s,h,a),s.lanes=l,s}function xm(s,a,l){return s=oi(6,s,null,a),s.lanes=l,s}function wm(s,a,l){return a=oi(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Ho=[],qo=0,yh=null,bh=0,Ai=[],Ri=0,Ha=null,Hs=1,qs="";function qa(s,a){Ho[qo++]=bh,Ho[qo++]=yh,yh=s,bh=a}function lb(s,a,l){Ai[Ri++]=Hs,Ai[Ri++]=qs,Ai[Ri++]=Ha,Ha=s;var h=Hs;s=qs;var g=32-Zt(h)-1;h&=~(1<<g),l+=1;var b=32-Zt(a)+g;if(30<b){var S=g-g%5;b=(h&(1<<S)-1).toString(32),h>>=S,g-=S,Hs=1<<32-Zt(a)+g|l<<g|h,qs=b+s}else Hs=1<<b|l<<g|h,qs=s}function Em(s){s.return!==null&&(qa(s,1),lb(s,1,0))}function Sm(s){for(;s===yh;)yh=Ho[--qo],Ho[qo]=null,bh=Ho[--qo],Ho[qo]=null;for(;s===Ha;)Ha=Ai[--Ri],Ai[Ri]=null,qs=Ai[--Ri],Ai[Ri]=null,Hs=Ai[--Ri],Ai[Ri]=null}var Fn=null,Lt=null,ct=!1,Ga=null,ls=!1,Tm=Error(i(519));function $a(s){var a=Error(i(418,""));throw oc(Si(a,s)),Tm}function cb(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[mt]=s,a[vt]=h,l){case"dialog":Ke("cancel",a),Ke("close",a);break;case"iframe":case"object":case"embed":Ke("load",a);break;case"video":case"audio":for(l=0;l<Ic.length;l++)Ke(Ic[l],a);break;case"source":Ke("error",a);break;case"img":case"image":case"link":Ke("error",a),Ke("load",a);break;case"details":Ke("toggle",a);break;case"input":Ke("invalid",a),Ca(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ie(a);break;case"select":Ke("invalid",a);break;case"textarea":Ke("invalid",a),Ia(a,h.value,h.defaultValue,h.children),Ie(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||Av(a.textContent,l)?(h.popover!=null&&(Ke("beforetoggle",a),Ke("toggle",a)),h.onScroll!=null&&Ke("scroll",a),h.onScrollEnd!=null&&Ke("scrollend",a),h.onClick!=null&&(a.onclick=Zh),a=!0):a=!1,a||$a(s)}function ub(s){for(Fn=s.return;Fn;)switch(Fn.tag){case 5:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:Fn=Fn.return}}function rc(s){if(s!==Fn)return!1;if(!ct)return ub(s),ct=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||zg(s.type,s.memoizedProps)),l=!l),l&&Lt&&$a(s),ub(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){Lt=Hi(s.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}Lt=null}}else a===27?(a=Lt,Br(s.type)?(s=Gg,Gg=null,Lt=s):Lt=a):Lt=Fn?Hi(s.stateNode.nextSibling):null;return!0}function ac(){Lt=Fn=null,ct=!1}function hb(){var s=Ga;return s!==null&&(Wn===null?Wn=s:Wn.push.apply(Wn,s),Ga=null),s}function oc(s){Ga===null?Ga=[s]:Ga.push(s)}var Am=ae(null),Wa=null,Gs=null;function Rr(s,a,l){Y(Am,a._currentValue),a._currentValue=l}function $s(s){s._currentValue=Am.current,te(Am)}function Rm(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function Nm(s,a,l,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var S=g.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=g;for(var U=0;U<a.length;U++)if(N.context===a[U]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),Rm(b.return,l,s),h||(S=null);break e}b=N.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(i(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),Rm(S,l,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function lc(s,a,l,h){s=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var N=g.type;ai(g.pendingProps.value,S.value)||(s!==null?s.push(N):s=[N])}}else if(g===_t.current){if(S=g.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Lc):s=[Lc])}g=g.return}s!==null&&Nm(a,s,l,h),a.flags|=262144}function _h(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ya(s){Wa=s,Gs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Tn(s){return db(Wa,s)}function vh(s,a){return Wa===null&&Ya(s),db(s,a)}function db(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Gs===null){if(s===null)throw Error(i(308));Gs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Gs=Gs.next=a;return l}var t2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},n2=n.unstable_scheduleCallback,i2=n.unstable_NormalPriority,tn={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function km(){return{controller:new t2,data:new Map,refCount:0}}function cc(s){s.refCount--,s.refCount===0&&n2(i2,function(){s.controller.abort()})}var uc=null,Cm=0,Go=0,$o=null;function s2(s,a){if(uc===null){var l=uc=[];Cm=0,Go=Dg(),$o={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Cm++,a.then(fb,fb),a}function fb(){if(--Cm===0&&uc!==null){$o!==null&&($o.status="fulfilled");var s=uc;uc=null,Go=0,$o=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function r2(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var mb=F.S;F.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&s2(s,a),mb!==null&&mb(s,a)};var Ka=ae(null);function Im(){var s=Ka.current;return s!==null?s:At.pooledCache}function xh(s,a){a===null?Y(Ka,Ka.current):Y(Ka,a.pool)}function gb(){var s=Im();return s===null?null:{parent:tn._currentValue,pool:s}}var hc=Error(i(460)),pb=Error(i(474)),wh=Error(i(542)),Dm={then:function(){}};function yb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Eh(){}function bb(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Eh,Eh),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,vb(s),s;default:if(typeof a.status=="string")a.then(Eh,Eh);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,vb(s),s}throw dc=a,hc}}var dc=null;function _b(){if(dc===null)throw Error(i(459));var s=dc;return dc=null,s}function vb(s){if(s===hc||s===wh)throw Error(i(483))}var Nr=!1;function Mm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function kr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cr(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(gt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=gh(s),ab(s,null,l),a}return mh(s,h,a,l),gh(s)}function fc(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,Ra(s,l)}}function Om(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?g=b=a:b=b.next=a}else g=b=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var jm=!1;function mc(){if(jm){var s=$o;if(s!==null)throw s}}function gc(s,a,l,h){jm=!1;var g=s.updateQueue;Nr=!1;var b=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var U=N,J=U.next;U.next=null,S===null?b=J:S.next=J,S=U;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,N=ce.lastBaseUpdate,N!==S&&(N===null?ce.firstBaseUpdate=J:N.next=J,ce.lastBaseUpdate=U))}if(b!==null){var fe=g.baseState;S=0,ce=J=U=null,N=b;do{var ne=N.lane&-536870913,ie=ne!==N.lane;if(ie?(it&ne)===ne:(h&ne)===ne){ne!==0&&ne===Go&&(jm=!0),ce!==null&&(ce=ce.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Le=s,Me=N;ne=a;var St=l;switch(Me.tag){case 1:if(Le=Me.payload,typeof Le=="function"){fe=Le.call(St,fe,ne);break e}fe=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Me.payload,ne=typeof Le=="function"?Le.call(St,fe,ne):Le,ne==null)break e;fe=y({},fe,ne);break e;case 2:Nr=!0}}ne=N.callback,ne!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=g.callbacks,ie===null?g.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ce===null?(J=ce=ie,U=fe):ce=ce.next=ie,S|=ne;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,g.lastBaseUpdate=ie,g.shared.pending=null}}while(!0);ce===null&&(U=fe),g.baseState=U,g.firstBaseUpdate=J,g.lastBaseUpdate=ce,b===null&&(g.shared.lanes=0),Vr|=S,s.lanes=S,s.memoizedState=fe}}function xb(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function wb(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)xb(l[s],a)}var Wo=ae(null),Sh=ae(0);function Eb(s,a){s=Js,Y(Sh,s),Y(Wo,a),Js=s|a.baseLanes}function Lm(){Y(Sh,Js),Y(Wo,Wo.current)}function Vm(){Js=Sh.current,te(Wo),te(Sh)}var Ir=0,Ge=null,wt=null,Wt=null,Th=!1,Yo=!1,Xa=!1,Ah=0,pc=0,Ko=null,a2=0;function Ft(){throw Error(i(321))}function Um(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!ai(s[l],a[l]))return!1;return!0}function Fm(s,a,l,h,g,b){return Ir=b,Ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=s===null||s.memoizedState===null?a_:o_,Xa=!1,b=l(h,g),Xa=!1,Yo&&(b=Tb(a,l,h,g)),Sb(s),b}function Sb(s){F.H=Dh;var a=wt!==null&&wt.next!==null;if(Ir=0,Wt=wt=Ge=null,Th=!1,pc=0,Ko=null,a)throw Error(i(300));s===null||hn||(s=s.dependencies,s!==null&&_h(s)&&(hn=!0))}function Tb(s,a,l,h){Ge=s;var g=0;do{if(Yo&&(Ko=null),pc=0,Yo=!1,25<=g)throw Error(i(301));if(g+=1,Wt=wt=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}F.H=f2,b=a(l,h)}while(Yo);return b}function o2(){var s=F.H,a=s.useState()[0];return a=typeof a.then=="function"?yc(a):a,s=s.useState()[0],(wt!==null?wt.memoizedState:null)!==s&&(Ge.flags|=1024),a}function zm(){var s=Ah!==0;return Ah=0,s}function Bm(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Hm(s){if(Th){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Th=!1}Ir=0,Wt=wt=Ge=null,Yo=!1,pc=Ah=0,Ko=null}function Gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Ge.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function Yt(){if(wt===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=wt.next;var a=Wt===null?Ge.memoizedState:Wt.next;if(a!==null)Wt=a,wt=s;else{if(s===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));wt=s,s={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Wt===null?Ge.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function qm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(s){var a=pc;return pc+=1,Ko===null&&(Ko=[]),s=bb(Ko,s,a),a=Ge,(Wt===null?a.memoizedState:Wt.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?a_:o_),s}function Rh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return yc(s);if(s.$$typeof===W)return Tn(s)}throw Error(i(438,String(s)))}function Gm(s){var a=null,l=Ge.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Ge.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=qm(),Ge.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=O;return a.index++,l}function Ws(s,a){return typeof a=="function"?a(s):a}function Nh(s){var a=Yt();return $m(a,wt,s)}function $m(s,a,l){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var g=s.baseQueue,b=h.pending;if(b!==null){if(g!==null){var S=g.next;g.next=b.next,b.next=S}a.baseQueue=g=b,h.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{a=g.next;var N=S=null,U=null,J=a,ce=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(it&fe)===fe:(Ir&fe)===fe){var ne=J.revertLane;if(ne===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===Go&&(ce=!0);else if((Ir&ne)===ne){J=J.next,ne===Go&&(ce=!0);continue}else fe={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(N=U=fe,S=b):U=U.next=fe,Ge.lanes|=ne,Vr|=ne;fe=J.action,Xa&&l(b,fe),b=J.hasEagerState?J.eagerState:l(b,fe)}else ne={lane:fe,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(N=U=ne,S=b):U=U.next=ne,Ge.lanes|=fe,Vr|=fe;J=J.next}while(J!==null&&J!==a);if(U===null?S=b:U.next=N,!ai(b,s.memoizedState)&&(hn=!0,ce&&(l=$o,l!==null)))throw l;s.memoizedState=b,s.baseState=S,s.baseQueue=U,h.lastRenderedState=b}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Wm(s){var a=Yt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var h=l.dispatch,g=l.pending,b=a.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do b=s(b,S.action),S=S.next;while(S!==g);ai(b,a.memoizedState)||(hn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,h]}function Ab(s,a,l){var h=Ge,g=Yt(),b=ct;if(b){if(l===void 0)throw Error(i(407));l=l()}else l=a();var S=!ai((wt||g).memoizedState,l);S&&(g.memoizedState=l,hn=!0),g=g.queue;var N=kb.bind(null,h,g,s);if(bc(2048,8,N,[s]),g.getSnapshot!==a||S||Wt!==null&&Wt.memoizedState.tag&1){if(h.flags|=2048,Xo(9,kh(),Nb.bind(null,h,g,l,a),null),At===null)throw Error(i(349));b||(Ir&124)!==0||Rb(h,a,l)}return l}function Rb(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Ge.updateQueue,a===null?(a=qm(),Ge.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function Nb(s,a,l,h){a.value=l,a.getSnapshot=h,Cb(a)&&Ib(s)}function kb(s,a,l){return l(function(){Cb(a)&&Ib(s)})}function Cb(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!ai(s,l)}catch{return!0}}function Ib(s){var a=zo(s,2);a!==null&&di(a,s,2)}function Ym(s){var a=Gn();if(typeof s=="function"){var l=s;if(s=l(),Xa){On(!0);try{l()}finally{On(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:s},a}function Db(s,a,l,h){return s.baseState=l,$m(s,wt,typeof h=="function"?h:Ws)}function l2(s,a,l,h,g){if(Ih(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};F.T!==null?l(!0):b.isTransition=!1,h(b),l=a.pending,l===null?(b.next=a.pending=b,Mb(a,b)):(b.next=l.next,a.pending=l.next=b)}}function Mb(s,a){var l=a.action,h=a.payload,g=s.state;if(a.isTransition){var b=F.T,S={};F.T=S;try{var N=l(g,h),U=F.S;U!==null&&U(S,N),Pb(s,a,N)}catch(J){Km(s,a,J)}finally{F.T=b}}else try{b=l(g,h),Pb(s,a,b)}catch(J){Km(s,a,J)}}function Pb(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Ob(s,a,h)},function(h){return Km(s,a,h)}):Ob(s,a,l)}function Ob(s,a,l){a.status="fulfilled",a.value=l,jb(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,Mb(s,l)))}function Km(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,jb(a),a=a.next;while(a!==h)}s.action=null}function jb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Lb(s,a){return a}function Vb(s,a){if(ct){var l=At.formState;if(l!==null){e:{var h=Ge;if(ct){if(Lt){t:{for(var g=Lt,b=ls;g.nodeType!==8;){if(!b){g=null;break t}if(g=Hi(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Lt=Hi(g.nextSibling),h=g.data==="F!";break e}}$a(h)}h=!1}h&&(a=l[0])}}return l=Gn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lb,lastRenderedState:a},l.queue=h,l=i_.bind(null,Ge,h),h.dispatch=l,h=Ym(!1),b=eg.bind(null,Ge,!1,h.queue),h=Gn(),g={state:a,dispatch:null,action:s,pending:null},h.queue=g,l=l2.bind(null,Ge,g,b,l),g.dispatch=l,h.memoizedState=s,[a,l,!1]}function Ub(s){var a=Yt();return Fb(a,wt,s)}function Fb(s,a,l){if(a=$m(s,a,Lb)[0],s=Nh(Ws)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=yc(a)}catch(S){throw S===hc?wh:S}else h=a;a=Yt();var g=a.queue,b=g.dispatch;return l!==a.memoizedState&&(Ge.flags|=2048,Xo(9,kh(),c2.bind(null,g,l),null)),[h,b,s]}function c2(s,a){s.action=a}function zb(s){var a=Yt(),l=wt;if(l!==null)return Fb(a,l,s);Yt(),a=a.memoizedState,l=Yt();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function Xo(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=Ge.updateQueue,a===null&&(a=qm(),Ge.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function kh(){return{destroy:void 0,resource:void 0}}function Bb(){return Yt().memoizedState}function Ch(s,a,l,h){var g=Gn();h=h===void 0?null:h,Ge.flags|=s,g.memoizedState=Xo(1|a,kh(),l,h)}function bc(s,a,l,h){var g=Yt();h=h===void 0?null:h;var b=g.memoizedState.inst;wt!==null&&h!==null&&Um(h,wt.memoizedState.deps)?g.memoizedState=Xo(a,b,l,h):(Ge.flags|=s,g.memoizedState=Xo(1|a,b,l,h))}function Hb(s,a){Ch(8390656,8,s,a)}function qb(s,a){bc(2048,8,s,a)}function Gb(s,a){return bc(4,2,s,a)}function $b(s,a){return bc(4,4,s,a)}function Wb(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Yb(s,a,l){l=l!=null?l.concat([s]):null,bc(4,4,Wb.bind(null,a,s),l)}function Xm(){}function Kb(s,a){var l=Yt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Um(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function Xb(s,a){var l=Yt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Um(a,h[1]))return h[0];if(h=s(),Xa){On(!0);try{s()}finally{On(!1)}}return l.memoizedState=[h,a],h}function Qm(s,a,l){return l===void 0||(Ir&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=J_(),Ge.lanes|=s,Vr|=s,l)}function Qb(s,a,l,h){return ai(l,a)?l:Wo.current!==null?(s=Qm(s,l,h),ai(s,a)||(hn=!0),s):(Ir&42)===0?(hn=!0,s.memoizedState=l):(s=J_(),Ge.lanes|=s,Vr|=s,a)}function Zb(s,a,l,h,g){var b=ee.p;ee.p=b!==0&&8>b?b:8;var S=F.T,N={};F.T=N,eg(s,!1,a,l);try{var U=g(),J=F.S;if(J!==null&&J(N,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ce=r2(U,h);_c(s,a,ce,hi(s))}else _c(s,a,h,hi(s))}catch(fe){_c(s,a,{then:function(){},status:"rejected",reason:fe},hi())}finally{ee.p=b,F.T=S}}function u2(){}function Zm(s,a,l,h){if(s.tag!==5)throw Error(i(476));var g=Jb(s).queue;Zb(s,g,a,ue,l===null?u2:function(){return e_(s),l(h)})}function Jb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:ue},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function e_(s){var a=Jb(s).next.queue;_c(s,a,{},hi())}function Jm(){return Tn(Lc)}function t_(){return Yt().memoizedState}function n_(){return Yt().memoizedState}function h2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=hi();s=kr(l);var h=Cr(a,s,l);h!==null&&(di(h,a,l),fc(h,a,l)),a={cache:km()},s.payload=a;return}a=a.return}}function d2(s,a,l){var h=hi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ih(s)?s_(a,l):(l=_m(s,a,l,h),l!==null&&(di(l,s,h),r_(l,a,h)))}function i_(s,a,l){var h=hi();_c(s,a,l,h)}function _c(s,a,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ih(s))s_(a,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,N=b(S,l);if(g.hasEagerState=!0,g.eagerState=N,ai(N,S))return mh(s,a,g,0),At===null&&fh(),!1}catch{}finally{}if(l=_m(s,a,g,h),l!==null)return di(l,s,h),r_(l,a,h),!0}return!1}function eg(s,a,l,h){if(h={lane:2,revertLane:Dg(),action:h,hasEagerState:!1,eagerState:null,next:null},Ih(s)){if(a)throw Error(i(479))}else a=_m(s,l,h,2),a!==null&&di(a,s,2)}function Ih(s){var a=s.alternate;return s===Ge||a!==null&&a===Ge}function s_(s,a){Yo=Th=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function r_(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,Ra(s,l)}}var Dh={readContext:Tn,use:Rh,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft},a_={readContext:Tn,use:Rh,useCallback:function(s,a){return Gn().memoizedState=[s,a===void 0?null:a],s},useContext:Tn,useEffect:Hb,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Ch(4194308,4,Wb.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Ch(4194308,4,s,a)},useInsertionEffect:function(s,a){Ch(4,2,s,a)},useMemo:function(s,a){var l=Gn();a=a===void 0?null:a;var h=s();if(Xa){On(!0);try{s()}finally{On(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=Gn();if(l!==void 0){var g=l(a);if(Xa){On(!0);try{l(a)}finally{On(!1)}}}else g=a;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=d2.bind(null,Ge,s),[h.memoizedState,s]},useRef:function(s){var a=Gn();return s={current:s},a.memoizedState=s},useState:function(s){s=Ym(s);var a=s.queue,l=i_.bind(null,Ge,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Xm,useDeferredValue:function(s,a){var l=Gn();return Qm(l,s,a)},useTransition:function(){var s=Ym(!1);return s=Zb.bind(null,Ge,s.queue,!0,!1),Gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=Ge,g=Gn();if(ct){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),At===null)throw Error(i(349));(it&124)!==0||Rb(h,a,l)}g.memoizedState=l;var b={value:l,getSnapshot:a};return g.queue=b,Hb(kb.bind(null,h,b,s),[s]),h.flags|=2048,Xo(9,kh(),Nb.bind(null,h,b,l,a),null),l},useId:function(){var s=Gn(),a=At.identifierPrefix;if(ct){var l=qs,h=Hs;l=(h&~(1<<32-Zt(h)-1)).toString(32)+l,a="«"+a+"R"+l,l=Ah++,0<l&&(a+="H"+l.toString(32)),a+="»"}else l=a2++,a="«"+a+"r"+l.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:Jm,useFormState:Vb,useActionState:Vb,useOptimistic:function(s){var a=Gn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=eg.bind(null,Ge,!0,l),l.dispatch=a,[s,a]},useMemoCache:Gm,useCacheRefresh:function(){return Gn().memoizedState=h2.bind(null,Ge)}},o_={readContext:Tn,use:Rh,useCallback:Kb,useContext:Tn,useEffect:qb,useImperativeHandle:Yb,useInsertionEffect:Gb,useLayoutEffect:$b,useMemo:Xb,useReducer:Nh,useRef:Bb,useState:function(){return Nh(Ws)},useDebugValue:Xm,useDeferredValue:function(s,a){var l=Yt();return Qb(l,wt.memoizedState,s,a)},useTransition:function(){var s=Nh(Ws)[0],a=Yt().memoizedState;return[typeof s=="boolean"?s:yc(s),a]},useSyncExternalStore:Ab,useId:t_,useHostTransitionStatus:Jm,useFormState:Ub,useActionState:Ub,useOptimistic:function(s,a){var l=Yt();return Db(l,wt,s,a)},useMemoCache:Gm,useCacheRefresh:n_},f2={readContext:Tn,use:Rh,useCallback:Kb,useContext:Tn,useEffect:qb,useImperativeHandle:Yb,useInsertionEffect:Gb,useLayoutEffect:$b,useMemo:Xb,useReducer:Wm,useRef:Bb,useState:function(){return Wm(Ws)},useDebugValue:Xm,useDeferredValue:function(s,a){var l=Yt();return wt===null?Qm(l,s,a):Qb(l,wt.memoizedState,s,a)},useTransition:function(){var s=Wm(Ws)[0],a=Yt().memoizedState;return[typeof s=="boolean"?s:yc(s),a]},useSyncExternalStore:Ab,useId:t_,useHostTransitionStatus:Jm,useFormState:zb,useActionState:zb,useOptimistic:function(s,a){var l=Yt();return wt!==null?Db(l,wt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Gm,useCacheRefresh:n_},Qo=null,vc=0;function Mh(s){var a=vc;return vc+=1,Qo===null&&(Qo=[]),bb(Qo,s,a)}function xc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Ph(s,a){throw a.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function l_(s){var a=s._init;return a(s._payload)}function c_(s){function a(K,q){if(s){var Q=K.deletions;Q===null?(K.deletions=[q],K.flags|=16):Q.push(q)}}function l(K,q){if(!s)return null;for(;q!==null;)a(K,q),q=q.sibling;return null}function h(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function g(K,q){return K=Bs(K,q),K.index=0,K.sibling=null,K}function b(K,q,Q){return K.index=Q,s?(Q=K.alternate,Q!==null?(Q=Q.index,Q<q?(K.flags|=67108866,q):Q):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function S(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function N(K,q,Q,he){return q===null||q.tag!==6?(q=xm(Q,K.mode,he),q.return=K,q):(q=g(q,Q),q.return=K,q)}function U(K,q,Q,he){var Te=Q.type;return Te===A?ce(K,q,Q.props.children,he,Q.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&l_(Te)===q.type)?(q=g(q,Q.props),xc(q,Q),q.return=K,q):(q=ph(Q.type,Q.key,Q.props,null,K.mode,he),xc(q,Q),q.return=K,q)}function J(K,q,Q,he){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=wm(Q,K.mode,he),q.return=K,q):(q=g(q,Q.children||[]),q.return=K,q)}function ce(K,q,Q,he,Te){return q===null||q.tag!==7?(q=Ba(Q,K.mode,he,Te),q.return=K,q):(q=g(q,Q),q.return=K,q)}function fe(K,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=xm(""+q,K.mode,Q),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return Q=ph(q.type,q.key,q.props,null,K.mode,Q),xc(Q,q),Q.return=K,Q;case w:return q=wm(q,K.mode,Q),q.return=K,q;case I:var he=q._init;return q=he(q._payload),fe(K,q,Q)}if(Ae(q)||z(q))return q=Ba(q,K.mode,Q,null),q.return=K,q;if(typeof q.then=="function")return fe(K,Mh(q),Q);if(q.$$typeof===W)return fe(K,vh(K,q),Q);Ph(K,q)}return null}function ne(K,q,Q,he){var Te=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Te!==null?null:N(K,q,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===Te?U(K,q,Q,he):null;case w:return Q.key===Te?J(K,q,Q,he):null;case I:return Te=Q._init,Q=Te(Q._payload),ne(K,q,Q,he)}if(Ae(Q)||z(Q))return Te!==null?null:ce(K,q,Q,he,null);if(typeof Q.then=="function")return ne(K,q,Mh(Q),he);if(Q.$$typeof===W)return ne(K,q,vh(K,Q),he);Ph(K,Q)}return null}function ie(K,q,Q,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return K=K.get(Q)||null,N(q,K,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case x:return K=K.get(he.key===null?Q:he.key)||null,U(q,K,he,Te);case w:return K=K.get(he.key===null?Q:he.key)||null,J(q,K,he,Te);case I:var We=he._init;return he=We(he._payload),ie(K,q,Q,he,Te)}if(Ae(he)||z(he))return K=K.get(Q)||null,ce(q,K,he,Te,null);if(typeof he.then=="function")return ie(K,q,Q,Mh(he),Te);if(he.$$typeof===W)return ie(K,q,Q,vh(q,he),Te);Ph(q,he)}return null}function Le(K,q,Q,he){for(var Te=null,We=null,Ne=q,Pe=q=0,fn=null;Ne!==null&&Pe<Q.length;Pe++){Ne.index>Pe?(fn=Ne,Ne=null):fn=Ne.sibling;var ot=ne(K,Ne,Q[Pe],he);if(ot===null){Ne===null&&(Ne=fn);break}s&&Ne&&ot.alternate===null&&a(K,Ne),q=b(ot,q,Pe),We===null?Te=ot:We.sibling=ot,We=ot,Ne=fn}if(Pe===Q.length)return l(K,Ne),ct&&qa(K,Pe),Te;if(Ne===null){for(;Pe<Q.length;Pe++)Ne=fe(K,Q[Pe],he),Ne!==null&&(q=b(Ne,q,Pe),We===null?Te=Ne:We.sibling=Ne,We=Ne);return ct&&qa(K,Pe),Te}for(Ne=h(Ne);Pe<Q.length;Pe++)fn=ie(Ne,K,Pe,Q[Pe],he),fn!==null&&(s&&fn.alternate!==null&&Ne.delete(fn.key===null?Pe:fn.key),q=b(fn,q,Pe),We===null?Te=fn:We.sibling=fn,We=fn);return s&&Ne.forEach(function(Wr){return a(K,Wr)}),ct&&qa(K,Pe),Te}function Me(K,q,Q,he){if(Q==null)throw Error(i(151));for(var Te=null,We=null,Ne=q,Pe=q=0,fn=null,ot=Q.next();Ne!==null&&!ot.done;Pe++,ot=Q.next()){Ne.index>Pe?(fn=Ne,Ne=null):fn=Ne.sibling;var Wr=ne(K,Ne,ot.value,he);if(Wr===null){Ne===null&&(Ne=fn);break}s&&Ne&&Wr.alternate===null&&a(K,Ne),q=b(Wr,q,Pe),We===null?Te=Wr:We.sibling=Wr,We=Wr,Ne=fn}if(ot.done)return l(K,Ne),ct&&qa(K,Pe),Te;if(Ne===null){for(;!ot.done;Pe++,ot=Q.next())ot=fe(K,ot.value,he),ot!==null&&(q=b(ot,q,Pe),We===null?Te=ot:We.sibling=ot,We=ot);return ct&&qa(K,Pe),Te}for(Ne=h(Ne);!ot.done;Pe++,ot=Q.next())ot=ie(Ne,K,Pe,ot.value,he),ot!==null&&(s&&ot.alternate!==null&&Ne.delete(ot.key===null?Pe:ot.key),q=b(ot,q,Pe),We===null?Te=ot:We.sibling=ot,We=ot);return s&&Ne.forEach(function(mR){return a(K,mR)}),ct&&qa(K,Pe),Te}function St(K,q,Q,he){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var Te=Q.key;q!==null;){if(q.key===Te){if(Te=Q.type,Te===A){if(q.tag===7){l(K,q.sibling),he=g(q,Q.props.children),he.return=K,K=he;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&l_(Te)===q.type){l(K,q.sibling),he=g(q,Q.props),xc(he,Q),he.return=K,K=he;break e}l(K,q);break}else a(K,q);q=q.sibling}Q.type===A?(he=Ba(Q.props.children,K.mode,he,Q.key),he.return=K,K=he):(he=ph(Q.type,Q.key,Q.props,null,K.mode,he),xc(he,Q),he.return=K,K=he)}return S(K);case w:e:{for(Te=Q.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){l(K,q.sibling),he=g(q,Q.children||[]),he.return=K,K=he;break e}else{l(K,q);break}else a(K,q);q=q.sibling}he=wm(Q,K.mode,he),he.return=K,K=he}return S(K);case I:return Te=Q._init,Q=Te(Q._payload),St(K,q,Q,he)}if(Ae(Q))return Le(K,q,Q,he);if(z(Q)){if(Te=z(Q),typeof Te!="function")throw Error(i(150));return Q=Te.call(Q),Me(K,q,Q,he)}if(typeof Q.then=="function")return St(K,q,Mh(Q),he);if(Q.$$typeof===W)return St(K,q,vh(K,Q),he);Ph(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(l(K,q.sibling),he=g(q,Q),he.return=K,K=he):(l(K,q),he=xm(Q,K.mode,he),he.return=K,K=he),S(K)):l(K,q)}return function(K,q,Q,he){try{vc=0;var Te=St(K,q,Q,he);return Qo=null,Te}catch(Ne){if(Ne===hc||Ne===wh)throw Ne;var We=oi(29,Ne,null,K.mode);return We.lanes=he,We.return=K,We}finally{}}}var Zo=c_(!0),u_=c_(!1),Ni=ae(null),cs=null;function Dr(s){var a=s.alternate;Y(nn,nn.current&1),Y(Ni,s),cs===null&&(a===null||Wo.current!==null||a.memoizedState!==null)&&(cs=s)}function h_(s){if(s.tag===22){if(Y(nn,nn.current),Y(Ni,s),cs===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(cs=s)}}else Mr()}function Mr(){Y(nn,nn.current),Y(Ni,Ni.current)}function Ys(s){te(Ni),cs===s&&(cs=null),te(nn)}var nn=ae(0);function Oh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||qg(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function tg(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ng={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=hi(),g=kr(h);g.payload=a,l!=null&&(g.callback=l),a=Cr(s,g,h),a!==null&&(di(a,s,h),fc(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=hi(),g=kr(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Cr(s,g,h),a!==null&&(di(a,s,h),fc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=hi(),h=kr(l);h.tag=2,a!=null&&(h.callback=a),a=Cr(s,h,l),a!==null&&(di(a,s,l),fc(a,s,l))}};function d_(s,a,l,h,g,b,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,S):a.prototype&&a.prototype.isPureReactComponent?!ic(l,h)||!ic(g,b):!0}function f_(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&ng.enqueueReplaceState(a,a.state,null)}function Qa(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=y({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var jh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function m_(s){jh(s)}function g_(s){console.error(s)}function p_(s){jh(s)}function Lh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function y_(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ig(s,a,l){return l=kr(l),l.tag=3,l.payload={element:null},l.callback=function(){Lh(s,a)},l}function b_(s){return s=kr(s),s.tag=3,s}function __(s,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;s.payload=function(){return g(b)},s.callback=function(){y_(a,l,h)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){y_(a,l,h),typeof g!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var N=h.stack;this.componentDidCatch(h.value,{componentStack:N!==null?N:""})})}function m2(s,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&lc(a,l,g,!0),l=Ni.current,l!==null){switch(l.tag){case 13:return cs===null?Rg():l.alternate===null&&Vt===0&&(Vt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Dm?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),kg(s,h,g)),!1;case 22:return l.flags|=65536,h===Dm?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),kg(s,h,g)),!1}throw Error(i(435,l.tag))}return kg(s,h,g),Rg(),!1}if(ct)return a=Ni.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Tm&&(s=Error(i(422),{cause:h}),oc(Si(s,l)))):(h!==Tm&&(a=Error(i(423),{cause:h}),oc(Si(a,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=Si(h,l),g=ig(s.stateNode,h,g),Om(s,g),Vt!==4&&(Vt=2)),!1;var b=Error(i(520),{cause:h});if(b=Si(b,l),Nc===null?Nc=[b]:Nc.push(b),Vt!==4&&(Vt=2),a===null)return!0;h=Si(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=ig(l.stateNode,h,s),Om(l,s),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ur===null||!Ur.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=b_(g),__(g,s,l,h),Om(l,g),!1}l=l.return}while(l!==null);return!1}var v_=Error(i(461)),hn=!1;function yn(s,a,l,h){a.child=s===null?u_(a,null,l,h):Zo(a,s.child,l,h)}function x_(s,a,l,h,g){l=l.render;var b=a.ref;if("ref"in h){var S={};for(var N in h)N!=="ref"&&(S[N]=h[N])}else S=h;return Ya(a),h=Fm(s,a,l,S,b,g),N=zm(),s!==null&&!hn?(Bm(s,a,g),Ks(s,a,g)):(ct&&N&&Em(a),a.flags|=1,yn(s,a,h,g),a.child)}function w_(s,a,l,h,g){if(s===null){var b=l.type;return typeof b=="function"&&!vm(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,E_(s,a,b,h,g)):(s=ph(l.type,null,h,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!hg(s,g)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:ic,l(S,h)&&s.ref===a.ref)return Ks(s,a,g)}return a.flags|=1,s=Bs(b,h),s.ref=a.ref,s.return=a,a.child=s}function E_(s,a,l,h,g){if(s!==null){var b=s.memoizedProps;if(ic(b,h)&&s.ref===a.ref)if(hn=!1,a.pendingProps=h=b,hg(s,g))(s.flags&131072)!==0&&(hn=!0);else return a.lanes=s.lanes,Ks(s,a,g)}return sg(s,a,l,h,g)}function S_(s,a,l){var h=a.pendingProps,g=h.children,b=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=b!==null?b.baseLanes|l:l,s!==null){for(g=a.child=s.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;a.childLanes=b&~h}else a.childLanes=0,a.child=null;return T_(s,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&xh(a,b!==null?b.cachePool:null),b!==null?Eb(a,b):Lm(),h_(a);else return a.lanes=a.childLanes=536870912,T_(s,a,b!==null?b.baseLanes|l:l,l)}else b!==null?(xh(a,b.cachePool),Eb(a,b),Mr(),a.memoizedState=null):(s!==null&&xh(a,null),Lm(),Mr());return yn(s,a,g,l),a.child}function T_(s,a,l,h){var g=Im();return g=g===null?null:{parent:tn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},s!==null&&xh(a,null),Lm(),h_(a),s!==null&&lc(s,a,h,!0),null}function Vh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function sg(s,a,l,h,g){return Ya(a),l=Fm(s,a,l,h,void 0,g),h=zm(),s!==null&&!hn?(Bm(s,a,g),Ks(s,a,g)):(ct&&h&&Em(a),a.flags|=1,yn(s,a,l,g),a.child)}function A_(s,a,l,h,g,b){return Ya(a),a.updateQueue=null,l=Tb(a,h,l,g),Sb(s),h=zm(),s!==null&&!hn?(Bm(s,a,b),Ks(s,a,b)):(ct&&h&&Em(a),a.flags|=1,yn(s,a,l,b),a.child)}function R_(s,a,l,h,g){if(Ya(a),a.stateNode===null){var b=Bo,S=l.contextType;typeof S=="object"&&S!==null&&(b=Tn(S)),b=new l(h,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ng,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=h,b.state=a.memoizedState,b.refs={},Mm(a),S=l.contextType,b.context=typeof S=="object"&&S!==null?Tn(S):Bo,b.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(tg(a,l,S,h),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&ng.enqueueReplaceState(b,b.state,null),gc(a,h,b,g),mc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){b=a.stateNode;var N=a.memoizedProps,U=Qa(l,N);b.props=U;var J=b.context,ce=l.contextType;S=Bo,typeof ce=="object"&&ce!==null&&(S=Tn(ce));var fe=l.getDerivedStateFromProps;ce=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,ce||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||J!==S)&&f_(a,b,h,S),Nr=!1;var ne=a.memoizedState;b.state=ne,gc(a,h,b,g),mc(),J=a.memoizedState,N||ne!==J||Nr?(typeof fe=="function"&&(tg(a,l,fe,h),J=a.memoizedState),(U=Nr||d_(a,l,U,h,ne,J,S))?(ce||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=J),b.props=h,b.state=J,b.context=S,h=U):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{b=a.stateNode,Pm(s,a),S=a.memoizedProps,ce=Qa(l,S),b.props=ce,fe=a.pendingProps,ne=b.context,J=l.contextType,U=Bo,typeof J=="object"&&J!==null&&(U=Tn(J)),N=l.getDerivedStateFromProps,(J=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==fe||ne!==U)&&f_(a,b,h,U),Nr=!1,ne=a.memoizedState,b.state=ne,gc(a,h,b,g),mc();var ie=a.memoizedState;S!==fe||ne!==ie||Nr||s!==null&&s.dependencies!==null&&_h(s.dependencies)?(typeof N=="function"&&(tg(a,l,N,h),ie=a.memoizedState),(ce=Nr||d_(a,l,ce,h,ne,ie,U)||s!==null&&s.dependencies!==null&&_h(s.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,ie,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,ie,U)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),b.props=h,b.state=ie,b.context=U,h=ce):(typeof b.componentDidUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ne===s.memoizedState||(a.flags|=1024),h=!1)}return b=h,Vh(s,a),h=(a.flags&128)!==0,b||h?(b=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&h?(a.child=Zo(a,s.child,null,g),a.child=Zo(a,null,l,g)):yn(s,a,l,g),a.memoizedState=b.state,s=a.child):s=Ks(s,a,g),s}function N_(s,a,l,h){return ac(),a.flags|=256,yn(s,a,l,h),a.child}var rg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ag(s){return{baseLanes:s,cachePool:gb()}}function og(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=ki),s}function k_(s,a,l){var h=a.pendingProps,g=!1,b=(a.flags&128)!==0,S;if((S=b)||(S=s!==null&&s.memoizedState===null?!1:(nn.current&2)!==0),S&&(g=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,s===null){if(ct){if(g?Dr(a):Mr(),ct){var N=Lt,U;if(U=N){e:{for(U=N,N=ls;U.nodeType!==8;){if(!N){N=null;break e}if(U=Hi(U.nextSibling),U===null){N=null;break e}}N=U}N!==null?(a.memoizedState={dehydrated:N,treeContext:Ha!==null?{id:Hs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},U=oi(18,null,null,0),U.stateNode=N,U.return=a,a.child=U,Fn=a,Lt=null,U=!0):U=!1}U||$a(a)}if(N=a.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return qg(N)?a.lanes=32:a.lanes=536870912,null;Ys(a)}return N=h.children,h=h.fallback,g?(Mr(),g=a.mode,N=Uh({mode:"hidden",children:N},g),h=Ba(h,g,l,null),N.return=a,h.return=a,N.sibling=h,a.child=N,g=a.child,g.memoizedState=ag(l),g.childLanes=og(s,S,l),a.memoizedState=rg,h):(Dr(a),lg(a,N))}if(U=s.memoizedState,U!==null&&(N=U.dehydrated,N!==null)){if(b)a.flags&256?(Dr(a),a.flags&=-257,a=cg(s,a,l)):a.memoizedState!==null?(Mr(),a.child=s.child,a.flags|=128,a=null):(Mr(),g=h.fallback,N=a.mode,h=Uh({mode:"visible",children:h.children},N),g=Ba(g,N,l,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,Zo(a,s.child,null,l),h=a.child,h.memoizedState=ag(l),h.childLanes=og(s,S,l),a.memoizedState=rg,a=g);else if(Dr(a),qg(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var J=S.dgst;S=J,h=Error(i(419)),h.stack="",h.digest=S,oc({value:h,source:null,stack:null}),a=cg(s,a,l)}else if(hn||lc(s,a,l,!1),S=(l&s.childLanes)!==0,hn||S){if(S=At,S!==null&&(h=l&-l,h=(h&42)!==0?1:Zi(h),h=(h&(S.suspendedLanes|l))!==0?0:h,h!==0&&h!==U.retryLane))throw U.retryLane=h,zo(s,h),di(S,s,h),v_;N.data==="$?"||Rg(),a=cg(s,a,l)}else N.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=U.treeContext,Lt=Hi(N.nextSibling),Fn=a,ct=!0,Ga=null,ls=!1,s!==null&&(Ai[Ri++]=Hs,Ai[Ri++]=qs,Ai[Ri++]=Ha,Hs=s.id,qs=s.overflow,Ha=a),a=lg(a,h.children),a.flags|=4096);return a}return g?(Mr(),g=h.fallback,N=a.mode,U=s.child,J=U.sibling,h=Bs(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,J!==null?g=Bs(J,g):(g=Ba(g,N,l,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,N=s.child.memoizedState,N===null?N=ag(l):(U=N.cachePool,U!==null?(J=tn._currentValue,U=U.parent!==J?{parent:J,pool:J}:U):U=gb(),N={baseLanes:N.baseLanes|l,cachePool:U}),g.memoizedState=N,g.childLanes=og(s,S,l),a.memoizedState=rg,h):(Dr(a),l=s.child,s=l.sibling,l=Bs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(S=a.deletions,S===null?(a.deletions=[s],a.flags|=16):S.push(s)),a.child=l,a.memoizedState=null,l)}function lg(s,a){return a=Uh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Uh(s,a){return s=oi(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function cg(s,a,l){return Zo(a,s.child,null,l),s=lg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function C_(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Rm(s.return,a,l)}function ug(s,a,l,h,g){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=l,b.tailMode=g)}function I_(s,a,l){var h=a.pendingProps,g=h.revealOrder,b=h.tail;if(yn(s,a,h.children,l),h=nn.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&C_(s,l,a);else if(s.tag===19)C_(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(Y(nn,h),g){case"forwards":for(l=a.child,g=null;l!==null;)s=l.alternate,s!==null&&Oh(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),ug(a,!1,g,l,b);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Oh(s)===null){a.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}ug(a,!0,l,null,b);break;case"together":ug(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ks(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Vr|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(lc(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=Bs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Bs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function hg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&_h(s)))}function g2(s,a,l){switch(a.tag){case 3:G(a,a.stateNode.containerInfo),Rr(a,tn,s.memoizedState.cache),ac();break;case 27:case 5:He(a);break;case 4:G(a,a.stateNode.containerInfo);break;case 10:Rr(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Dr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?k_(s,a,l):(Dr(a),s=Ks(s,a,l),s!==null?s.sibling:null);Dr(a);break;case 19:var g=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(lc(s,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return I_(s,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Y(nn,nn.current),h)break;return null;case 22:case 23:return a.lanes=0,S_(s,a,l);case 24:Rr(a,tn,s.memoizedState.cache)}return Ks(s,a,l)}function D_(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)hn=!0;else{if(!hg(s,l)&&(a.flags&128)===0)return hn=!1,g2(s,a,l);hn=(s.flags&131072)!==0}else hn=!1,ct&&(a.flags&1048576)!==0&&lb(a,bh,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")vm(h)?(s=Qa(h,s),a.tag=1,a=R_(null,a,h,s,l)):(a.tag=0,a=sg(null,a,h,s,l));else{if(h!=null){if(g=h.$$typeof,g===Z){a.tag=11,a=x_(null,a,h,s,l);break e}else if(g===P){a.tag=14,a=w_(null,a,h,s,l);break e}}throw a=be(h)||h,Error(i(306,a,""))}}return a;case 0:return sg(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=Qa(h,a.pendingProps),R_(s,a,h,g,l);case 3:e:{if(G(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var b=a.memoizedState;g=b.element,Pm(s,a),gc(a,h,null,l);var S=a.memoizedState;if(h=S.cache,Rr(a,tn,h),h!==b.cache&&Nm(a,[tn],l,!0),mc(),h=S.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=N_(s,a,h,l);break e}else if(h!==g){g=Si(Error(i(424)),a),oc(g),a=N_(s,a,h,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Lt=Hi(s.firstChild),Fn=a,ct=!0,Ga=null,ls=!0,l=u_(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ac(),h===g){a=Ks(s,a,l);break e}yn(s,a,h,l)}a=a.child}return a;case 26:return Vh(s,a),s===null?(l=jv(a.type,null,a.pendingProps,null))?a.memoizedState=l:ct||(l=a.type,s=a.pendingProps,h=Jh(_e.current).createElement(l),h[mt]=a,h[vt]=s,_n(h,l,s),ut(h),a.stateNode=h):a.memoizedState=jv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return He(a),s===null&&ct&&(h=a.stateNode=Mv(a.type,a.pendingProps,_e.current),Fn=a,ls=!0,g=Lt,Br(a.type)?(Gg=g,Lt=Hi(h.firstChild)):Lt=g),yn(s,a,a.pendingProps.children,l),Vh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ct&&((g=h=Lt)&&(h=H2(h,a.type,a.pendingProps,ls),h!==null?(a.stateNode=h,Fn=a,Lt=Hi(h.firstChild),ls=!1,g=!0):g=!1),g||$a(a)),He(a),g=a.type,b=a.pendingProps,S=s!==null?s.memoizedProps:null,h=b.children,zg(g,b)?h=null:S!==null&&zg(g,S)&&(a.flags|=32),a.memoizedState!==null&&(g=Fm(s,a,o2,null,null,l),Lc._currentValue=g),Vh(s,a),yn(s,a,h,l),a.child;case 6:return s===null&&ct&&((s=l=Lt)&&(l=q2(l,a.pendingProps,ls),l!==null?(a.stateNode=l,Fn=a,Lt=null,s=!0):s=!1),s||$a(a)),null;case 13:return k_(s,a,l);case 4:return G(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Zo(a,null,h,l):yn(s,a,h,l),a.child;case 11:return x_(s,a,a.type,a.pendingProps,l);case 7:return yn(s,a,a.pendingProps,l),a.child;case 8:return yn(s,a,a.pendingProps.children,l),a.child;case 12:return yn(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Rr(a,a.type,h.value),yn(s,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Ya(a),g=Tn(g),h=h(g),a.flags|=1,yn(s,a,h,l),a.child;case 14:return w_(s,a,a.type,a.pendingProps,l);case 15:return E_(s,a,a.type,a.pendingProps,l);case 19:return I_(s,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},s===null?(l=Uh(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Bs(s.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return S_(s,a,l);case 24:return Ya(a),h=Tn(tn),s===null?(g=Im(),g===null&&(g=At,b=km(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),a.memoizedState={parent:h,cache:g},Mm(a),Rr(a,tn,g)):((s.lanes&l)!==0&&(Pm(s,a),gc(a,null,null,l),mc()),g=s.memoizedState,b=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Rr(a,tn,h)):(h=b.cache,Rr(a,tn,h),h!==g.cache&&Nm(a,[tn],l,!0))),yn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Xs(s){s.flags|=4}function M_(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zv(a)){if(a=Ni.current,a!==null&&((it&4194048)===it?cs!==null:(it&62914560)!==it&&(it&536870912)===0||a!==cs))throw dc=Dm,pb;s.flags|=8192}}function Fh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ta():536870912,s.lanes|=a,nl|=a)}function wc(s,a){if(!ct)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Pt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function p2(s,a,l){var h=a.pendingProps;switch(Sm(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),$s(tn),oe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(rc(a)?Xs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hb())),Pt(a),null;case 26:return l=a.memoizedState,s===null?(Xs(a),l!==null?(Pt(a),M_(a,l)):(Pt(a),a.flags&=-16777217)):l?l!==s.memoizedState?(Xs(a),Pt(a),M_(a,l)):(Pt(a),a.flags&=-16777217):(s.memoizedProps!==h&&Xs(a),Pt(a),a.flags&=-16777217),null;case 27:Ce(a),l=_e.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Xs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Pt(a),null}s=ge.current,rc(a)?cb(a):(s=Mv(g,h,l),a.stateNode=s,Xs(a))}return Pt(a),null;case 5:if(Ce(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Xs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Pt(a),null}if(s=ge.current,rc(a))cb(a);else{switch(g=Jh(_e.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}s[mt]=a,s[vt]=h;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;e:switch(_n(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Xs(a)}}return Pt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Xs(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=_e.current,rc(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,g=Fn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[mt]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||Av(s.nodeValue,l)),s||$a(a)}else s=Jh(s).createTextNode(h),s[mt]=a,a.stateNode=s}return Pt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=rc(a),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[mt]=a}else ac(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),g=!1}else g=hb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Ys(a),a):(Ys(a),null)}if(Ys(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),Fh(a,a.updateQueue),Pt(a),null;case 4:return oe(),s===null&&jg(a.stateNode.containerInfo),Pt(a),null;case 10:return $s(a.type),Pt(a),null;case 19:if(te(nn),g=a.memoizedState,g===null)return Pt(a),null;if(h=(a.flags&128)!==0,b=g.rendering,b===null)if(h)wc(g,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Oh(s),b!==null){for(a.flags|=128,wc(g,!1),s=b.updateQueue,a.updateQueue=s,Fh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)ob(l,s),l=l.sibling;return Y(nn,nn.current&1|2),a.child}s=s.sibling}g.tail!==null&&zn()>Hh&&(a.flags|=128,h=!0,wc(g,!1),a.lanes=4194304)}else{if(!h)if(s=Oh(b),s!==null){if(a.flags|=128,h=!0,s=s.updateQueue,a.updateQueue=s,Fh(a,s),wc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!ct)return Pt(a),null}else 2*zn()-g.renderingStartTime>Hh&&l!==536870912&&(a.flags|=128,h=!0,wc(g,!1),a.lanes=4194304);g.isBackwards?(b.sibling=a.child,a.child=b):(s=g.last,s!==null?s.sibling=b:a.child=b,g.last=b)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=zn(),a.sibling=null,s=nn.current,Y(nn,h?s&1|2:s&1),a):(Pt(a),null);case 22:case 23:return Ys(a),Vm(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),l=a.updateQueue,l!==null&&Fh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&te(Ka),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),$s(tn),Pt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function y2(s,a){switch(Sm(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return $s(tn),oe(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ce(a),null;case 13:if(Ys(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ac()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return te(nn),null;case 4:return oe(),null;case 10:return $s(a.type),null;case 22:case 23:return Ys(a),Vm(),s!==null&&te(Ka),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return $s(tn),null;case 25:return null;default:return null}}function P_(s,a){switch(Sm(a),a.tag){case 3:$s(tn),oe();break;case 26:case 27:case 5:Ce(a);break;case 4:oe();break;case 13:Ys(a);break;case 19:te(nn);break;case 10:$s(a.type);break;case 22:case 23:Ys(a),Vm(),s!==null&&te(Ka);break;case 24:$s(tn)}}function Ec(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&s)===s){h=void 0;var b=l.create,S=l.inst;h=b(),S.destroy=h}l=l.next}while(l!==g)}}catch(N){Tt(a,a.return,N)}}function Pr(s,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&s)===s){var S=h.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,g=a;var U=l,J=N;try{J()}catch(ce){Tt(g,U,ce)}}}h=h.next}while(h!==b)}}catch(ce){Tt(a,a.return,ce)}}function O_(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{wb(a,l)}catch(h){Tt(s,s.return,h)}}}function j_(s,a,l){l.props=Qa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){Tt(s,a,h)}}function Sc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(g){Tt(s,a,g)}}function us(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Tt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Tt(s,a,g)}else l.current=null}function L_(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Tt(s,s.return,g)}}function dg(s,a,l){try{var h=s.stateNode;V2(h,s.type,l,a),h[vt]=a}catch(g){Tt(s,s.return,g)}}function V_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Br(s.type)||s.tag===4}function fg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||V_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Br(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mg(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Zh));else if(h!==4&&(h===27&&Br(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(mg(s,a,l),s=s.sibling;s!==null;)mg(s,a,l),s=s.sibling}function zh(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&Br(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(zh(s,a,l),s=s.sibling;s!==null;)zh(s,a,l),s=s.sibling}function U_(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);_n(a,h,l),a[mt]=s,a[vt]=l}catch(b){Tt(s,s.return,b)}}var Qs=!1,zt=!1,gg=!1,F_=typeof WeakSet=="function"?WeakSet:Set,dn=null;function b2(s,a){if(s=s.containerInfo,Ug=rd,s=Q0(s),fm(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,N=-1,U=-1,J=0,ce=0,fe=s,ne=null;t:for(;;){for(var ie;fe!==l||g!==0&&fe.nodeType!==3||(N=S+g),fe!==b||h!==0&&fe.nodeType!==3||(U=S+h),fe.nodeType===3&&(S+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)ne=fe,fe=ie;for(;;){if(fe===s)break t;if(ne===l&&++J===g&&(N=S),ne===b&&++ce===h&&(U=S),(ie=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=ie}l=N===-1||U===-1?null:{start:N,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fg={focusedElem:s,selectionRange:l},rd=!1,dn=a;dn!==null;)if(a=dn,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,dn=s;else for(;dn!==null;){switch(a=dn,b=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,l=a,g=b.memoizedProps,b=b.memoizedState,h=l.stateNode;try{var Le=Qa(l.type,g,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(Le,b),h.__reactInternalSnapshotBeforeUpdate=s}catch(Me){Tt(l,l.return,Me)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Hg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,dn=s;break}dn=a.return}}function z_(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Or(s,l),h&4&&Ec(5,l);break;case 1:if(Or(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(S){Tt(l,l.return,S)}else{var g=Qa(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Tt(l,l.return,S)}}h&64&&O_(l),h&512&&Sc(l,l.return);break;case 3:if(Or(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{wb(s,a)}catch(S){Tt(l,l.return,S)}}break;case 27:a===null&&h&4&&U_(l);case 26:case 5:Or(s,l),a===null&&h&4&&L_(l),h&512&&Sc(l,l.return);break;case 12:Or(s,l);break;case 13:Or(s,l),h&4&&q_(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=R2.bind(null,l),G2(s,l))));break;case 22:if(h=l.memoizedState!==null||Qs,!h){a=a!==null&&a.memoizedState!==null||zt,g=Qs;var b=zt;Qs=h,(zt=a)&&!b?jr(s,l,(l.subtreeFlags&8772)!==0):Or(s,l),Qs=g,zt=b}break;case 30:break;default:Or(s,l)}}function B_(s){var a=s.alternate;a!==null&&(s.alternate=null,B_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&_i(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Mt=null,$n=!1;function Zs(s,a,l){for(l=l.child;l!==null;)H_(s,a,l),l=l.sibling}function H_(s,a,l){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Nt,l)}catch{}switch(l.tag){case 26:zt||us(l,a),Zs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||us(l,a);var h=Mt,g=$n;Br(l.type)&&(Mt=l.stateNode,$n=!1),Zs(s,a,l),Mc(l.stateNode),Mt=h,$n=g;break;case 5:zt||us(l,a);case 6:if(h=Mt,g=$n,Mt=null,Zs(s,a,l),Mt=h,$n=g,Mt!==null)if($n)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(l.stateNode)}catch(b){Tt(l,a,b)}else try{Mt.removeChild(l.stateNode)}catch(b){Tt(l,a,b)}break;case 18:Mt!==null&&($n?(s=Mt,Iv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),zc(s)):Iv(Mt,l.stateNode));break;case 4:h=Mt,g=$n,Mt=l.stateNode.containerInfo,$n=!0,Zs(s,a,l),Mt=h,$n=g;break;case 0:case 11:case 14:case 15:zt||Pr(2,l,a),zt||Pr(4,l,a),Zs(s,a,l);break;case 1:zt||(us(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&j_(l,a,h)),Zs(s,a,l);break;case 21:Zs(s,a,l);break;case 22:zt=(h=zt)||l.memoizedState!==null,Zs(s,a,l),zt=h;break;default:Zs(s,a,l)}}function q_(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zc(s)}catch(l){Tt(a,a.return,l)}}function _2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new F_),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new F_),a;default:throw Error(i(435,s.tag))}}function pg(s,a){var l=_2(s);a.forEach(function(h){var g=N2.bind(null,s,h);l.has(h)||(l.add(h),h.then(g,g))})}function li(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],b=s,S=a,N=S;e:for(;N!==null;){switch(N.tag){case 27:if(Br(N.type)){Mt=N.stateNode,$n=!1;break e}break;case 5:Mt=N.stateNode,$n=!1;break e;case 3:case 4:Mt=N.stateNode.containerInfo,$n=!0;break e}N=N.return}if(Mt===null)throw Error(i(160));H_(b,S,g),Mt=null,$n=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)G_(a,s),a=a.sibling}var Bi=null;function G_(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:li(a,s),ci(s),h&4&&(Pr(3,s,s.return),Ec(3,s),Pr(5,s,s.return));break;case 1:li(a,s),ci(s),h&512&&(zt||l===null||us(l,l.return)),h&64&&Qs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Bi;if(li(a,s),ci(s),h&512&&(zt||l===null||us(l,l.return)),h&4){var b=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){e:{h=s.type,l=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[jn]||b[mt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),_n(b,h,l),b[mt]=s,ut(b),h=b;break e;case"link":var S=Uv("link","href",g).get(h+(l.href||""));if(S){for(var N=0;N<S.length;N++)if(b=S[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(N,1);break t}}b=g.createElement(h),_n(b,h,l),g.head.appendChild(b);break;case"meta":if(S=Uv("meta","content",g).get(h+(l.content||""))){for(N=0;N<S.length;N++)if(b=S[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(N,1);break t}}b=g.createElement(h),_n(b,h,l),g.head.appendChild(b);break;default:throw Error(i(468,h))}b[mt]=s,ut(b),h=b}s.stateNode=h}else Fv(g,s.type,s.stateNode);else s.stateNode=Vv(g,h,s.memoizedProps);else b!==h?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,h===null?Fv(g,s.type,s.stateNode):Vv(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&dg(s,s.memoizedProps,l.memoizedProps)}break;case 27:li(a,s),ci(s),h&512&&(zt||l===null||us(l,l.return)),l!==null&&h&4&&dg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(li(a,s),ci(s),h&512&&(zt||l===null||us(l,l.return)),s.flags&32){g=s.stateNode;try{vi(g,"")}catch(ie){Tt(s,s.return,ie)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,dg(s,g,l!==null?l.memoizedProps:g)),h&1024&&(gg=!0);break;case 6:if(li(a,s),ci(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(ie){Tt(s,s.return,ie)}}break;case 3:if(nd=null,g=Bi,Bi=ed(a.containerInfo),li(a,s),Bi=g,ci(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{zc(a.containerInfo)}catch(ie){Tt(s,s.return,ie)}gg&&(gg=!1,$_(s));break;case 4:h=Bi,Bi=ed(s.stateNode.containerInfo),li(a,s),ci(s),Bi=h;break;case 12:li(a,s),ci(s);break;case 13:li(a,s),ci(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wg=zn()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,pg(s,h)));break;case 22:g=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,J=Qs,ce=zt;if(Qs=J||g,zt=ce||U,li(a,s),zt=ce,Qs=J,ci(s),h&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||U||Qs||zt||Za(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){U=l=a;try{if(b=U.stateNode,g)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=U.stateNode;var fe=U.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;N.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ie){Tt(U,U.return,ie)}}}else if(a.tag===6){if(l===null){U=a;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(ie){Tt(U,U.return,ie)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,pg(s,l))));break;case 19:li(a,s),ci(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,pg(s,h)));break;case 30:break;case 21:break;default:li(a,s),ci(s)}}function ci(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(V_(h)){l=h;break}h=h.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,b=fg(s);zh(s,b,g);break;case 5:var S=l.stateNode;l.flags&32&&(vi(S,""),l.flags&=-33);var N=fg(s);zh(s,N,S);break;case 3:case 4:var U=l.stateNode.containerInfo,J=fg(s);mg(s,J,U);break;default:throw Error(i(161))}}catch(ce){Tt(s,s.return,ce)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function $_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;$_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Or(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)z_(s,a.alternate,a),a=a.sibling}function Za(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Pr(4,a,a.return),Za(a);break;case 1:us(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&j_(a,a.return,l),Za(a);break;case 27:Mc(a.stateNode);case 26:case 5:us(a,a.return),Za(a);break;case 22:a.memoizedState===null&&Za(a);break;case 30:Za(a);break;default:Za(a)}s=s.sibling}}function jr(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=s,b=a,S=b.flags;switch(b.tag){case 0:case 11:case 15:jr(g,b,l),Ec(4,b);break;case 1:if(jr(g,b,l),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){Tt(h,h.return,J)}if(h=b,g=h.updateQueue,g!==null){var N=h.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)xb(U[g],N)}catch(J){Tt(h,h.return,J)}}l&&S&64&&O_(b),Sc(b,b.return);break;case 27:U_(b);case 26:case 5:jr(g,b,l),l&&h===null&&S&4&&L_(b),Sc(b,b.return);break;case 12:jr(g,b,l);break;case 13:jr(g,b,l),l&&S&4&&q_(g,b);break;case 22:b.memoizedState===null&&jr(g,b,l),Sc(b,b.return);break;case 30:break;default:jr(g,b,l)}a=a.sibling}}function yg(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&cc(l))}function bg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&cc(s))}function hs(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)W_(s,a,l,h),a=a.sibling}function W_(s,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:hs(s,a,l,h),g&2048&&Ec(9,a);break;case 1:hs(s,a,l,h);break;case 3:hs(s,a,l,h),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&cc(s)));break;case 12:if(g&2048){hs(s,a,l,h),s=a.stateNode;try{var b=a.memoizedProps,S=b.id,N=b.onPostCommit;typeof N=="function"&&N(S,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){Tt(a,a.return,U)}}else hs(s,a,l,h);break;case 13:hs(s,a,l,h);break;case 23:break;case 22:b=a.stateNode,S=a.alternate,a.memoizedState!==null?b._visibility&2?hs(s,a,l,h):Tc(s,a):b._visibility&2?hs(s,a,l,h):(b._visibility|=2,Jo(s,a,l,h,(a.subtreeFlags&10256)!==0)),g&2048&&yg(S,a);break;case 24:hs(s,a,l,h),g&2048&&bg(a.alternate,a);break;default:hs(s,a,l,h)}}function Jo(s,a,l,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=s,S=a,N=l,U=h,J=S.flags;switch(S.tag){case 0:case 11:case 15:Jo(b,S,N,U,g),Ec(8,S);break;case 23:break;case 22:var ce=S.stateNode;S.memoizedState!==null?ce._visibility&2?Jo(b,S,N,U,g):Tc(b,S):(ce._visibility|=2,Jo(b,S,N,U,g)),g&&J&2048&&yg(S.alternate,S);break;case 24:Jo(b,S,N,U,g),g&&J&2048&&bg(S.alternate,S);break;default:Jo(b,S,N,U,g)}a=a.sibling}}function Tc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,g=h.flags;switch(h.tag){case 22:Tc(l,h),g&2048&&yg(h.alternate,h);break;case 24:Tc(l,h),g&2048&&bg(h.alternate,h);break;default:Tc(l,h)}a=a.sibling}}var Ac=8192;function el(s){if(s.subtreeFlags&Ac)for(s=s.child;s!==null;)Y_(s),s=s.sibling}function Y_(s){switch(s.tag){case 26:el(s),s.flags&Ac&&s.memoizedState!==null&&sR(Bi,s.memoizedState,s.memoizedProps);break;case 5:el(s);break;case 3:case 4:var a=Bi;Bi=ed(s.stateNode.containerInfo),el(s),Bi=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Ac,Ac=16777216,el(s),Ac=a):el(s));break;default:el(s)}}function K_(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Rc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];dn=h,Q_(h,s)}K_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X_(s),s=s.sibling}function X_(s){switch(s.tag){case 0:case 11:case 15:Rc(s),s.flags&2048&&Pr(9,s,s.return);break;case 3:Rc(s);break;case 12:Rc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Bh(s)):Rc(s);break;default:Rc(s)}}function Bh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];dn=h,Q_(h,s)}K_(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Pr(8,a,a.return),Bh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Bh(a));break;default:Bh(a)}s=s.sibling}}function Q_(s,a){for(;dn!==null;){var l=dn;switch(l.tag){case 0:case 11:case 15:Pr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:cc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,dn=h;else e:for(l=s;dn!==null;){h=dn;var g=h.sibling,b=h.return;if(B_(h),h===l){dn=null;break e}if(g!==null){g.return=b,dn=g;break e}dn=b}}}var v2={getCacheForType:function(s){var a=Tn(tn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},x2=typeof WeakMap=="function"?WeakMap:Map,gt=0,At=null,Ye=null,it=0,pt=0,ui=null,Lr=!1,tl=!1,_g=!1,Js=0,Vt=0,Vr=0,Ja=0,vg=0,ki=0,nl=0,Nc=null,Wn=null,xg=!1,wg=0,Hh=1/0,qh=null,Ur=null,bn=0,Fr=null,il=null,sl=0,Eg=0,Sg=null,Z_=null,kc=0,Tg=null;function hi(){if((gt&2)!==0&&it!==0)return it&-it;if(F.T!==null){var s=Go;return s!==0?s:Dg()}return ii()}function J_(){ki===0&&(ki=(it&536870912)===0||ct?Je():536870912);var s=Ni.current;return s!==null&&(s.flags|=32),ki}function di(s,a,l){(s===At&&(pt===2||pt===9)||s.cancelPendingCommit!==null)&&(rl(s,0),zr(s,it,ki,!1)),pi(s,l),((gt&2)===0||s!==At)&&(s===At&&((gt&2)===0&&(Ja|=l),Vt===4&&zr(s,it,ki,!1)),ds(s))}function ev(s,a,l){if((gt&6)!==0)throw Error(i(327));var h=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Xi(s,a),g=h?S2(s,a):Ng(s,a,!0),b=h;do{if(g===0){tl&&!h&&zr(s,a,0,!1);break}else{if(l=s.current.alternate,b&&!w2(l)){g=Ng(s,a,!1),b=!1;continue}if(g===2){if(b=a,s.errorRecoveryDisabledLanes&b)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var N=s;g=Nc;var U=N.current.memoizedState.isDehydrated;if(U&&(rl(N,S).flags|=256),S=Ng(N,S,!1),S!==2){if(_g&&!U){N.errorRecoveryDisabledLanes|=b,Ja|=b,g=4;break e}b=Wn,Wn=g,b!==null&&(Wn===null?Wn=b:Wn.push.apply(Wn,b))}g=S}if(b=!1,g!==2)continue}}if(g===1){rl(s,0),zr(s,a,0,!0);break}e:{switch(h=s,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:zr(h,a,ki,!Lr);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=wg+300-zn(),10<g)){if(zr(h,a,ki,!Lr),xr(h,0,!0)!==0)break e;h.timeoutHandle=kv(tv.bind(null,h,l,Wn,qh,xg,a,ki,Ja,nl,Lr,b,2,-0,0),g);break e}tv(h,l,Wn,qh,xg,a,ki,Ja,nl,Lr,b,0,-0,0)}}break}while(!0);ds(s)}function tv(s,a,l,h,g,b,S,N,U,J,ce,fe,ne,ie){if(s.timeoutHandle=-1,fe=a.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(jc={stylesheets:null,count:0,unsuspend:iR},Y_(a),fe=rR(),fe!==null)){s.cancelPendingCommit=fe(lv.bind(null,s,a,b,l,h,g,S,N,U,ce,1,ne,ie)),zr(s,b,S,!J);return}lv(s,a,b,l,h,g,S,N,U)}function w2(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],b=g.getSnapshot;g=g.value;try{if(!ai(b(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zr(s,a,l,h){a&=~vg,a&=~Ja,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var g=a;0<g;){var b=31-Zt(g),S=1<<b;h[b]=-1,g&=~S}l!==0&&yi(s,l,a)}function Gh(){return(gt&6)===0?(Cc(0),!1):!0}function Ag(){if(Ye!==null){if(pt===0)var s=Ye.return;else s=Ye,Gs=Wa=null,Hm(s),Qo=null,vc=0,s=Ye;for(;s!==null;)P_(s.alternate,s),s=s.return;Ye=null}}function rl(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,F2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ag(),At=s,Ye=l=Bs(s.current,null),it=a,pt=0,ui=null,Lr=!1,tl=Xi(s,a),_g=!1,nl=ki=vg=Ja=Vr=Vt=0,Wn=Nc=null,xg=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var g=31-Zt(h),b=1<<g;a|=s[g],h&=~b}return Js=a,fh(),l}function nv(s,a){Ge=null,F.H=Dh,a===hc||a===wh?(a=_b(),pt=3):a===pb?(a=_b(),pt=4):pt=a===v_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ui=a,Ye===null&&(Vt=1,Lh(s,Si(a,s.current)))}function iv(){var s=F.H;return F.H=Dh,s===null?Dh:s}function sv(){var s=F.A;return F.A=v2,s}function Rg(){Vt=4,Lr||(it&4194048)!==it&&Ni.current!==null||(tl=!0),(Vr&134217727)===0&&(Ja&134217727)===0||At===null||zr(At,it,ki,!1)}function Ng(s,a,l){var h=gt;gt|=2;var g=iv(),b=sv();(At!==s||it!==a)&&(qh=null,rl(s,a)),a=!1;var S=Vt;e:do try{if(pt!==0&&Ye!==null){var N=Ye,U=ui;switch(pt){case 8:Ag(),S=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(a=!0);var J=pt;if(pt=0,ui=null,al(s,N,U,J),l&&tl){S=0;break e}break;default:J=pt,pt=0,ui=null,al(s,N,U,J)}}E2(),S=Vt;break}catch(ce){nv(s,ce)}while(!0);return a&&s.shellSuspendCounter++,Gs=Wa=null,gt=h,F.H=g,F.A=b,Ye===null&&(At=null,it=0,fh()),S}function E2(){for(;Ye!==null;)rv(Ye)}function S2(s,a){var l=gt;gt|=2;var h=iv(),g=sv();At!==s||it!==a?(qh=null,Hh=zn()+500,rl(s,a)):tl=Xi(s,a);e:do try{if(pt!==0&&Ye!==null){a=Ye;var b=ui;t:switch(pt){case 1:pt=0,ui=null,al(s,a,b,1);break;case 2:case 9:if(yb(b)){pt=0,ui=null,av(a);break}a=function(){pt!==2&&pt!==9||At!==s||(pt=7),ds(s)},b.then(a,a);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:yb(b)?(pt=0,ui=null,av(a)):(pt=0,ui=null,al(s,a,b,7));break;case 5:var S=null;switch(Ye.tag){case 26:S=Ye.memoizedState;case 5:case 27:var N=Ye;if(!S||zv(S)){pt=0,ui=null;var U=N.sibling;if(U!==null)Ye=U;else{var J=N.return;J!==null?(Ye=J,$h(J)):Ye=null}break t}}pt=0,ui=null,al(s,a,b,5);break;case 6:pt=0,ui=null,al(s,a,b,6);break;case 8:Ag(),Vt=6;break e;default:throw Error(i(462))}}T2();break}catch(ce){nv(s,ce)}while(!0);return Gs=Wa=null,F.H=h,F.A=g,gt=l,Ye!==null?0:(At=null,it=0,fh(),Vt)}function T2(){for(;Ye!==null&&!Jn();)rv(Ye)}function rv(s){var a=D_(s.alternate,s,Js);s.memoizedProps=s.pendingProps,a===null?$h(s):Ye=a}function av(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=A_(l,a,a.pendingProps,a.type,void 0,it);break;case 11:a=A_(l,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:Hm(a);default:P_(l,a),a=Ye=ob(a,Js),a=D_(l,a,Js)}s.memoizedProps=s.pendingProps,a===null?$h(s):Ye=a}function al(s,a,l,h){Gs=Wa=null,Hm(a),Qo=null,vc=0;var g=a.return;try{if(m2(s,g,a,l,it)){Vt=1,Lh(s,Si(l,s.current)),Ye=null;return}}catch(b){if(g!==null)throw Ye=g,b;Vt=1,Lh(s,Si(l,s.current)),Ye=null;return}a.flags&32768?(ct||h===1?s=!0:tl||(it&536870912)!==0?s=!1:(Lr=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ni.current,h!==null&&h.tag===13&&(h.flags|=16384))),ov(a,s)):$h(a)}function $h(s){var a=s;do{if((a.flags&32768)!==0){ov(a,Lr);return}s=a.return;var l=p2(a.alternate,a,Js);if(l!==null){Ye=l;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=s}while(a!==null);Vt===0&&(Vt=5)}function ov(s,a){do{var l=y2(s.alternate,s);if(l!==null){l.flags&=32767,Ye=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ye=s;return}Ye=s=l}while(s!==null);Vt=6,Ye=null}function lv(s,a,l,h,g,b,S,N,U){s.cancelPendingCommit=null;do Wh();while(bn!==0);if((gt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=bm,Aa(s,l,b,S,N,U),s===At&&(Ye=At=null,it=0),il=a,Fr=s,sl=l,Eg=b,Sg=g,Z_=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,k2(ei,function(){return fv(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,g=ee.p,ee.p=2,S=gt,gt|=4;try{b2(s,a,l)}finally{gt=S,ee.p=g,F.T=h}}bn=1,cv(),uv(),hv()}}function cv(){if(bn===1){bn=0;var s=Fr,a=il,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var h=ee.p;ee.p=2;var g=gt;gt|=4;try{G_(a,s);var b=Fg,S=Q0(s.containerInfo),N=b.focusedElem,U=b.selectionRange;if(S!==N&&N&&N.ownerDocument&&X0(N.ownerDocument.documentElement,N)){if(U!==null&&fm(N)){var J=U.start,ce=U.end;if(ce===void 0&&(ce=J),"selectionStart"in N)N.selectionStart=J,N.selectionEnd=Math.min(ce,N.value.length);else{var fe=N.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),Le=N.textContent.length,Me=Math.min(U.start,Le),St=U.end===void 0?Me:Math.min(U.end,Le);!ie.extend&&Me>St&&(S=St,St=Me,Me=S);var K=K0(N,Me),q=K0(N,St);if(K&&q&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var Q=fe.createRange();Q.setStart(K.node,K.offset),ie.removeAllRanges(),Me>St?(ie.addRange(Q),ie.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ie.addRange(Q))}}}}for(fe=[],ie=N;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<fe.length;N++){var he=fe[N];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}rd=!!Ug,Fg=Ug=null}finally{gt=g,ee.p=h,F.T=l}}s.current=a,bn=2}}function uv(){if(bn===2){bn=0;var s=Fr,a=il,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var h=ee.p;ee.p=2;var g=gt;gt|=4;try{z_(s,a.alternate,a)}finally{gt=g,ee.p=h,F.T=l}}bn=3}}function hv(){if(bn===4||bn===3){bn=0,br();var s=Fr,a=il,l=sl,h=Z_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,il=Fr=null,dv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ur=null),Ms(l),a=a.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Nt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=F.T,g=ee.p,ee.p=2,F.T=null;try{for(var b=s.onRecoverableError,S=0;S<h.length;S++){var N=h[S];b(N.value,{componentStack:N.stack})}}finally{F.T=a,ee.p=g}}(sl&3)!==0&&Wh(),ds(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Tg?kc++:(kc=0,Tg=s):kc=0,Cc(0)}}function dv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,cc(a)))}function Wh(s){return cv(),uv(),hv(),fv()}function fv(){if(bn!==5)return!1;var s=Fr,a=Eg;Eg=0;var l=Ms(sl),h=F.T,g=ee.p;try{ee.p=32>l?32:l,F.T=null,l=Sg,Sg=null;var b=Fr,S=sl;if(bn=0,il=Fr=null,sl=0,(gt&6)!==0)throw Error(i(331));var N=gt;if(gt|=4,X_(b.current),W_(b,b.current,S,l),gt=N,Cc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Nt,b)}catch{}return!0}finally{ee.p=g,F.T=h,dv(s,a)}}function mv(s,a,l){a=Si(l,a),a=ig(s.stateNode,a,2),s=Cr(s,a,2),s!==null&&(pi(s,2),ds(s))}function Tt(s,a,l){if(s.tag===3)mv(s,s,l);else for(;a!==null;){if(a.tag===3){mv(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ur===null||!Ur.has(h))){s=Si(l,s),l=b_(2),h=Cr(a,l,2),h!==null&&(__(l,h,a,s),pi(h,2),ds(h));break}}a=a.return}}function kg(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new x2;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(_g=!0,g.add(l),s=A2.bind(null,s,a,l),a.then(s,s))}function A2(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,At===s&&(it&l)===l&&(Vt===4||Vt===3&&(it&62914560)===it&&300>zn()-wg?(gt&2)===0&&rl(s,0):vg|=l,nl===it&&(nl=0)),ds(s)}function gv(s,a){a===0&&(a=Ta()),s=zo(s,a),s!==null&&(pi(s,a),ds(s))}function R2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),gv(s,l)}function N2(s,a){var l=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),gv(s,l)}function k2(s,a){return Is(s,a)}var Yh=null,ol=null,Cg=!1,Kh=!1,Ig=!1,eo=0;function ds(s){s!==ol&&s.next===null&&(ol===null?Yh=ol=s:ol=ol.next=s),Kh=!0,Cg||(Cg=!0,I2())}function Cc(s,a){if(!Ig&&Kh){Ig=!0;do for(var l=!1,h=Yh;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var S=h.suspendedLanes,N=h.pingedLanes;b=(1<<31-Zt(42|s)+1)-1,b&=g&~(S&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,_v(h,b))}else b=it,b=xr(h,h===At?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Xi(h,b)||(l=!0,_v(h,b));h=h.next}while(l);Ig=!1}}function C2(){pv()}function pv(){Kh=Cg=!1;var s=0;eo!==0&&(U2()&&(s=eo),eo=0);for(var a=zn(),l=null,h=Yh;h!==null;){var g=h.next,b=yv(h,a);b===0?(h.next=null,l===null?Yh=g:l.next=g,g===null&&(ol=l)):(l=h,(s!==0||(b&3)!==0)&&(Kh=!0)),h=g}Cc(s)}function yv(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var S=31-Zt(b),N=1<<S,U=g[S];U===-1?((N&l)===0||(N&h)!==0)&&(g[S]=Qi(N,a)):U<=a&&(s.expiredLanes|=N),b&=~N}if(a=At,l=it,l=xr(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(pt===2||pt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ji(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Xi(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&ji(h),Ms(l)){case 2:case 8:l=Li;break;case 32:l=ei;break;case 268435456:l=Bn;break;default:l=ei}return h=bv.bind(null,s),l=Is(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&ji(h),s.callbackPriority=2,s.callbackNode=null,2}function bv(s,a){if(bn!==0&&bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Wh()&&s.callbackNode!==l)return null;var h=it;return h=xr(s,s===At?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(ev(s,h,a),yv(s,zn()),s.callbackNode!=null&&s.callbackNode===l?bv.bind(null,s):null)}function _v(s,a){if(Wh())return null;ev(s,a,!0)}function I2(){z2(function(){(gt&6)!==0?Is(wa,C2):pv()})}function Dg(){return eo===0&&(eo=Je()),eo}function vv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ko(""+s)}function xv(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function D2(s,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var b=vv((g[vt]||null).action),S=h.submitter;S&&(a=(a=S[vt]||null)?vv(a.formAction):S.getAttribute("formAction"),a!==null&&(b=a,S=null));var N=new Co("action","action",null,h,g);s.push({event:N,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(eo!==0){var U=S?xv(g,S):new FormData(g);Zm(l,{pending:!0,data:U,method:g.method,action:b},null,U)}}else typeof b=="function"&&(N.preventDefault(),U=S?xv(g,S):new FormData(g),Zm(l,{pending:!0,data:U,method:g.method,action:b},b,U))},currentTarget:g}]})}}for(var Mg=0;Mg<ym.length;Mg++){var Pg=ym[Mg],M2=Pg.toLowerCase(),P2=Pg[0].toUpperCase()+Pg.slice(1);zi(M2,"on"+P2)}zi(eb,"onAnimationEnd"),zi(tb,"onAnimationIteration"),zi(nb,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(QA,"onTransitionRun"),zi(ZA,"onTransitionStart"),zi(JA,"onTransitionCancel"),zi(ib,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function wv(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],g=h.event;h=h.listeners;e:{var b=void 0;if(a)for(var S=h.length-1;0<=S;S--){var N=h[S],U=N.instance,J=N.currentTarget;if(N=N.listener,U!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=J;try{b(g)}catch(ce){jh(ce)}g.currentTarget=null,b=U}else for(S=0;S<h.length;S++){if(N=h[S],U=N.instance,J=N.currentTarget,N=N.listener,U!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=J;try{b(g)}catch(ce){jh(ce)}g.currentTarget=null,b=U}}}}function Ke(s,a){var l=a[wr];l===void 0&&(l=a[wr]=new Set);var h=s+"__bubble";l.has(h)||(Ev(a,s,2,!1),l.add(h))}function Og(s,a,l){var h=0;a&&(h|=4),Ev(l,s,h,a)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function jg(s){if(!s[Xh]){s[Xh]=!0,ka.forEach(function(l){l!=="selectionchange"&&(O2.has(l)||Og(l,!1,s),Og(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Xh]||(a[Xh]=!0,Og("selectionchange",!1,a))}}function Ev(s,a,l,h){switch(Wv(a)){case 2:var g=lR;break;case 8:g=cR;break;default:g=Xg}l=g.bind(null,a,l,s),g=void 0,!wi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(a,l,{capture:!0,passive:g}):s.addEventListener(a,l,!0):g!==void 0?s.addEventListener(a,l,{passive:g}):s.addEventListener(a,l,!1)}function Lg(s,a,l,h,g){var b=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var N=h.stateNode.containerInfo;if(N===g)break;if(S===4)for(S=h.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;N!==null;){if(S=Sn(N),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){h=b=S;continue e}N=N.parentNode}}h=h.return}Zu(function(){var J=b,ce=xi(l),fe=[];e:{var ne=sb.get(s);if(ne!==void 0){var ie=Co,Le=s;switch(s){case"keypress":if(is(l)===0)break e;case"keydown":case"keyup":ie=jo;break;case"focusin":Le="focus",ie=Mo;break;case"focusout":Le="blur",ie=Mo;break;case"beforeblur":case"afterblur":ie=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=cm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ah;break;case eb:case tb:case nb:ie=Po;break;case ib:ie=lh;break;case"scroll":case"scrollend":ie=Ju;break;case"wheel":ie=Lo;break;case"copy":case"cut":case"paste":ie=Oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=tc;break;case"toggle":case"beforetoggle":ie=uh}var Me=(a&4)!==0,St=!Me&&(s==="scroll"||s==="scrollend"),K=Me?ne!==null?ne+"Capture":null:ne;Me=[];for(var q=J,Q;q!==null;){var he=q;if(Q=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Q===null||K===null||(he=Ma(q,K),he!=null&&Me.push(Dc(q,he,Q))),St)break;q=q.return}0<Me.length&&(ne=new ie(ne,Le,null,l,ce),fe.push({event:ne,listeners:Me}))}}if((a&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",ne&&l!==js&&(Le=l.relatedTarget||l.fromElement)&&(Sn(Le)||Le[En]))break e;if((ie||ne)&&(ne=ce.window===ce?ce:(ne=ce.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(Le=l.relatedTarget||l.toElement,ie=J,Le=Le?Sn(Le):null,Le!==null&&(St=o(Le),Me=Le.tag,Le!==St||Me!==5&&Me!==27&&Me!==6)&&(Le=null)):(ie=null,Le=J),ie!==Le)){if(Me=Ei,he="onMouseLeave",K="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Me=tc,he="onPointerLeave",K="onPointerEnter",q="pointer"),St=ie==null?ne:qt(ie),Q=Le==null?ne:qt(Le),ne=new Me(he,q+"leave",ie,l,ce),ne.target=St,ne.relatedTarget=Q,he=null,Sn(ce)===J&&(Me=new Me(K,q+"enter",Le,l,ce),Me.target=Q,Me.relatedTarget=St,he=Me),St=he,ie&&Le)t:{for(Me=ie,K=Le,q=0,Q=Me;Q;Q=ll(Q))q++;for(Q=0,he=K;he;he=ll(he))Q++;for(;0<q-Q;)Me=ll(Me),q--;for(;0<Q-q;)K=ll(K),Q--;for(;q--;){if(Me===K||K!==null&&Me===K.alternate)break t;Me=ll(Me),K=ll(K)}Me=null}else Me=null;ie!==null&&Sv(fe,ne,ie,Me,!1),Le!==null&&St!==null&&Sv(fe,St,Le,Me,!0)}}e:{if(ne=J?qt(J):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var Te=H0;else if(en(ne))if(q0)Te=YA;else{Te=$A;var We=GA}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?J&&Yl(J.elementType)&&(Te=H0):Te=WA;if(Te&&(Te=Te(s,J))){zs(fe,Te,l,ce);break e}We&&We(s,ne,J),s==="focusout"&&J&&ne.type==="number"&&J.memoizedProps.value!=null&&Tr(ne,"number",ne.value)}switch(We=J?qt(J):window,s){case"focusin":(en(We)||We.contentEditable==="true")&&(Vo=We,mm=J,sc=null);break;case"focusout":sc=mm=Vo=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,Z0(fe,l,ce);break;case"selectionchange":if(XA)break;case"keydown":case"keyup":Z0(fe,l,ce)}var Ne;if(as)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else tt?re(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(E&&l.locale!=="ko"&&(tt||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&tt&&(Ne=Xl()):(ns=ce,Ar="value"in ns?ns.value:ns.textContent,tt=!0)),We=Qh(J,Pe),0<We.length&&(Pe=new Jl(Pe,s,null,l,ce),fe.push({event:Pe,listeners:We}),Ne?Pe.data=Ne:(Ne=ve(l),Ne!==null&&(Pe.data=Ne)))),(Ne=v?Jt(s,l):nt(s,l))&&(Pe=Qh(J,"onBeforeInput"),0<Pe.length&&(We=new Jl("onBeforeInput","beforeinput",null,l,ce),fe.push({event:We,listeners:Pe}),We.data=Ne)),D2(fe,s,J,l,ce)}wv(fe,a)})}function Dc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Qh(s,a){for(var l=a+"Capture",h=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Ma(s,l),g!=null&&h.unshift(Dc(s,g,b)),g=Ma(s,a),g!=null&&h.push(Dc(s,g,b))),s.tag===3)return h;s=s.return}return[]}function ll(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Sv(s,a,l,h,g){for(var b=a._reactName,S=[];l!==null&&l!==h;){var N=l,U=N.alternate,J=N.stateNode;if(N=N.tag,U!==null&&U===h)break;N!==5&&N!==26&&N!==27||J===null||(U=J,g?(J=Ma(l,b),J!=null&&S.unshift(Dc(l,J,U))):g||(J=Ma(l,b),J!=null&&S.push(Dc(l,J,U)))),l=l.return}S.length!==0&&s.push({event:a,listeners:S})}var j2=/\r\n?/g,L2=/\u0000|\uFFFD/g;function Tv(s){return(typeof s=="string"?s:""+s).replace(j2,`
`).replace(L2,"")}function Av(s,a){return a=Tv(a),Tv(s)===a}function Zh(){}function Et(s,a,l,h,g,b){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||vi(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&vi(s,""+h);break;case"className":Dt(s,"class",h);break;case"tabIndex":Dt(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Dt(s,l,h);break;case"style":Wl(s,h,b);break;case"data":if(a!=="object"){Dt(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=ko(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&Et(s,a,"name",g.name,g,null),Et(s,a,"formEncType",g.formEncType,g,null),Et(s,a,"formMethod",g.formMethod,g,null),Et(s,a,"formTarget",g.formTarget,g,null)):(Et(s,a,"encType",g.encType,g,null),Et(s,a,"method",g.method,g,null),Et(s,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=ko(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=Zh);break;case"onScroll":h!=null&&Ke("scroll",s);break;case"onScrollEnd":h!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=ko(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),Ui(s,"popover",h);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ui(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=om.get(l)||l,Ui(s,l,h))}}function Vg(s,a,l,h,g,b){switch(l){case"style":Wl(s,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof h=="string"?vi(s,h):(typeof h=="number"||typeof h=="bigint")&&vi(s,""+h);break;case"onScroll":h!=null&&Ke("scroll",s);break;case"onScrollEnd":h!=null&&Ke("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Zh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ji.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),b=s[vt]||null,b=b!=null?b[l]:null,typeof b=="function"&&s.removeEventListener(a,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,g);break e}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Ui(s,l,h)}}}function _n(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var h=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Et(s,a,b,S,l,null)}}g&&Et(s,a,"srcSet",l.srcSet,l,null),h&&Et(s,a,"src",l.src,l,null);return;case"input":Ke("invalid",s);var N=b=S=g=null,U=null,J=null;for(h in l)if(l.hasOwnProperty(h)){var ce=l[h];if(ce!=null)switch(h){case"name":g=ce;break;case"type":S=ce;break;case"checked":U=ce;break;case"defaultChecked":J=ce;break;case"value":b=ce;break;case"defaultValue":N=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,a));break;default:Et(s,a,h,ce,l,null)}}Ca(s,b,N,U,J,S,g,!1),Ie(s);return;case"select":Ke("invalid",s),h=S=b=null;for(g in l)if(l.hasOwnProperty(g)&&(N=l[g],N!=null))switch(g){case"value":b=N;break;case"defaultValue":S=N;break;case"multiple":h=N;default:Et(s,a,g,N,l,null)}a=b,l=S,s.multiple=!!h,a!=null?Os(s,!!h,a,!1):l!=null&&Os(s,!!h,l,!0);return;case"textarea":Ke("invalid",s),b=g=h=null;for(S in l)if(l.hasOwnProperty(S)&&(N=l[S],N!=null))switch(S){case"value":h=N;break;case"defaultValue":g=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Et(s,a,S,N,l,null)}Ia(s,h,g,b),Ie(s);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(h=l[U],h!=null))switch(U){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Et(s,a,U,h,l,null)}return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(h=0;h<Ic.length;h++)Ke(Ic[h],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(h=l[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Et(s,a,J,h,l,null)}return;default:if(Yl(a)){for(ce in l)l.hasOwnProperty(ce)&&(h=l[ce],h!==void 0&&Vg(s,a,ce,h,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(h=l[N],h!=null&&Et(s,a,N,h,l,null))}function V2(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,S=null,N=null,U=null,J=null,ce=null;for(ie in l){var fe=l[ie];if(l.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=fe;default:h.hasOwnProperty(ie)||Et(s,a,ie,null,h,fe)}}for(var ne in h){var ie=h[ne];if(fe=l[ne],h.hasOwnProperty(ne)&&(ie!=null||fe!=null))switch(ne){case"type":b=ie;break;case"name":g=ie;break;case"checked":J=ie;break;case"defaultChecked":ce=ie;break;case"value":S=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==fe&&Et(s,a,ne,ie,h,fe)}}ri(s,S,N,U,J,ce,b,g);return;case"select":ie=S=N=ne=null;for(b in l)if(U=l[b],l.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":ie=U;default:h.hasOwnProperty(b)||Et(s,a,b,null,h,U)}for(g in h)if(b=h[g],U=l[g],h.hasOwnProperty(g)&&(b!=null||U!=null))switch(g){case"value":ne=b;break;case"defaultValue":N=b;break;case"multiple":S=b;default:b!==U&&Et(s,a,g,b,h,U)}a=N,l=S,h=ie,ne!=null?Os(s,!!l,ne,!1):!!h!=!!l&&(a!=null?Os(s,!!l,a,!0):Os(s,!!l,l?[]:"",!1));return;case"textarea":ie=ne=null;for(N in l)if(g=l[N],l.hasOwnProperty(N)&&g!=null&&!h.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Et(s,a,N,null,h,g)}for(S in h)if(g=h[S],b=l[S],h.hasOwnProperty(S)&&(g!=null||b!=null))switch(S){case"value":ne=g;break;case"defaultValue":ie=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&Et(s,a,S,g,h,b)}xt(s,ne,ie);return;case"option":for(var Le in l)if(ne=l[Le],l.hasOwnProperty(Le)&&ne!=null&&!h.hasOwnProperty(Le))switch(Le){case"selected":s.selected=!1;break;default:Et(s,a,Le,null,h,ne)}for(U in h)if(ne=h[U],ie=l[U],h.hasOwnProperty(U)&&ne!==ie&&(ne!=null||ie!=null))switch(U){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Et(s,a,U,ne,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)ne=l[Me],l.hasOwnProperty(Me)&&ne!=null&&!h.hasOwnProperty(Me)&&Et(s,a,Me,null,h,ne);for(J in h)if(ne=h[J],ie=l[J],h.hasOwnProperty(J)&&ne!==ie&&(ne!=null||ie!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:Et(s,a,J,ne,h,ie)}return;default:if(Yl(a)){for(var St in l)ne=l[St],l.hasOwnProperty(St)&&ne!==void 0&&!h.hasOwnProperty(St)&&Vg(s,a,St,void 0,h,ne);for(ce in h)ne=h[ce],ie=l[ce],!h.hasOwnProperty(ce)||ne===ie||ne===void 0&&ie===void 0||Vg(s,a,ce,ne,h,ie);return}}for(var K in l)ne=l[K],l.hasOwnProperty(K)&&ne!=null&&!h.hasOwnProperty(K)&&Et(s,a,K,null,h,ne);for(fe in h)ne=h[fe],ie=l[fe],!h.hasOwnProperty(fe)||ne===ie||ne==null&&ie==null||Et(s,a,fe,ne,h,ie)}var Ug=null,Fg=null;function Jh(s){return s.nodeType===9?s:s.ownerDocument}function Rv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function zg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bg=null;function U2(){var s=window.event;return s&&s.type==="popstate"?s===Bg?!1:(Bg=s,!0):(Bg=null,!1)}var kv=typeof setTimeout=="function"?setTimeout:void 0,F2=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,z2=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(s){return Cv.resolve(null).then(s).catch(B2)}:kv;function B2(s){setTimeout(function(){throw s})}function Br(s){return s==="head"}function Iv(s,a){var l=a,h=0,g=0;do{var b=l.nextSibling;if(s.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"){if(0<h&&8>h){l=h;var S=s.ownerDocument;if(l&1&&Mc(S.documentElement),l&2&&Mc(S.body),l&4)for(l=S.head,Mc(l),S=l.firstChild;S;){var N=S.nextSibling,U=S.nodeName;S[jn]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=N}}if(g===0){s.removeChild(b),zc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=b}while(l);zc(a)}function Hg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Hg(l),_i(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function H2(s,a,l,h){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[jn])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Hi(s.nextSibling),s===null)break}return null}function q2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Hi(s.nextSibling),s===null))return null;return s}function qg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function G2(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Hi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Gg=null;function Dv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function Mv(s,a,l){switch(a=Jh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Mc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);_i(s)}var Ci=new Map,Pv=new Set;function ed(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var er=ee.d;ee.d={f:$2,r:W2,D:Y2,C:K2,L:X2,m:Q2,X:J2,S:Z2,M:eR};function $2(){var s=er.f(),a=Gh();return s||a}function W2(s){var a=Ln(s);a!==null&&a.tag===5&&a.type==="form"?e_(a):er.r(s)}var cl=typeof document>"u"?null:document;function Ov(s,a,l){var h=cl;if(h&&typeof a=="string"&&a){var g=Se(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Pv.has(g)||(Pv.add(g),s={rel:s,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),_n(a,"link",s),ut(a),h.head.appendChild(a)))}}function Y2(s){er.D(s),Ov("dns-prefetch",s,null)}function K2(s,a){er.C(s,a),Ov("preconnect",s,a)}function X2(s,a,l){er.L(s,a,l);var h=cl;if(h&&s&&a){var g='link[rel="preload"][as="'+Se(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Se(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Se(l.imageSizes)+'"]')):g+='[href="'+Se(s)+'"]';var b=g;switch(a){case"style":b=ul(s);break;case"script":b=hl(s)}Ci.has(b)||(s=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Ci.set(b,s),h.querySelector(g)!==null||a==="style"&&h.querySelector(Pc(b))||a==="script"&&h.querySelector(Oc(b))||(a=h.createElement("link"),_n(a,"link",s),ut(a),h.head.appendChild(a)))}}function Q2(s,a){er.m(s,a);var l=cl;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Se(h)+'"][href="'+Se(s)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=hl(s)}if(!Ci.has(b)&&(s=y({rel:"modulepreload",href:s},a),Ci.set(b,s),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Oc(b)))return}h=l.createElement("link"),_n(h,"link",s),ut(h),l.head.appendChild(h)}}}function Z2(s,a,l){er.S(s,a,l);var h=cl;if(h&&s){var g=ln(h).hoistableStyles,b=ul(s);a=a||"default";var S=g.get(b);if(!S){var N={loading:0,preload:null};if(S=h.querySelector(Pc(b)))N.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Ci.get(b))&&$g(s,l);var U=S=h.createElement("link");ut(U),_n(U,"link",s),U._p=new Promise(function(J,ce){U.onload=J,U.onerror=ce}),U.addEventListener("load",function(){N.loading|=1}),U.addEventListener("error",function(){N.loading|=2}),N.loading|=4,td(S,a,h)}S={type:"stylesheet",instance:S,count:1,state:N},g.set(b,S)}}}function J2(s,a){er.X(s,a);var l=cl;if(l&&s){var h=ln(l).hoistableScripts,g=hl(s),b=h.get(g);b||(b=l.querySelector(Oc(g)),b||(s=y({src:s,async:!0},a),(a=Ci.get(g))&&Wg(s,a),b=l.createElement("script"),ut(b),_n(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function eR(s,a){er.M(s,a);var l=cl;if(l&&s){var h=ln(l).hoistableScripts,g=hl(s),b=h.get(g);b||(b=l.querySelector(Oc(g)),b||(s=y({src:s,async:!0,type:"module"},a),(a=Ci.get(g))&&Wg(s,a),b=l.createElement("script"),ut(b),_n(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function jv(s,a,l,h){var g=(g=_e.current)?ed(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ul(l.href),l=ln(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ul(l.href);var b=ln(g).hoistableStyles,S=b.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,S),(b=g.querySelector(Pc(s)))&&!b._p&&(S.instance=b,S.state.loading=5),Ci.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ci.set(s,l),b||tR(g,s,l,S.state))),a&&h===null)throw Error(i(528,""));return S}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=hl(l),l=ln(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ul(s){return'href="'+Se(s)+'"'}function Pc(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function tR(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),_n(a,"link",l),ut(a),s.head.appendChild(a))}function hl(s){return'[src="'+Se(s)+'"]'}function Oc(s){return"script[async]"+s}function Vv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Se(l.href)+'"]');if(h)return a.instance=h,ut(h),h;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),ut(h),_n(h,"style",g),td(h,l.precedence,s),a.instance=h;case"stylesheet":g=ul(l.href);var b=s.querySelector(Pc(g));if(b)return a.state.loading|=4,a.instance=b,ut(b),b;h=Lv(l),(g=Ci.get(g))&&$g(h,g),b=(s.ownerDocument||s).createElement("link"),ut(b);var S=b;return S._p=new Promise(function(N,U){S.onload=N,S.onerror=U}),_n(b,"link",h),a.state.loading|=4,td(b,l.precedence,s),a.instance=b;case"script":return b=hl(l.src),(g=s.querySelector(Oc(b)))?(a.instance=g,ut(g),g):(h=l,(g=Ci.get(b))&&(h=y({},l),Wg(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),ut(g),_n(g,"link",h),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,td(h,l.precedence,s));return a.instance}function td(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,S=0;S<h.length;S++){var N=h[S];if(N.dataset.precedence===a)b=N;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function $g(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Wg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var nd=null;function Uv(s,a,l){if(nd===null){var h=new Map,g=nd=new Map;g.set(l,h)}else g=nd,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var b=l[g];if(!(b[jn]||b[mt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(a)||"";S=s+S;var N=h.get(S);N?N.push(b):h.set(S,[b])}}return h}function Fv(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function nR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var jc=null;function iR(){}function sR(s,a,l){if(jc===null)throw Error(i(475));var h=jc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=ul(l.href),b=s.querySelector(Pc(g));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=id.bind(h),s.then(h,h)),a.state.loading|=4,a.instance=b,ut(b);return}b=s.ownerDocument||s,l=Lv(l),(g=Ci.get(g))&&$g(l,g),b=b.createElement("link"),ut(b);var S=b;S._p=new Promise(function(N,U){S.onload=N,S.onerror=U}),_n(b,"link",l),a.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=id.bind(h),s.addEventListener("load",a),s.addEventListener("error",a))}}function rR(){if(jc===null)throw Error(i(475));var s=jc;return s.stylesheets&&s.count===0&&Yg(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&Yg(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function id(){if(this.count--,this.count===0){if(this.stylesheets)Yg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var sd=null;function Yg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,sd=new Map,a.forEach(aR,s),sd=null,id.call(s))}function aR(s,a){if(!(a.state.loading&4)){var l=sd.get(s);if(l)var h=l.get(null);else{l=new Map,sd.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var S=g[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),h=S)}h&&l.set(null,h)}g=a.instance,S=g.getAttribute("data-precedence"),b=l.get(S)||h,b===h&&l.set(null,g),l.set(S,g),this.count++,h=id.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var Lc={$$typeof:W,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function oR(s,a,l,h,g,b,S,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.hiddenUpdates=Vi(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Bv(s,a,l,h,g,b,S,N,U,J,ce,fe){return s=new oR(s,a,l,S,N,U,J,fe),a=1,b===!0&&(a|=24),b=oi(3,null,null,a),s.current=b,b.stateNode=s,a=km(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:h,isDehydrated:l,cache:a},Mm(b),s}function Hv(s){return s?(s=Bo,s):Bo}function qv(s,a,l,h,g,b){g=Hv(g),h.context===null?h.context=g:h.pendingContext=g,h=kr(a),h.payload={element:l},b=b===void 0?null:b,b!==null&&(h.callback=b),l=Cr(s,h,a),l!==null&&(di(l,s,a),fc(l,s,a))}function Gv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Kg(s,a){Gv(s,a),(s=s.alternate)&&Gv(s,a)}function $v(s){if(s.tag===13){var a=zo(s,67108864);a!==null&&di(a,s,67108864),Kg(s,67108864)}}var rd=!0;function lR(s,a,l,h){var g=F.T;F.T=null;var b=ee.p;try{ee.p=2,Xg(s,a,l,h)}finally{ee.p=b,F.T=g}}function cR(s,a,l,h){var g=F.T;F.T=null;var b=ee.p;try{ee.p=8,Xg(s,a,l,h)}finally{ee.p=b,F.T=g}}function Xg(s,a,l,h){if(rd){var g=Qg(h);if(g===null)Lg(s,a,h,ad,l),Yv(s,h);else if(hR(g,s,a,l,h))h.stopPropagation();else if(Yv(s,h),a&4&&-1<uR.indexOf(s)){for(;g!==null;){var b=Ln(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=ni(b.pendingLanes);if(S!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var U=1<<31-Zt(S);N.entanglements[1]|=U,S&=~U}ds(b),(gt&6)===0&&(Hh=zn()+500,Cc(0))}}break;case 13:N=zo(b,2),N!==null&&di(N,b,2),Gh(),Kg(b,2)}if(b=Qg(h),b===null&&Lg(s,a,h,ad,l),b===g)break;g=b}g!==null&&h.stopPropagation()}else Lg(s,a,h,null,l)}}function Qg(s){return s=xi(s),Zg(s)}var ad=null;function Zg(s){if(ad=null,s=Sn(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return ad=s,null}function Wv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ao()){case wa:return 2;case Li:return 8;case ei:case _r:return 32;case Bn:return 268435456;default:return 32}default:return 32}}var Jg=!1,Hr=null,qr=null,Gr=null,Vc=new Map,Uc=new Map,$r=[],uR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yv(s,a){switch(s){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(a.pointerId)}}function Fc(s,a,l,h,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},a!==null&&(a=Ln(a),a!==null&&$v(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function hR(s,a,l,h,g){switch(a){case"focusin":return Hr=Fc(Hr,s,a,l,h,g),!0;case"dragenter":return qr=Fc(qr,s,a,l,h,g),!0;case"mouseover":return Gr=Fc(Gr,s,a,l,h,g),!0;case"pointerover":var b=g.pointerId;return Vc.set(b,Fc(Vc.get(b)||null,s,a,l,h,g)),!0;case"gotpointercapture":return b=g.pointerId,Uc.set(b,Fc(Uc.get(b)||null,s,a,l,h,g)),!0}return!1}function Kv(s){var a=Sn(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Na(s.priority,function(){if(l.tag===13){var h=hi();h=Zi(h);var g=zo(l,h);g!==null&&di(g,l,h),Kg(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function od(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Qg(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);js=h,l.target.dispatchEvent(h),js=null}else return a=Ln(l),a!==null&&$v(a),s.blockedOn=l,!1;a.shift()}return!0}function Xv(s,a,l){od(s)&&l.delete(a)}function dR(){Jg=!1,Hr!==null&&od(Hr)&&(Hr=null),qr!==null&&od(qr)&&(qr=null),Gr!==null&&od(Gr)&&(Gr=null),Vc.forEach(Xv),Uc.forEach(Xv)}function ld(s,a){s.blockedOn===a&&(s.blockedOn=null,Jg||(Jg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dR)))}var cd=null;function Qv(s){cd!==s&&(cd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cd===s&&(cd=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],g=s[a+2];if(typeof h!="function"){if(Zg(h||l)===null)continue;break}var b=Ln(l);b!==null&&(s.splice(a,3),a-=3,Zm(b,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function zc(s){function a(U){return ld(U,s)}Hr!==null&&ld(Hr,s),qr!==null&&ld(qr,s),Gr!==null&&ld(Gr,s),Vc.forEach(a),Uc.forEach(a);for(var l=0;l<$r.length;l++){var h=$r[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<$r.length&&(l=$r[0],l.blockedOn===null);)Kv(l),l.blockedOn===null&&$r.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],b=l[h+1],S=g[vt]||null;if(typeof b=="function")S||Qv(l);else if(S){var N=null;if(b&&b.hasAttribute("formAction")){if(g=b,S=b[vt]||null)N=S.formAction;else if(Zg(g)!==null)continue}else N=S.action;typeof N=="function"?l[h+1]=N:(l.splice(h,3),h-=3),Qv(l)}}}function ep(s){this._internalRoot=s}ud.prototype.render=ep.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,h=hi();qv(l,h,s,a,null,null)},ud.prototype.unmount=ep.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qv(s.current,2,null,s,null,null),Gh(),a[En]=null}};function ud(s){this._internalRoot=s}ud.prototype.unstable_scheduleHydration=function(s){if(s){var a=ii();s={blockedOn:null,target:s,priority:a};for(var l=0;l<$r.length&&a!==0&&a<$r[l].priority;l++);$r.splice(l,0,s),l===0&&Kv(s)}};var Zv=e.version;if(Zv!=="19.1.1")throw Error(i(527,Zv,"19.1.1"));ee.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var fR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Nt=hd.inject(fR),rt=hd}catch{}}return Hc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,h="",g=m_,b=g_,S=p_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks)),a=Bv(s,1,!1,null,null,l,h,g,b,S,N,null),s[En]=a.current,jg(s),new ep(a)},Hc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var h=!1,g="",b=m_,S=g_,N=p_,U=null,J=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(U=l.unstable_transitionCallbacks),l.formState!==void 0&&(J=l.formState)),a=Bv(s,1,!0,a,l??null,h,g,b,S,N,U,J),a.context=Hv(null),l=a.current,h=hi(),h=Zi(h),g=kr(h),g.callback=null,Cr(l,g,h),l=h,a.current.lanes=l,pi(a,l),ds(a),s[En]=a.current,jg(s),new ud(a)},Hc.version="19.1.1",Hc}var lx;function ER(){if(lx)return ip.exports;lx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=wR(),ip.exports}var SR=ER();const TR=fE(SR);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cx="popstate";function AR(n={}){function e(i,r){let{pathname:o,search:c,hash:u}=i.location;return jp("",{pathname:o,search:c,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:mu(r)}return NR(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ts(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RR(){return Math.random().toString(36).substring(2,10)}function ux(n,e){return{usr:n.state,key:n.key,idx:e}}function jp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:t,key:e&&e.key||i||RR()}}function mu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ll(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function NR(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,c=r.history,u="POP",d=null,f=y();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function y(){return(c.state||{idx:null}).idx}function _(){u="POP";let R=y(),j=R==null?null:R-f;f=R,d&&d({action:u,location:k.location,delta:j})}function x(R,j){u="PUSH";let B=jp(k.location,R,j);f=y()+1;let W=ux(B,f),Z=k.createHref(B);try{c.pushState(W,"",Z)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;r.location.assign(Z)}o&&d&&d({action:u,location:k.location,delta:1})}function w(R,j){u="REPLACE";let B=jp(k.location,R,j);f=y();let W=ux(B,f),Z=k.createHref(B);c.replaceState(W,"",Z),o&&d&&d({action:u,location:k.location,delta:0})}function A(R){return kR(R)}let k={get action(){return u},get location(){return n(r,c)},listen(R){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(cx,_),d=R,()=>{r.removeEventListener(cx,_),d=null}},createHref(R){return e(r,R)},createURL:A,encodeLocation(R){let j=A(R);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:w,go(R){return c.go(R)}};return k}function kR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:mu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function mE(n,e,t="/"){return CR(n,e,t,!1)}function CR(n,e,t,i){let r=typeof e=="string"?Ll(e):e,o=cr(r.pathname||"/",t);if(o==null)return null;let c=gE(n);IR(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=BR(o);u=FR(c[d],f,i)}return u}function gE(n,e=[],t=[],i="",r=!1){let o=(c,u,d=r,f)=>{let y={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&d)return;Ot(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let _=lr([i,y.relativePath]),x=t.concat(y);c.children&&c.children.length>0&&(Ot(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),gE(c.children,e,x,_,d)),!(c.path==null&&!c.index)&&e.push({path:_,score:VR(_,c.index),routesMeta:x})};return n.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of pE(c.path))o(c,u,!0,d)}),e}function pE(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let c=pE(i.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...c),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function IR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:UR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var DR=/^:[\w-]+$/,MR=3,PR=2,OR=1,jR=10,LR=-2,hx=n=>n==="*";function VR(n,e){let t=n.split("/"),i=t.length;return t.some(hx)&&(i+=LR),e&&(i+=PR),t.filter(r=>!hx(r)).reduce((r,o)=>r+(DR.test(o)?MR:o===""?OR:jR),i)}function UR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function FR(n,e,t=!1){let{routesMeta:i}=n,r={},o="/",c=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",_=Jd({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},y),x=d.route;if(!_&&f&&t&&!i[i.length-1].route.index&&(_=Jd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:lr([o,_.pathname]),pathnameBase:$R(lr([o,_.pathnameBase])),route:x}),_.pathnameBase!=="/"&&(o=lr([o,_.pathnameBase]))}return c}function Jd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=zR(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,{paramName:y,isOptional:_},x)=>{if(y==="*"){let A=u[x]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=u[x];return _&&!w?f[y]=void 0:f[y]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:n}}function zR(n,e=!1,t=!0){Ts(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function BR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ts(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function HR(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Ll(n):n;return{pathname:t?t.startsWith("/")?t:qR(t,e):e,search:WR(i),hash:YR(r)}}function qR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function op(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yE(n){let e=GR(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function bE(n,e,t,i=!1){let r;typeof n=="string"?r=Ll(n):(r={...n},Ot(!r.pathname||!r.pathname.includes("?"),op("?","pathname","search",r)),Ot(!r.pathname||!r.pathname.includes("#"),op("#","pathname","hash",r)),Ot(!r.search||!r.search.includes("#"),op("#","search","hash",r)));let o=n===""||r.pathname==="",c=o?"/":r.pathname,u;if(c==null)u=t;else{let _=e.length-1;if(!i&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),_-=1;r.pathname=x.join("/")}u=_>=0?e[_]:"/"}let d=HR(r,u),f=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||y)&&(d.pathname+="/"),d}var lr=n=>n.join("/").replace(/\/\/+/g,"/"),$R=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),WR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function KR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var _E=["POST","PUT","PATCH","DELETE"];new Set(_E);var XR=["GET",..._E];new Set(XR);var Vl=H.createContext(null);Vl.displayName="DataRouter";var Cf=H.createContext(null);Cf.displayName="DataRouterState";H.createContext(!1);var vE=H.createContext({isTransitioning:!1});vE.displayName="ViewTransition";var QR=H.createContext(new Map);QR.displayName="Fetchers";var ZR=H.createContext(null);ZR.displayName="Await";var Ns=H.createContext(null);Ns.displayName="Navigation";var Mu=H.createContext(null);Mu.displayName="Location";var gr=H.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var xy=H.createContext(null);xy.displayName="RouteError";function JR(n,{relative:e}={}){Ot(Pu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(Ns),{hash:r,pathname:o,search:c}=Ou(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:lr([t,o])),i.createHref({pathname:u,search:c,hash:r})}function Pu(){return H.useContext(Mu)!=null}function _a(){return Ot(Pu(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Mu).location}var xE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wE(n){H.useContext(Ns).static||H.useLayoutEffect(n)}function eN(){let{isDataRoute:n}=H.useContext(gr);return n?fN():tN()}function tN(){Ot(Pu(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(Vl),{basename:e,navigator:t}=H.useContext(Ns),{matches:i}=H.useContext(gr),{pathname:r}=_a(),o=JSON.stringify(yE(i)),c=H.useRef(!1);return wE(()=>{c.current=!0}),H.useCallback((d,f={})=>{if(Ts(c.current,xE),!c.current)return;if(typeof d=="number"){t.go(d);return}let y=bE(d,JSON.parse(o),r,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:lr([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,o,r,n])}H.createContext(null);function Ou(n,{relative:e}={}){let{matches:t}=H.useContext(gr),{pathname:i}=_a(),r=JSON.stringify(yE(t));return H.useMemo(()=>bE(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function nN(n,e){return EE(n,e)}function EE(n,e,t,i,r){Ot(Pu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=H.useContext(Ns),{matches:c}=H.useContext(gr),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",y=u?u.pathnameBase:"/",_=u&&u.route;{let B=_&&_.path||"";SE(f,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let x=_a(),w;if(e){let B=typeof e=="string"?Ll(e):e;Ot(y==="/"||B.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=x;let A=w.pathname||"/",k=A;if(y!=="/"){let B=y.replace(/^\//,"").split("/");k="/"+A.replace(/^\//,"").split("/").slice(B.length).join("/")}let R=mE(n,{pathname:k});Ts(_||R!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ts(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=oN(R&&R.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:lr([y,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:lr([y,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),c,t,i,r);return e&&j?H.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},j):j}function iN(){let n=dN(),e=KR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:o},"ErrorBoundary")," or"," ",H.createElement("code",{style:o},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,c)}var sN=H.createElement(iN,null),rN=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?H.createElement(gr.Provider,{value:this.props.routeContext},H.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aN({routeContext:n,match:e,children:t}){let i=H.useContext(Vl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(gr.Provider,{value:n},t)}function oN(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let f=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Ot(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<o.length;f++){let y=o[f];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=f),y.route.id){let{loaderData:_,errors:x}=t,w=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!x||x[y.route.id]===void 0);if(y.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,y,_)=>{let x,w=!1,A=null,k=null;t&&(x=c&&y.route.id?c[y.route.id]:void 0,A=y.route.errorElement||sN,u&&(d<0&&_===0?(SE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,k=null):d===_&&(w=!0,k=y.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,_+1)),j=()=>{let B;return x?B=A:w?B=k:y.route.Component?B=H.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=f,H.createElement(aN,{match:y,routeContext:{outlet:f,matches:R,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?H.createElement(rN,{location:t.location,revalidation:t.revalidation,component:A,error:x,children:j(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:i}):j()},null)}function wy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lN(n){let e=H.useContext(Vl);return Ot(e,wy(n)),e}function cN(n){let e=H.useContext(Cf);return Ot(e,wy(n)),e}function uN(n){let e=H.useContext(gr);return Ot(e,wy(n)),e}function Ey(n){let e=uN(n),t=e.matches[e.matches.length-1];return Ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function hN(){return Ey("useRouteId")}function dN(){let n=H.useContext(xy),e=cN("useRouteError"),t=Ey("useRouteError");return n!==void 0?n:e.errors?.[t]}function fN(){let{router:n}=lN("useNavigate"),e=Ey("useNavigate"),t=H.useRef(!1);return wE(()=>{t.current=!0}),H.useCallback(async(r,o={})=>{Ts(t.current,xE),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...o}))},[n,e])}var dx={};function SE(n,e,t){!e&&!dx[n]&&(dx[n]=!0,Ts(!1,t))}H.memo(mN);function mN({routes:n,future:e,state:t,unstable_onError:i}){return EE(n,void 0,t,i,e)}function Qc(n){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:o=!1}){Ot(!Pu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=H.useMemo(()=>({basename:c,navigator:r,static:o,future:{}}),[c,r,o]);typeof t=="string"&&(t=Ll(t));let{pathname:d="/",search:f="",hash:y="",state:_=null,key:x="default"}=t,w=H.useMemo(()=>{let A=cr(d,c);return A==null?null:{location:{pathname:A,search:f,hash:y,state:_,key:x},navigationType:i}},[c,d,f,y,_,x,i]);return Ts(w!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:H.createElement(Ns.Provider,{value:u},H.createElement(Mu.Provider,{children:e,value:w}))}function pN({children:n,location:e}){return nN(Lp(n),e)}function Lp(n,e=[]){let t=[];return H.Children.forEach(n,(i,r)=>{if(!H.isValidElement(i))return;let o=[...e,r];if(i.type===H.Fragment){t.push.apply(t,Lp(i.props.children,o));return}Ot(i.type===Qc,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Lp(i.props.children,o)),t.push(c)}),t}var Ld="get",Vd="application/x-www-form-urlencoded";function If(n){return n!=null&&typeof n.tagName=="string"}function yN(n){return If(n)&&n.tagName.toLowerCase()==="button"}function bN(n){return If(n)&&n.tagName.toLowerCase()==="form"}function _N(n){return If(n)&&n.tagName.toLowerCase()==="input"}function vN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xN(n,e){return n.button===0&&(!e||e==="_self")&&!vN(n)}var dd=null;function wN(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}var EN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lp(n){return n!=null&&!EN.has(n)?(Ts(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vd}"`),null):n}function SN(n,e){let t,i,r,o,c;if(bN(n)){let u=n.getAttribute("action");i=u?cr(u,e):null,t=n.getAttribute("method")||Ld,r=lp(n.getAttribute("enctype"))||Vd,o=new FormData(n)}else if(yN(n)||_N(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?cr(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Ld,r=lp(n.getAttribute("formenctype"))||lp(u.getAttribute("enctype"))||Vd,o=new FormData(u,n),!wN()){let{name:f,type:y,value:_}=n;if(y==="image"){let x=f?`${f}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else f&&o.append(f,_)}}else{if(If(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ld,i=null,r=Vd,c=n}return o&&r==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TN(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&cr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function AN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function NN(n,e,t){let i=await Promise.all(n.map(async r=>{let o=e.routes[r.route.id];if(o){let c=await AN(o,t);return c.links?c.links():[]}return[]}));return DN(i.flat(1).filter(RN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function fx(n,e,t,i,r,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function kN(n,e,{includeHydrateFallback:t}={}){return CN(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function CN(n){return[...new Set(n)]}function IN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function DN(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let o=JSON.stringify(IN(r));return t.has(o)||(t.add(o),i.push({key:o,link:r})),i},[])}function TE(){let n=H.useContext(Vl);return Sy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function MN(){let n=H.useContext(Cf);return Sy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ty=H.createContext(void 0);Ty.displayName="FrameworkContext";function AE(){let n=H.useContext(Ty);return Sy(n,"You must render this element inside a <HydratedRouter> element"),n}function PN(n,e){let t=H.useContext(Ty),[i,r]=H.useState(!1),[o,c]=H.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:y,onTouchStart:_}=e,x=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let k=j=>{j.forEach(B=>{c(B.isIntersecting)})},R=new IntersectionObserver(k,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[n]),H.useEffect(()=>{if(i){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[i]);let w=()=>{r(!0)},A=()=>{r(!1),c(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:qc(u,w),onBlur:qc(d,A),onMouseEnter:qc(f,w),onMouseLeave:qc(y,A),onTouchStart:qc(_,w)}]:[!1,x,{}]}function qc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function ON({page:n,...e}){let{router:t}=TE(),i=H.useMemo(()=>mE(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?H.createElement(LN,{page:n,matches:i,...e}):null}function jN(n){let{manifest:e,routeModules:t}=AE(),[i,r]=H.useState([]);return H.useEffect(()=>{let o=!1;return NN(n,e,t).then(c=>{o||r(c)}),()=>{o=!0}},[n,e,t]),i}function LN({page:n,matches:e,...t}){let i=_a(),{manifest:r,routeModules:o}=AE(),{basename:c}=TE(),{loaderData:u,matches:d}=MN(),f=H.useMemo(()=>fx(n,e,d,r,i,"data"),[n,e,d,r,i]),y=H.useMemo(()=>fx(n,e,d,r,i,"assets"),[n,e,d,r,i]),_=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,k=!1;if(e.forEach(j=>{let B=r.routes[j.route.id];!B||!B.hasLoader||(!f.some(W=>W.route.id===j.route.id)&&j.route.id in u&&o[j.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:A.add(j.route.id))}),A.size===0)return[];let R=TN(n,c,"data");return k&&A.size>0&&R.searchParams.set("_routes",e.filter(j=>A.has(j.route.id)).map(j=>j.route.id).join(",")),[R.pathname+R.search]},[c,u,i,r,f,e,n,o]),x=H.useMemo(()=>kN(y,r),[y,r]),w=jN(y);return H.createElement(H.Fragment,null,_.map(A=>H.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),x.map(A=>H.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:k})=>H.createElement("link",{key:A,nonce:t.nonce,...k})))}function VN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var RE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RE&&(window.__reactRouterVersion="7.8.2")}catch{}function UN({basename:n,children:e,window:t}){let i=H.useRef();i.current==null&&(i.current=AR({window:t,v5Compat:!0}));let r=i.current,[o,c]=H.useState({action:r.action,location:r.location}),u=H.useCallback(d=>{H.startTransition(()=>c(d))},[c]);return H.useLayoutEffect(()=>r.listen(u),[r,u]),H.createElement(gN,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:r})}var NE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ef=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:y,viewTransition:_,...x},w){let{basename:A}=H.useContext(Ns),k=typeof f=="string"&&NE.test(f),R,j=!1;if(typeof f=="string"&&k&&(R=f,RE))try{let T=new URL(window.location.href),O=f.startsWith("//")?new URL(T.protocol+f):new URL(f),C=cr(O.pathname,A);O.origin===T.origin&&C!=null?f=C+O.search+O.hash:j=!0}catch{Ts(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=JR(f,{relative:r}),[W,Z,$]=PN(i,x),le=HN(f,{replace:c,state:u,target:d,preventScrollReset:y,relative:r,viewTransition:_});function P(T){e&&e(T),T.defaultPrevented||le(T)}let I=H.createElement("a",{...x,...$,href:R||B,onClick:j||o?e:P,ref:VN(w,Z),target:d,"data-discover":!k&&t==="render"?"true":void 0});return W&&!k?H.createElement(H.Fragment,null,I,H.createElement(ON,{page:B})):I});ef.displayName="Link";var FN=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:o,to:c,viewTransition:u,children:d,...f},y){let _=Ou(c,{relative:f.relative}),x=_a(),w=H.useContext(Cf),{navigator:A,basename:k}=H.useContext(Ns),R=w!=null&&YN(_)&&u===!0,j=A.encodeLocation?A.encodeLocation(_).pathname:_.pathname,B=x.pathname,W=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(B=B.toLowerCase(),W=W?W.toLowerCase():null,j=j.toLowerCase()),W&&k&&(W=cr(W,k)||W);const Z=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let $=B===j||!r&&B.startsWith(j)&&B.charAt(Z)==="/",le=W!=null&&(W===j||!r&&W.startsWith(j)&&W.charAt(j.length)==="/"),P={isActive:$,isPending:le,isTransitioning:R},I=$?e:void 0,T;typeof i=="function"?T=i(P):T=[i,$?"active":null,le?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(P):o;return H.createElement(ef,{...f,"aria-current":I,className:T,ref:y,style:O,to:c,viewTransition:u},typeof d=="function"?d(P):d)});FN.displayName="NavLink";var zN=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:o,method:c=Ld,action:u,onSubmit:d,relative:f,preventScrollReset:y,viewTransition:_,...x},w)=>{let A=$N(),k=WN(u,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&NE.test(u),B=W=>{if(d&&d(W),W.defaultPrevented)return;W.preventDefault();let Z=W.nativeEvent.submitter,$=Z?.getAttribute("formmethod")||c;A(Z||W.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:r,state:o,relative:f,preventScrollReset:y,viewTransition:_})};return H.createElement("form",{ref:w,method:R,action:k,onSubmit:i?d:B,...x,"data-discover":!j&&n==="render"?"true":void 0})});zN.displayName="Form";function BN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kE(n){let e=H.useContext(Vl);return Ot(e,BN(n)),e}function HN(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:o,viewTransition:c}={}){let u=eN(),d=_a(),f=Ou(n,{relative:o});return H.useCallback(y=>{if(xN(y,e)){y.preventDefault();let _=t!==void 0?t:mu(d)===mu(f);u(n,{replace:_,state:i,preventScrollReset:r,relative:o,viewTransition:c})}},[d,u,f,t,i,e,n,r,o,c])}var qN=0,GN=()=>`__${String(++qN)}__`;function $N(){let{router:n}=kE("useSubmit"),{basename:e}=H.useContext(Ns),t=hN();return H.useCallback(async(i,r={})=>{let{action:o,method:c,encType:u,formData:d,body:f}=SN(i,e);if(r.navigate===!1){let y=r.fetcherKey||GN();await n.fetch(y,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function WN(n,{relative:e}={}){let{basename:t}=H.useContext(Ns),i=H.useContext(gr);Ot(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...Ou(n||".",{relative:e})},c=_a();if(n==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(y=>y==="")){u.delete("index"),d.filter(_=>_).forEach(_=>u.append("index",_));let y=u.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:lr([t,o.pathname])),mu(o)}function YN(n,{relative:e}={}){let t=H.useContext(vE);Ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=kE("useViewTransitionState"),r=Ou(n,{relative:e});if(!t.isTransitioning)return!1;let o=cr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=cr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Jd(r.pathname,c)!=null||Jd(r.pathname,o)!=null}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),mx=n=>{const e=XN(n);return e.charAt(0).toUpperCase()+e.slice(1)},CE=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),QN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:c,...u},d)=>H.createElement("svg",{ref:d,...ZN,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:CE("lucide",r),...!o&&!QN(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,y])=>H.createElement(f,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=(n,e)=>{const t=H.forwardRef(({className:i,...r},o)=>H.createElement(JN,{ref:o,iconNode:e,className:CE(`lucide-${KN(mx(n))}`,`lucide-${n}`,i),...r}));return t.displayName=mx(n),t};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tk=pr("chart-column",ek);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ik=pr("house",nk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],rk=pr("image",sk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],IE=pr("palette",ak);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],lk=pr("rotate-cw",ok);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],uk=pr("trending-down",ck);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gx=pr("trending-up",hk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],fk=pr("trophy",dk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gk=pr("users",mk);function pk({isOpen:n,onSubmit:e,onCancel:t}){const[i,r]=H.useState(""),[o,c]=H.useState("");H.useEffect(()=>{n&&(r(""),c(""))},[n]);const u=f=>{if(f.preventDefault(),!i.trim()){c("Password is required");return}e(i)===!1&&c("Incorrect password")},d=()=>{r(""),c(""),t()};return n?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-96 mx-4 animate-slide-in",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-4xl mb-2",children:"🔒"}),p.jsx("h2",{className:"text-white text-xl font-bold",children:"Admin Access Required"}),p.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Enter admin password to continue"})]}),p.jsxs("form",{onSubmit:u,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("input",{type:"password",value:i,onChange:f=>{r(f.target.value),c("")},placeholder:"Enter admin password",className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",autoFocus:!0}),o&&p.jsx("p",{className:"text-red-400 text-sm mt-2",children:o})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:"Cancel"}),p.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:"Verify"})]})]})]})}):null}const yk="bagoftakis",DE=H.createContext(void 0);function bk({children:n}){const[e,t]=H.useState(()=>localStorage.getItem("isAdmin")==="true"),[i,r]=H.useState(!1),[o,c]=H.useState(null);function u(x){return x===yk?(localStorage.setItem("isAdmin","true"),t(!0),!0):!1}function d(){localStorage.removeItem("isAdmin"),t(!1)}function f(x){e?x():(c(()=>x),r(!0))}function y(x){return u(x)?(r(!1),o&&(o(),c(null)),!0):!1}function _(){r(!1),c(null)}return p.jsxs(DE.Provider,{value:{isAdmin:e,requireAdmin:f,logout:d},children:[n,p.jsx(pk,{isOpen:i,onSubmit:y,onCancel:_})]})}function Ay(){const n=H.useContext(DE);if(n===void 0)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return n}const Ud=()=>{const n=_a(),{isAdmin:e,logout:t}=Ay(),i=[{path:"/",label:"Home",icon:ik},{path:"/challenges",label:"Challenges",icon:IE},{path:"/wheels",label:"Wheels",icon:lk},{path:"/statistics",label:"Statistics",icon:tk}];return p.jsx("nav",{className:"bg-white/10 backdrop-blur-md border-b border-white/20",children:p.jsx("div",{className:"container mx-auto px-4",children:p.jsxs("div",{className:"flex items-center justify-between h-16",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs(ef,{to:"/",className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:p.jsx("img",{src:"/lgicon.png",alt:"LG Icon",className:"w-full h-full object-cover"})}),p.jsx("div",{className:"flex flex-col",children:p.jsx("span",{className:"text-yellow-300 font-bold text-xl",children:"LG Pokedex"})})]}),e&&p.jsxs("div",{className:"flex items-center space-x-2 bg-green-500/20 border border-green-500/30 rounded-lg px-3 py-1",children:[p.jsx("span",{className:"text-green-400 text-sm font-semibold",children:"Admin"}),p.jsx("button",{onClick:t,className:"text-green-400 hover:text-red-400 text-xs ml-1 opacity-70 hover:opacity-100 transition-colors",title:"Logout",children:"✕"})]})]}),p.jsx("div",{className:"flex space-x-1",children:i.map(({path:r,label:o,icon:c})=>p.jsxs(ef,{to:r,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${n.pathname===r?"bg-yellow-400 text-black":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:[p.jsx(c,{size:18}),p.jsx("span",{className:"hidden md:block",children:o})]},r))})]})})})},_k=()=>{};var px={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},vk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],c=n[t++],u=n[t++],d=((r&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],c=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,u=c?n[r+1]:0,d=r+2<n.length,f=d?n[r+2]:0,y=o>>2,_=(o&3)<<4|u>>4;let x=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(x=64)),i.push(t[y],t[_],t[x],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ME(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],u=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||u==null||f==null||_==null)throw new xk;const x=o<<2|u>>4;if(i.push(x),f!==64){const w=u<<4&240|f>>2;if(i.push(w),_!==64){const A=f<<6&192|_;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wk=function(n){const e=ME(n);return PE.encodeByteArray(e,!0)},tf=function(n){return wk(n).replace(/\./g,"")},OE=function(n){try{return PE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=()=>Ek().__FIREBASE_DEFAULTS__,Tk=()=>{if(typeof process>"u"||typeof px>"u")return;const n=px.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ak=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&OE(n[1]);return e&&JSON.parse(e)},Df=()=>{try{return _k()||Sk()||Tk()||Ak()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jE=n=>Df()?.emulatorHosts?.[n],LE=n=>{const e=jE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},VE=()=>Df()?.config,UE=n=>Df()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ry(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[tf(JSON.stringify(t)),tf(JSON.stringify(c)),""].join(".")}const su={};function Nk(){const n={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function kk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let yx=!1;function Ny(n,e){if(typeof window>"u"||typeof document>"u"||!vo(window.location.host)||su[n]===e||su[n]||yx)return;su[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",o=Nk().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{yx=!0,c()},x}function y(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=kk(i),w=t("text"),A=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),R=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),B=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const W=x.element;u(W),y(R,k);const Z=f();d(B,j),W.append(B,A,R,Z),document.body.appendChild(W)}o?(A.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ck(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function Ik(){const n=Df()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Pk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const n=Mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jk(){return!Ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lk(){try{return typeof indexedDB=="object"}catch{return!1}}function Vk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="FirebaseError";class ks extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Uk,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],c=o?Fk(o,i):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new ks(r,u,i)}}function Fk(n,e){return n.replace(zk,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const zk=/\{\$([^}]+)}/g;function Bk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ho(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],c=e[r];if(bx(o)&&bx(c)){if(!ho(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function bx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hk(n,e){const t=new qk(n,e);return t.subscribe.bind(t)}class qk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Gk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=cp),r.error===void 0&&(r.error=cp),r.complete===void 0&&(r.complete=cp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){return n&&n._delegate?n._delegate:n}class ua{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Rk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yk(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Wk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wk(n){return n===so?void 0:n}function Yk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $k(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const Xk={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Qk=Xe.INFO,Zk={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Jk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Zk[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=Jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const eC=(n,e)=>e.some(t=>n instanceof t);let _x,vx;function tC(){return _x||(_x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nC(){return vx||(vx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,Vp=new WeakMap,BE=new WeakMap,up=new WeakMap,Cy=new WeakMap;function iC(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(sa(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zE.set(t,n)}).catch(()=>{}),Cy.set(e,n),e}function sC(n){if(Vp.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Vp.set(n,e)}let Up={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rC(n){Up=n(Up)}function aC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(hp(this),e,...t);return BE.set(i,e.sort?e.sort():[e]),sa(i)}:nC().includes(n)?function(...e){return n.apply(hp(this),e),sa(zE.get(this))}:function(...e){return sa(n.apply(hp(this),e))}}function oC(n){return typeof n=="function"?aC(n):(n instanceof IDBTransaction&&sC(n),eC(n,tC())?new Proxy(n,Up):n)}function sa(n){if(n instanceof IDBRequest)return iC(n);if(up.has(n))return up.get(n);const e=oC(n);return e!==n&&(up.set(n,e),Cy.set(e,n)),e}const hp=n=>Cy.get(n);function lC(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,e),u=sa(c);return i&&c.addEventListener("upgradeneeded",d=>{i(sa(c.result),d.oldVersion,d.newVersion,sa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const cC=["get","getKey","getAll","getAllKeys","count"],uC=["put","add","delete","clear"],dp=new Map;function xx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dp.get(e))return dp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=uC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||cC.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),r&&d.done]))[0]};return dp.set(e,o),o}rC(n=>({...n,get:(e,t,i)=>xx(e,t)||n.get(e,t,i),has:(e,t)=>!!xx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dC(n){return n.getComponent()?.type==="VERSION"}const Fp="@firebase/app",wx="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new ky("@firebase/app"),fC="@firebase/app-compat",mC="@firebase/analytics-compat",gC="@firebase/analytics",pC="@firebase/app-check-compat",yC="@firebase/app-check",bC="@firebase/auth",_C="@firebase/auth-compat",vC="@firebase/database",xC="@firebase/data-connect",wC="@firebase/database-compat",EC="@firebase/functions",SC="@firebase/functions-compat",TC="@firebase/installations",AC="@firebase/installations-compat",RC="@firebase/messaging",NC="@firebase/messaging-compat",kC="@firebase/performance",CC="@firebase/performance-compat",IC="@firebase/remote-config",DC="@firebase/remote-config-compat",MC="@firebase/storage",PC="@firebase/storage-compat",OC="@firebase/firestore",jC="@firebase/ai",LC="@firebase/firestore-compat",VC="firebase",UC="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]",FC={[Fp]:"fire-core",[fC]:"fire-core-compat",[gC]:"fire-analytics",[mC]:"fire-analytics-compat",[yC]:"fire-app-check",[pC]:"fire-app-check-compat",[bC]:"fire-auth",[_C]:"fire-auth-compat",[vC]:"fire-rtdb",[xC]:"fire-data-connect",[wC]:"fire-rtdb-compat",[EC]:"fire-fn",[SC]:"fire-fn-compat",[TC]:"fire-iid",[AC]:"fire-iid-compat",[RC]:"fire-fcm",[NC]:"fire-fcm-compat",[kC]:"fire-perf",[CC]:"fire-perf-compat",[IC]:"fire-rc",[DC]:"fire-rc-compat",[MC]:"fire-gcs",[PC]:"fire-gcs-compat",[OC]:"fire-fst",[LC]:"fire-fst-compat",[jC]:"fire-vertex","fire-js":"fire-js",[VC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Map,zC=new Map,Bp=new Map;function Ex(n,e){try{n.container.addComponent(e)}catch(t){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fo(n){const e=n.name;if(Bp.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,n);for(const t of nf.values())Ex(t,n);for(const t of zC.values())Ex(t,n);return!0}function Mf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ra=new ju("app","Firebase",BC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=UC;function HE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:zp,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ra.create("bad-app-name",{appName:String(r)});if(t||(t=VE()),!t)throw ra.create("no-options");const o=nf.get(r);if(o){if(ho(t,o.options)&&ho(i,o.config))return o;throw ra.create("duplicate-app",{appName:r})}const c=new Kk(r);for(const d of Bp.values())c.addComponent(d);const u=new HC(t,i,c);return nf.set(r,u),u}function Iy(n=zp){const e=nf.get(n);if(!e&&n===zp&&VE())return HE();if(!e)throw ra.create("no-app",{appName:n});return e}function ys(n,e,t){let i=FC[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${e}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(c.join(" "));return}fo(new ua(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebase-heartbeat-database",GC=1,gu="firebase-heartbeat-store";let fp=null;function qE(){return fp||(fp=lC(qC,GC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ra.create("idb-open",{originalErrorMessage:n.message})})),fp}async function $C(n){try{const t=(await qE()).transaction(gu),i=await t.objectStore(gu).get(GE(n));return await t.done,i}catch(e){if(e instanceof ks)ur.warn(e.message);else{const t=ra.create("idb-get",{originalErrorMessage:e?.message});ur.warn(t.message)}}}async function Sx(n,e){try{const i=(await qE()).transaction(gu,"readwrite");await i.objectStore(gu).put(e,GE(n)),await i.done}catch(t){if(t instanceof ks)ur.warn(t.message);else{const i=ra.create("idb-set",{originalErrorMessage:t?.message});ur.warn(i.message)}}}function GE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1024,YC=30;class KC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>YC){const r=ZC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ur.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Tx(),{heartbeatsToSend:t,unsentEntries:i}=XC(this._heartbeatsCache.heartbeats),r=tf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ur.warn(e),""}}}function Tx(){return new Date().toISOString().substring(0,10)}function XC(n,e=WC){const t=[];let i=n.slice();for(const r of n){const o=t.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),Ax(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ax(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class QC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lk()?Vk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $C(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ax(n){return tf(JSON.stringify({version:2,heartbeats:n})).length}function ZC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n){fo(new ua("platform-logger",e=>new hC(e),"PRIVATE")),fo(new ua("heartbeat",e=>new KC(e),"PRIVATE")),ys(Fp,wx,n),ys(Fp,wx,"esm2020"),ys("fire-js","")}JC("");var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,$E;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function T(){}T.prototype=I.prototype,P.D=I.prototype,P.prototype=new T,P.prototype.constructor=P,P.C=function(O,C,z){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return I.prototype[C].apply(O,L)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,I,T){T||(T=0);var O=Array(16);if(typeof I=="string")for(var C=0;16>C;++C)O[C]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(C=0;16>C;++C)O[C]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=P.g[0],T=P.g[1],C=P.g[2];var z=P.g[3],L=I+(z^T&(C^z))+O[0]+3614090360&4294967295;I=T+(L<<7&4294967295|L>>>25),L=z+(C^I&(T^C))+O[1]+3905402710&4294967295,z=I+(L<<12&4294967295|L>>>20),L=C+(T^z&(I^T))+O[2]+606105819&4294967295,C=z+(L<<17&4294967295|L>>>15),L=T+(I^C&(z^I))+O[3]+3250441966&4294967295,T=C+(L<<22&4294967295|L>>>10),L=I+(z^T&(C^z))+O[4]+4118548399&4294967295,I=T+(L<<7&4294967295|L>>>25),L=z+(C^I&(T^C))+O[5]+1200080426&4294967295,z=I+(L<<12&4294967295|L>>>20),L=C+(T^z&(I^T))+O[6]+2821735955&4294967295,C=z+(L<<17&4294967295|L>>>15),L=T+(I^C&(z^I))+O[7]+4249261313&4294967295,T=C+(L<<22&4294967295|L>>>10),L=I+(z^T&(C^z))+O[8]+1770035416&4294967295,I=T+(L<<7&4294967295|L>>>25),L=z+(C^I&(T^C))+O[9]+2336552879&4294967295,z=I+(L<<12&4294967295|L>>>20),L=C+(T^z&(I^T))+O[10]+4294925233&4294967295,C=z+(L<<17&4294967295|L>>>15),L=T+(I^C&(z^I))+O[11]+2304563134&4294967295,T=C+(L<<22&4294967295|L>>>10),L=I+(z^T&(C^z))+O[12]+1804603682&4294967295,I=T+(L<<7&4294967295|L>>>25),L=z+(C^I&(T^C))+O[13]+4254626195&4294967295,z=I+(L<<12&4294967295|L>>>20),L=C+(T^z&(I^T))+O[14]+2792965006&4294967295,C=z+(L<<17&4294967295|L>>>15),L=T+(I^C&(z^I))+O[15]+1236535329&4294967295,T=C+(L<<22&4294967295|L>>>10),L=I+(C^z&(T^C))+O[1]+4129170786&4294967295,I=T+(L<<5&4294967295|L>>>27),L=z+(T^C&(I^T))+O[6]+3225465664&4294967295,z=I+(L<<9&4294967295|L>>>23),L=C+(I^T&(z^I))+O[11]+643717713&4294967295,C=z+(L<<14&4294967295|L>>>18),L=T+(z^I&(C^z))+O[0]+3921069994&4294967295,T=C+(L<<20&4294967295|L>>>12),L=I+(C^z&(T^C))+O[5]+3593408605&4294967295,I=T+(L<<5&4294967295|L>>>27),L=z+(T^C&(I^T))+O[10]+38016083&4294967295,z=I+(L<<9&4294967295|L>>>23),L=C+(I^T&(z^I))+O[15]+3634488961&4294967295,C=z+(L<<14&4294967295|L>>>18),L=T+(z^I&(C^z))+O[4]+3889429448&4294967295,T=C+(L<<20&4294967295|L>>>12),L=I+(C^z&(T^C))+O[9]+568446438&4294967295,I=T+(L<<5&4294967295|L>>>27),L=z+(T^C&(I^T))+O[14]+3275163606&4294967295,z=I+(L<<9&4294967295|L>>>23),L=C+(I^T&(z^I))+O[3]+4107603335&4294967295,C=z+(L<<14&4294967295|L>>>18),L=T+(z^I&(C^z))+O[8]+1163531501&4294967295,T=C+(L<<20&4294967295|L>>>12),L=I+(C^z&(T^C))+O[13]+2850285829&4294967295,I=T+(L<<5&4294967295|L>>>27),L=z+(T^C&(I^T))+O[2]+4243563512&4294967295,z=I+(L<<9&4294967295|L>>>23),L=C+(I^T&(z^I))+O[7]+1735328473&4294967295,C=z+(L<<14&4294967295|L>>>18),L=T+(z^I&(C^z))+O[12]+2368359562&4294967295,T=C+(L<<20&4294967295|L>>>12),L=I+(T^C^z)+O[5]+4294588738&4294967295,I=T+(L<<4&4294967295|L>>>28),L=z+(I^T^C)+O[8]+2272392833&4294967295,z=I+(L<<11&4294967295|L>>>21),L=C+(z^I^T)+O[11]+1839030562&4294967295,C=z+(L<<16&4294967295|L>>>16),L=T+(C^z^I)+O[14]+4259657740&4294967295,T=C+(L<<23&4294967295|L>>>9),L=I+(T^C^z)+O[1]+2763975236&4294967295,I=T+(L<<4&4294967295|L>>>28),L=z+(I^T^C)+O[4]+1272893353&4294967295,z=I+(L<<11&4294967295|L>>>21),L=C+(z^I^T)+O[7]+4139469664&4294967295,C=z+(L<<16&4294967295|L>>>16),L=T+(C^z^I)+O[10]+3200236656&4294967295,T=C+(L<<23&4294967295|L>>>9),L=I+(T^C^z)+O[13]+681279174&4294967295,I=T+(L<<4&4294967295|L>>>28),L=z+(I^T^C)+O[0]+3936430074&4294967295,z=I+(L<<11&4294967295|L>>>21),L=C+(z^I^T)+O[3]+3572445317&4294967295,C=z+(L<<16&4294967295|L>>>16),L=T+(C^z^I)+O[6]+76029189&4294967295,T=C+(L<<23&4294967295|L>>>9),L=I+(T^C^z)+O[9]+3654602809&4294967295,I=T+(L<<4&4294967295|L>>>28),L=z+(I^T^C)+O[12]+3873151461&4294967295,z=I+(L<<11&4294967295|L>>>21),L=C+(z^I^T)+O[15]+530742520&4294967295,C=z+(L<<16&4294967295|L>>>16),L=T+(C^z^I)+O[2]+3299628645&4294967295,T=C+(L<<23&4294967295|L>>>9),L=I+(C^(T|~z))+O[0]+4096336452&4294967295,I=T+(L<<6&4294967295|L>>>26),L=z+(T^(I|~C))+O[7]+1126891415&4294967295,z=I+(L<<10&4294967295|L>>>22),L=C+(I^(z|~T))+O[14]+2878612391&4294967295,C=z+(L<<15&4294967295|L>>>17),L=T+(z^(C|~I))+O[5]+4237533241&4294967295,T=C+(L<<21&4294967295|L>>>11),L=I+(C^(T|~z))+O[12]+1700485571&4294967295,I=T+(L<<6&4294967295|L>>>26),L=z+(T^(I|~C))+O[3]+2399980690&4294967295,z=I+(L<<10&4294967295|L>>>22),L=C+(I^(z|~T))+O[10]+4293915773&4294967295,C=z+(L<<15&4294967295|L>>>17),L=T+(z^(C|~I))+O[1]+2240044497&4294967295,T=C+(L<<21&4294967295|L>>>11),L=I+(C^(T|~z))+O[8]+1873313359&4294967295,I=T+(L<<6&4294967295|L>>>26),L=z+(T^(I|~C))+O[15]+4264355552&4294967295,z=I+(L<<10&4294967295|L>>>22),L=C+(I^(z|~T))+O[6]+2734768916&4294967295,C=z+(L<<15&4294967295|L>>>17),L=T+(z^(C|~I))+O[13]+1309151649&4294967295,T=C+(L<<21&4294967295|L>>>11),L=I+(C^(T|~z))+O[4]+4149444226&4294967295,I=T+(L<<6&4294967295|L>>>26),L=z+(T^(I|~C))+O[11]+3174756917&4294967295,z=I+(L<<10&4294967295|L>>>22),L=C+(I^(z|~T))+O[2]+718787259&4294967295,C=z+(L<<15&4294967295|L>>>17),L=T+(z^(C|~I))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(C+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+C&4294967295,P.g[3]=P.g[3]+z&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var T=I-this.blockSize,O=this.B,C=this.h,z=0;z<I;){if(C==0)for(;z<=T;)r(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<I;)if(O[C++]=P.charCodeAt(z++),C==this.blockSize){r(this,O),C=0;break}}else for(;z<I;)if(O[C++]=P[z++],C==this.blockSize){r(this,O),C=0;break}}this.h=C,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var T=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=T&255,T/=256;for(this.u(P),P=Array(16),I=T=0;4>I;++I)for(var O=0;32>O;O+=8)P[T++]=this.g[I]>>>O&255;return P};function o(P,I){var T=u;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=I(P)}function c(P,I){this.h=I;for(var T=[],O=!0,C=P.length-1;0<=C;C--){var z=P[C]|0;O&&z==I||(T[C]=z,O=!1)}this.g=T}var u={};function d(P){return-128<=P&&128>P?o(P,function(I){return new c([I|0],0>I?-1:0)}):new c([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return _;if(0>P)return R(f(-P));for(var I=[],T=1,O=0;P>=T;O++)I[O]=P/T|0,T*=4294967296;return new c(I,0)}function y(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return R(y(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(I,8)),O=_,C=0;C<P.length;C+=8){var z=Math.min(8,P.length-C),L=parseInt(P.substring(C,C+z),I);8>z?(z=f(Math.pow(I,z)),O=O.j(z).add(f(L))):(O=O.j(T),O=O.add(f(L)))}return O}var _=d(0),x=d(1),w=d(16777216);n=c.prototype,n.m=function(){if(k(this))return-R(this).m();for(var P=0,I=1,T=0;T<this.g.length;T++){var O=this.i(T);P+=(0<=O?O:4294967296+O)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(A(this))return"0";if(k(this))return"-"+R(this).toString(P);for(var I=f(Math.pow(P,6)),T=this,O="";;){var C=Z(T,I).g;T=j(T,C.j(I));var z=((0<T.g.length?T.g[0]:T.h)>>>0).toString(P);if(T=C,A(T))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function A(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function k(P){return P.h==-1}n.l=function(P){return P=j(this,P),k(P)?-1:A(P)?0:1};function R(P){for(var I=P.g.length,T=[],O=0;O<I;O++)T[O]=~P.g[O];return new c(T,~P.h).add(x)}n.abs=function(){return k(this)?R(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),T=[],O=0,C=0;C<=I;C++){var z=O+(this.i(C)&65535)+(P.i(C)&65535),L=(z>>>16)+(this.i(C)>>>16)+(P.i(C)>>>16);O=L>>>16,z&=65535,L&=65535,T[C]=L<<16|z}return new c(T,T[T.length-1]&-2147483648?-1:0)};function j(P,I){return P.add(R(I))}n.j=function(P){if(A(this)||A(P))return _;if(k(this))return k(P)?R(this).j(R(P)):R(R(this).j(P));if(k(P))return R(this.j(R(P)));if(0>this.l(w)&&0>P.l(w))return f(this.m()*P.m());for(var I=this.g.length+P.g.length,T=[],O=0;O<2*I;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var C=0;C<P.g.length;C++){var z=this.i(O)>>>16,L=this.i(O)&65535,be=P.i(C)>>>16,Ae=P.i(C)&65535;T[2*O+2*C]+=L*Ae,B(T,2*O+2*C),T[2*O+2*C+1]+=z*Ae,B(T,2*O+2*C+1),T[2*O+2*C+1]+=L*be,B(T,2*O+2*C+1),T[2*O+2*C+2]+=z*be,B(T,2*O+2*C+2)}for(O=0;O<I;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=I;O<2*I;O++)T[O]=0;return new c(T,0)};function B(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function W(P,I){this.g=P,this.h=I}function Z(P,I){if(A(I))throw Error("division by zero");if(A(P))return new W(_,_);if(k(P))return I=Z(R(P),I),new W(R(I.g),R(I.h));if(k(I))return I=Z(P,R(I)),new W(R(I.g),I.h);if(30<P.g.length){if(k(P)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var T=x,O=I;0>=O.l(P);)T=$(T),O=$(O);var C=le(T,1),z=le(O,1);for(O=le(O,2),T=le(T,2);!A(O);){var L=z.add(O);0>=L.l(P)&&(C=C.add(T),z=L),O=le(O,1),T=le(T,1)}return I=j(P,C.j(I)),new W(C,I)}for(C=_;0<=P.l(I);){for(T=Math.max(1,Math.floor(P.m()/I.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=f(T),L=z.j(I);k(L)||0<L.l(P);)T-=O,z=f(T),L=z.j(I);A(z)&&(z=x),C=C.add(z),P=j(P,L)}return new W(C,P)}n.A=function(P){return Z(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),T=[],O=0;O<I;O++)T[O]=this.i(O)&P.i(O);return new c(T,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),T=[],O=0;O<I;O++)T[O]=this.i(O)|P.i(O);return new c(T,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),T=[],O=0;O<I;O++)T[O]=this.i(O)^P.i(O);return new c(T,this.h^P.h)};function $(P){for(var I=P.g.length+1,T=[],O=0;O<I;O++)T[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(T,P.h)}function le(P,I){var T=I>>5;I%=32;for(var O=P.g.length-T,C=[],z=0;z<O;z++)C[z]=0<I?P.i(z+T)>>>I|P.i(z+T+1)<<32-I:P.i(z+T);return new c(C,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$E=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=y,aa=c}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WE,Zc,YE,Fd,Hp,KE,XE,QE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,v,E){return m==Array.prototype||m==Object.prototype||(m[v]=E.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var v=0;v<m.length;++v){var E=m[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function r(m,v){if(v)e:{var E=i;m=m.split(".");for(var M=0;M<m.length-1;M++){var X=m[M];if(!(X in E))break e;E=E[X]}m=m[m.length-1],M=E[m],v=v(M),v!=M&&v!=null&&e(E,m,{configurable:!0,writable:!0,value:v})}}function o(m,v){m instanceof String&&(m+="");var E=0,M=!1,X={next:function(){if(!M&&E<m.length){var re=E++;return{value:v(re,m[re]),done:!1}}return M=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}r("Array.prototype.values",function(m){return m||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function d(m){var v=typeof m;return v=v!="object"?v:m?Array.isArray(m)?"array":v:"null",v=="array"||v=="object"&&typeof m.length=="number"}function f(m){var v=typeof m;return v=="object"&&m!=null||v=="function"}function y(m,v,E){return m.call.apply(m.bind,arguments)}function _(m,v,E){if(!m)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,M),m.apply(v,X)}}return function(){return m.apply(v,arguments)}}function x(m,v,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,x.apply(null,arguments)}function w(m,v){var E=Array.prototype.slice.call(arguments,1);return function(){var M=E.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function A(m,v){function E(){}E.prototype=v.prototype,m.aa=v.prototype,m.prototype=new E,m.prototype.constructor=m,m.Qb=function(M,X,re){for(var ve=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ve[tt-2]=arguments[tt];return v.prototype[X].apply(M,ve)}}function k(m){const v=m.length;if(0<v){const E=Array(v);for(let M=0;M<v;M++)E[M]=m[M];return E}return[]}function R(m,v){for(let E=1;E<arguments.length;E++){const M=arguments[E];if(d(M)){const X=m.length||0,re=M.length||0;m.length=X+re;for(let ve=0;ve<re;ve++)m[X+ve]=M[ve]}else m.push(M)}}class j{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(m){return/^[\s\xa0]*$/.test(m)}function W(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function Z(m){return Z[" "](m),m}Z[" "]=function(){};var $=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function le(m,v,E){for(const M in m)v.call(E,m[M],M,m)}function P(m,v){for(const E in m)v.call(void 0,m[E],E,m)}function I(m){const v={};for(const E in m)v[E]=m[E];return v}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(m,v){let E,M;for(let X=1;X<arguments.length;X++){M=arguments[X];for(E in M)m[E]=M[E];for(let re=0;re<T.length;re++)E=T[re],Object.prototype.hasOwnProperty.call(M,E)&&(m[E]=M[E])}}function C(m){var v=1;m=m.split(":");const E=[];for(;0<v&&m.length;)E.push(m.shift()),v--;return m.length&&E.push(m.join(":")),E}function z(m){u.setTimeout(()=>{throw m},0)}function L(){var m=xe;let v=null;return m.g&&(v=m.g,m.g=m.g.next,m.g||(m.h=null),v.next=null),v}class be{constructor(){this.h=this.g=null}add(v,E){const M=Ae.get();M.set(v,E),this.h?this.h.next=M:this.g=M,this.h=M}}var Ae=new j(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ue=!1,xe=new be,V=()=>{const m=u.Promise.resolve(void 0);ee=()=>{m.then(ae)}};var ae=()=>{for(var m;m=L();){try{m.h.call(m.g)}catch(E){z(E)}var v=Ae;v.j(m),100>v.h&&(v.h++,m.next=v.g,v.g=m)}ue=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(m,v){this.type=m,this.g=this.target=v,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,v=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return m})();function ye(m,v){if(Y.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var E=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=v,v=m.relatedTarget){if($){e:{try{Z(v.nodeName);var X=!0;break e}catch{}X=!1}X||(v=null)}}else E=="mouseover"?v=m.fromElement:E=="mouseout"&&(v=m.toElement);this.relatedTarget=v,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:_e[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ye.aa.h.call(this)}}A(ye,Y);var _e={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),G=0;function oe(m,v,E,M,X){this.listener=m,this.proxy=null,this.src=v,this.type=E,this.capture=!!M,this.ha=X,this.key=++G,this.da=this.fa=!1}function He(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ce(m){this.src=m,this.g={},this.h=0}Ce.prototype.add=function(m,v,E,M,X){var re=m.toString();m=this.g[re],m||(m=this.g[re]=[],this.h++);var ve=Is(m,v,M,X);return-1<ve?(v=m[ve],E||(v.fa=!1)):(v=new oe(v,this.src,re,!!M,X),v.fa=E,m.push(v)),v};function Zn(m,v){var E=v.type;if(E in m.g){var M=m.g[E],X=Array.prototype.indexOf.call(M,v,void 0),re;(re=0<=X)&&Array.prototype.splice.call(M,X,1),re&&(He(v),m.g[E].length==0&&(delete m.g[E],m.h--))}}function Is(m,v,E,M){for(var X=0;X<m.length;++X){var re=m[X];if(!re.da&&re.listener==v&&re.capture==!!E&&re.ha==M)return X}return-1}var ji="closure_lm_"+(1e6*Math.random()|0),Jn={};function br(m,v,E,M,X){if(Array.isArray(v)){for(var re=0;re<v.length;re++)br(m,v[re],E,M,X);return null}return E=Ea(E),m&&m[_t]?m.K(v,E,f(M)?!!M.capture:!1,X):zn(m,v,E,!1,M,X)}function zn(m,v,E,M,X,re){if(!v)throw Error("Invalid event type");var ve=f(X)?!!X.capture:!!X,tt=Bn(m);if(tt||(m[ji]=tt=new Ce(m)),E=tt.add(v,E,M,ve,re),E.proxy)return E;if(M=Ao(),E.proxy=M,M.src=m,M.listener=E,m.addEventListener)ge||(X=ve),X===void 0&&(X=!1),m.addEventListener(v.toString(),M,X);else if(m.attachEvent)m.attachEvent(ei(v.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ao(){function m(E){return v.call(m.src,m.listener,E)}const v=_r;return m}function wa(m,v,E,M,X){if(Array.isArray(v))for(var re=0;re<v.length;re++)wa(m,v[re],E,M,X);else M=f(M)?!!M.capture:!!M,E=Ea(E),m&&m[_t]?(m=m.i,v=String(v).toString(),v in m.g&&(re=m.g[v],E=Is(re,E,M,X),-1<E&&(He(re[E]),Array.prototype.splice.call(re,E,1),re.length==0&&(delete m.g[v],m.h--)))):m&&(m=Bn(m))&&(v=m.g[v.toString()],m=-1,v&&(m=Is(v,E,M,X)),(E=-1<m?v[m]:null)&&Li(E))}function Li(m){if(typeof m!="number"&&m&&!m.da){var v=m.src;if(v&&v[_t])Zn(v.i,m);else{var E=m.type,M=m.proxy;v.removeEventListener?v.removeEventListener(E,M,m.capture):v.detachEvent?v.detachEvent(ei(E),M):v.addListener&&v.removeListener&&v.removeListener(M),(E=Bn(v))?(Zn(E,m),E.h==0&&(E.src=null,v[ji]=null)):He(m)}}}function ei(m){return m in Jn?Jn[m]:Jn[m]="on"+m}function _r(m,v){if(m.da)m=!0;else{v=new ye(v,this);var E=m.listener,M=m.ha||m.src;m.fa&&Li(m),m=E.call(M,v)}return m}function Bn(m){return m=m[ji],m instanceof Ce?m:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ea(m){return typeof m=="function"?m:(m[vr]||(m[vr]=function(v){return m.handleEvent(v)}),m[vr])}function Nt(){te.call(this),this.i=new Ce(this),this.M=this,this.F=null}A(Nt,te),Nt.prototype[_t]=!0,Nt.prototype.removeEventListener=function(m,v,E,M){wa(this,m,v,E,M)};function rt(m,v){var E,M=m.F;if(M)for(E=[];M;M=M.F)E.push(M);if(m=m.M,M=v.type||v,typeof v=="string")v=new Y(v,m);else if(v instanceof Y)v.target=v.target||m;else{var X=v;v=new Y(M,m),O(v,X)}if(X=!0,E)for(var re=E.length-1;0<=re;re--){var ve=v.g=E[re];X=On(ve,M,!0,v)&&X}if(ve=v.g=m,X=On(ve,M,!0,v)&&X,X=On(ve,M,!1,v)&&X,E)for(re=0;re<E.length;re++)ve=v.g=E[re],X=On(ve,M,!1,v)&&X}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var m=this.i,v;for(v in m.g){for(var E=m.g[v],M=0;M<E.length;M++)He(E[M]);delete m.g[v],m.h--}}this.F=null},Nt.prototype.K=function(m,v,E,M){return this.i.add(String(m),v,!1,E,M)},Nt.prototype.L=function(m,v,E,M){return this.i.add(String(m),v,!0,E,M)};function On(m,v,E,M){if(v=m.i.g[String(v)],!v)return!0;v=v.concat();for(var X=!0,re=0;re<v.length;++re){var ve=v[re];if(ve&&!ve.da&&ve.capture==E){var tt=ve.listener,Jt=ve.ha||ve.src;ve.fa&&Zn(m.i,ve),X=tt.call(Jt,M)!==!1&&X}}return X&&!M.defaultPrevented}function Zt(m,v,E){if(typeof m=="function")E&&(m=x(m,E));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(m,v||0)}function Hn(m){m.g=Zt(()=>{m.g=null,m.i&&(m.i=!1,Hn(m))},m.l);const v=m.h;m.h=null,m.m.apply(null,v)}class Sa extends te{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Hn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(m){te.call(this),this.h=m,this.g={}}A(ti,te);var Ds=[];function gi(m){le(m.g,function(v,E){this.g.hasOwnProperty(E)&&Li(v)},m),m.g={}}ti.prototype.N=function(){ti.aa.N.call(this),gi(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ni=u.JSON.stringify,xr=u.JSON.parse,Xi=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Qi(){}Qi.prototype.h=null;function Je(m){return m.h||(m.h=m.i())}function Ta(){}var Vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pi(){Y.call(this,"d")}A(pi,Y);function Aa(){Y.call(this,"c")}A(Aa,Y);var yi={},Ra=null;function Zi(){return Ra=Ra||new Nt}yi.La="serverreachability";function Ms(m){Y.call(this,yi.La,m)}A(Ms,Y);function ii(m){const v=Zi();rt(v,new Ms(v))}yi.STAT_EVENT="statevent";function Na(m,v){Y.call(this,yi.STAT_EVENT,m),this.stat=v}A(Na,Y);function Ue(m){const v=Zi();rt(v,new Na(v,m))}yi.Ma="timingevent";function mt(m,v){Y.call(this,yi.Ma,m),this.size=v}A(mt,Y);function vt(m,v){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},v)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function wr(m,v,E,M,X,re){m.info(function(){if(m.g)if(re)for(var ve="",tt=re.split("&"),Jt=0;Jt<tt.length;Jt++){var nt=tt[Jt].split("=");if(1<nt.length){var un=nt[0];nt=nt[1];var en=un.split("_");ve=2<=en.length&&en[1]=="type"?ve+(un+"="+nt+"&"):ve+(un+"=redacted&")}}else ve=null;else ve=re;return"XMLHTTP REQ ("+M+") [attempt "+X+"]: "+v+`
`+E+`
`+ve})}function Ro(m,v,E,M,X,re,ve){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+X+"]: "+v+`
`+E+`
`+re+" "+ve})}function lt(m,v,E,M){m.info(function(){return"XMLHTTP TEXT ("+v+"): "+jn(m,E)+(M?" "+M:"")})}function bi(m,v){m.info(function(){return"TIMEOUT: "+v})}En.prototype.info=function(){};function jn(m,v){if(!m.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(m=0;m<E.length;m++)if(Array.isArray(E[m])){var M=E[m];if(!(2>M.length)){var X=M[1];if(Array.isArray(X)&&!(1>X.length)){var re=X[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ve=1;ve<X.length;ve++)X[ve]=""}}}}return ni(E)}catch{return v}}var _i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function qt(){}A(qt,Qi),qt.prototype.g=function(){return new XMLHttpRequest},qt.prototype.i=function(){return{}},Ln=new qt;function ln(m,v,E,M){this.j=m,this.i=v,this.l=E,this.R=M||1,this.U=new ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var ka={},Ji={};function si(m,v,E){m.L=1,m.v=Ia(ri(v)),m.m=E,m.P=!0,qn(m,null)}function qn(m,v){m.F=Date.now(),Ps(m),m.A=ri(m.v);var E=m.A,M=m.R;Array.isArray(M)||(M=[String(M)]),Kl(E.i,"t",M),m.C=0,E=m.j.J,m.h=new ut,m.g=lh(m.j,E?v:null,!m.m),0<m.O&&(m.M=new Sa(x(m.Y,m,m.g),m.O)),v=m.U,E=m.g,M=m.ca;var X="readystatechange";Array.isArray(X)||(X&&(Ds[0]=X.toString()),X=Ds);for(var re=0;re<X.length;re++){var ve=br(E,X[re],M||v.handleEvent,!1,v.h||v);if(!ve)break;v.g[ve.key]=ve}v=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,v)):(m.u="GET",m.g.ea(m.A,m.u,null,v)),ii(),wr(m.i,m.u,m.A,m.l,m.R,m.m)}ln.prototype.ca=function(m){m=m.target;const v=this.M;v&&Ei(m)==3?v.j():this.Y(m)},ln.prototype.Y=function(m){try{if(m==this.g)e:{const en=Ei(this.g);var v=this.g.Ba();const zs=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||eh(this.g)))){this.J||en!=4||v==7||(v==8||0>=zs?ii(3):ii(2)),Ui(this);var E=this.g.Z();this.X=E;t:if(Vn(this)){var M=eh(this.g);m="";var X=M.length,re=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),Dt(this);var ve="";break t}this.h.i=new u.TextDecoder}for(v=0;v<X;v++)this.h.h=!0,m+=this.h.i.decode(M[v],{stream:!(re&&v==X-1)});M.length=0,this.h.g+=m,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=E==200,Ro(this.i,this.u,this.A,this.l,this.R,en,E),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Jt=this.g;if((tt=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(tt)){var nt=tt;break t}}nt=null}if(E=nt)lt(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,es(this,E);else{this.o=!1,this.s=3,Ue(12),Gt(this),Dt(this);break e}}if(this.P){E=!0;let pn;for(;!this.J&&this.C<ve.length;)if(pn=No(this,ve),pn==Ji){en==4&&(this.s=4,Ue(14),E=!1),lt(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==ka){this.s=4,Ue(15),lt(this.i,this.l,ve,"[Invalid Chunk]"),E=!1;break}else lt(this.i,this.l,pn,null),es(this,pn);if(Vn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||ve.length!=0||this.h.h||(this.s=1,Ue(16),E=!1),this.o=this.o&&E,!E)lt(this.i,this.l,ve,"[Invalid Chunked Response]"),Gt(this),Dt(this);else if(0<ve.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Ua(un),un.M=!0,Ue(11))}}else lt(this.i,this.l,ve,null),es(this,ve);en==4&&Gt(this),this.o&&!this.J&&(en==4?rh(this.j,this):(this.o=!1,Ps(this)))}else cm(this.g),E==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),Gt(this),Dt(this)}}}catch{}finally{}};function Vn(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function No(m,v){var E=m.C,M=v.indexOf(`
`,E);return M==-1?Ji:(E=Number(v.substring(E,M)),isNaN(E)?ka:(M+=1,M+E>v.length?Ji:(v=v.slice(M,M+E),m.C=M+E,v)))}ln.prototype.cancel=function(){this.J=!0,Gt(this)};function Ps(m){m.S=Date.now()+m.I,Er(m,m.I)}function Er(m,v){if(m.B!=null)throw Error("WatchDog timer not null");m.B=vt(x(m.ba,m),v)}function Ui(m){m.B&&(u.clearTimeout(m.B),m.B=null)}ln.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(bi(this.i,this.A),this.L!=2&&(ii(),Ue(17)),Gt(this),this.s=2,Dt(this)):Er(this,this.S-m)};function Dt(m){m.j.G==0||m.J||rh(m.j,m)}function Gt(m){Ui(m);var v=m.M;v&&typeof v.ma=="function"&&v.ma(),m.M=null,gi(m.U),m.g&&(v=m.g,m.g=null,v.abort(),v.ma())}function es(m,v){try{var E=m.j;if(E.G!=0&&(E.g==m||De(E.h,m))){if(!m.K&&De(E.h,m)&&E.G==3){try{var M=E.Da.g.parse(v)}catch{M=null}if(Array.isArray(M)&&M.length==3){var X=M;if(X[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<m.F)jo(E),Po(E);else break e;ec(E),Ue(18)}}else E.za=X[1],0<E.za-E.T&&37500>X[2]&&E.F&&E.v==0&&!E.C&&(E.C=vt(x(E.Za,E),6e3));if(1>=pe(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Fs(E,11)}else if((m.K||E.g==m)&&jo(E),!B(v))for(X=E.Da.g.parse(v),v=0;v<X.length;v++){let nt=X[v];if(E.T=nt[0],nt=nt[1],E.G==2)if(nt[0]=="c"){E.K=nt[1],E.ia=nt[2];const un=nt[3];un!=null&&(E.la=un,E.j.info("VER="+E.la));const en=nt[4];en!=null&&(E.Aa=en,E.j.info("SVER="+E.Aa));const zs=nt[5];zs!=null&&typeof zs=="number"&&0<zs&&(M=1.5*zs,E.L=M,E.j.info("backChannelRequestTimeoutMs_="+M)),M=E;const pn=m.g;if(pn){const os=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var re=M.h;re.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Fe(re,re.h),re.h=null))}if(M.D){const nc=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(M.ya=nc,xt(M.I,M.D,nc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-m.F,E.j.info("Handshake RTT: "+E.R+"ms")),M=E;var ve=m;if(M.qa=oh(M,M.J?M.ia:null,M.W),ve.K){Re(M.h,ve);var tt=ve,Jt=M.L;Jt&&(tt.I=Jt),tt.B&&(Ui(tt),Ps(tt)),M.g=ve}else ih(M);0<E.i.length&&Oo(E)}else nt[0]!="stop"&&nt[0]!="close"||Fs(E,7);else E.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Fs(E,7):Zl(E):nt[0]!="noop"&&E.l&&E.l.ta(nt),E.v=0)}}ii(4)}catch{}}var Sr=class{constructor(m,v){this.g=m,this.map=v}};function D(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function se(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function pe(m){return m.h?1:m.g?m.g.size:0}function De(m,v){return m.h?m.h==v:m.g?m.g.has(v):!1}function Fe(m,v){m.g?m.g.add(v):m.h=v}function Re(m,v){m.h&&m.h==v?m.h=null:m.g&&m.g.has(v)&&m.g.delete(v)}D.prototype.cancel=function(){if(this.i=$t(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function $t(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let v=m.i;for(const E of m.g.values())v=v.concat(E.D);return v}return k(m.i)}function je(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var v=[],E=m.length,M=0;M<E;M++)v.push(m[M]);return v}v=[],E=0;for(M in m)v[E++]=m[M];return v}function Ie(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var v=[];m=m.length;for(var E=0;E<m;E++)v.push(E);return v}v=[],E=0;for(const M in m)v[E++]=M;return v}}}function et(m,v){if(m.forEach&&typeof m.forEach=="function")m.forEach(v,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,v,void 0);else for(var E=Ie(m),M=je(m),X=M.length,re=0;re<X;re++)v.call(void 0,M[re],E&&E[re],m)}var kt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gn(m,v){if(m){m=m.split("&");for(var E=0;E<m.length;E++){var M=m[E].indexOf("="),X=null;if(0<=M){var re=m[E].substring(0,M);X=m[E].substring(M+1)}else re=m[E];v(re,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Se(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Se){this.h=m.h,Ca(this,m.j),this.o=m.o,this.g=m.g,Tr(this,m.s),this.l=m.l;var v=m.i,E=new js;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Os(this,E),this.m=m.m}else m&&(v=String(m).match(kt))?(this.h=!1,Ca(this,v[1]||"",!0),this.o=vi(v[2]||""),this.g=vi(v[3]||"",!0),Tr(this,v[4]),this.l=vi(v[5]||"",!0),Os(this,v[6]||"",!0),this.m=vi(v[7]||"")):(this.h=!1,this.i=new js(null,this.h))}Se.prototype.toString=function(){var m=[],v=this.j;v&&m.push(Da(v,Wl,!0),":");var E=this.g;return(E||v=="file")&&(m.push("//"),(v=this.o)&&m.push(Da(v,Wl,!0),"@"),m.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&m.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(Da(E,E.charAt(0)=="/"?om:Yl,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",Da(E,ko)),m.join("")};function ri(m){return new Se(m)}function Ca(m,v,E){m.j=E?vi(v,!0):v,m.j&&(m.j=m.j.replace(/:$/,""))}function Tr(m,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);m.s=v}else m.s=null}function Os(m,v,E){v instanceof js?(m.i=v,Zu(m.i,m.h)):(E||(v=Da(v,lm)),m.i=new js(v,m.h))}function xt(m,v,E){m.i.set(v,E)}function Ia(m){return xt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function vi(m,v){return m?v?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Da(m,v,E){return typeof m=="string"?(m=encodeURI(m).replace(v,Qu),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Qu(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Wl=/[#\/\?@]/g,Yl=/[#\?:]/g,om=/[#\?]/g,lm=/[#\?@]/g,ko=/#/g;function js(m,v){this.h=this.g=null,this.i=m||null,this.j=!!v}function xi(m){m.g||(m.g=new Map,m.h=0,m.i&&gn(m.i,function(v,E){m.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=js.prototype,n.add=function(m,v){xi(this),this.i=null,m=ts(this,m);var E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(v),this.h+=1,this};function Ls(m,v){xi(m),v=ts(m,v),m.g.has(v)&&(m.i=null,m.h-=m.g.get(v).length,m.g.delete(v))}function Vs(m,v){return xi(m),v=ts(m,v),m.g.has(v)}n.forEach=function(m,v){xi(this),this.g.forEach(function(E,M){E.forEach(function(X){m.call(v,X,M,this)},this)},this)},n.na=function(){xi(this);const m=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let M=0;M<v.length;M++){const X=m[M];for(let re=0;re<X.length;re++)E.push(v[M])}return E},n.V=function(m){xi(this);let v=[];if(typeof m=="string")Vs(this,m)&&(v=v.concat(this.g.get(ts(this,m))));else{m=Array.from(this.g.values());for(let E=0;E<m.length;E++)v=v.concat(m[E])}return v},n.set=function(m,v){return xi(this),this.i=null,m=ts(this,m),Vs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[v]),this.h+=1,this},n.get=function(m,v){return m?(m=this.V(m),0<m.length?String(m[0]):v):v};function Kl(m,v,E){Ls(m,v),0<E.length&&(m.i=null,m.g.set(ts(m,v),k(E)),m.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var M=v[E];const re=encodeURIComponent(String(M)),ve=this.V(M);for(M=0;M<ve.length;M++){var X=re;ve[M]!==""&&(X+="="+encodeURIComponent(String(ve[M]))),m.push(X)}}return this.i=m.join("&")};function ts(m,v){return v=String(v),m.j&&(v=v.toLowerCase()),v}function Zu(m,v){v&&!m.j&&(xi(m),m.i=null,m.g.forEach(function(E,M){var X=M.toLowerCase();M!=X&&(Ls(this,M),Kl(this,X,E))},m)),m.j=v}function Ma(m,v){const E=new En;if(u.Image){const M=new Image;M.onload=w(wi,E,"TestLoadImage: loaded",!0,v,M),M.onerror=w(wi,E,"TestLoadImage: error",!1,v,M),M.onabort=w(wi,E,"TestLoadImage: abort",!1,v,M),M.ontimeout=w(wi,E,"TestLoadImage: timeout",!1,v,M),u.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else v(!1)}function Fi(m,v){const E=new En,M=new AbortController,X=setTimeout(()=>{M.abort(),wi(E,"TestPingServer: timeout",!1,v)},1e4);fetch(m,{signal:M.signal}).then(re=>{clearTimeout(X),re.ok?wi(E,"TestPingServer: ok",!0,v):wi(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),wi(E,"TestPingServer: error",!1,v)})}function wi(m,v,E,M,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),M(E)}catch{}}function Pa(){this.g=new Xi}function ns(m,v,E){const M=E||"";try{et(m,function(X,re){let ve=X;f(X)&&(ve=ni(X)),v.push(M+re+"="+encodeURIComponent(ve))})}catch(X){throw v.push(M+"type="+encodeURIComponent("_badmap")),X}}function Ar(m){this.l=m.Ub||null,this.j=m.eb||!1}A(Ar,Qi),Ar.prototype.g=function(){return new Us(this.l,this.j)},Ar.prototype.i=(function(m){return function(){return m}})({});function Us(m,v){Nt.call(this),this.D=m,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Us,Nt),n=Us.prototype,n.open=function(m,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=v,this.readyState=1,ss(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(v.body=m),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xl(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xl(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var v=m.value?m.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!m.done}))&&(this.response=this.responseText+=v)}m.done?is(this):ss(this),this.readyState==3&&Xl(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,is(this))},n.Qa=function(m){this.g&&(this.response=m,is(this))},n.ga=function(){this.g&&is(this)};function is(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ss(m)}n.setRequestHeader=function(m,v){this.u.append(m,v)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=v.next();return m.join(`\r
`)};function ss(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ql(m){let v="";return le(m,function(E,M){v+=M,v+=":",v+=E,v+=`\r
`}),v}function cn(m,v,E){e:{for(M in E){var M=!1;break e}M=!0}M||(E=Ql(E),typeof m=="string"?E!=null&&encodeURIComponent(String(E)):xt(m,v,E))}function ht(m){Nt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ht,Nt);var Co=/^https?$/i,Oa=["POST","PUT"];n=ht.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,v,E,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);v=v?v.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?Je(this.o):Je(Ln),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(m),!0),this.B=!1}catch(re){Ju(this,re);return}if(m=E||"",E=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var X in M)E.set(X,M[X]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const re of M.keys())E.set(re,M.get(re));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(E.keys()).find(re=>re.toLowerCase()=="content-type"),X=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Oa,v,void 0))||M||X||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ve]of E)this.g.setRequestHeader(re,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ja(this),this.u=!0,this.g.send(m),this.u=!1}catch(re){Ju(this,re)}};function Ju(m,v){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=v,m.m=5,Io(m),rs(m)}function Io(m){m.A||(m.A=!0,rt(m,"complete"),rt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,rt(this,"complete"),rt(this,"abort"),rs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rs(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Do(this):this.bb())},n.bb=function(){Do(this)};function Do(m){if(m.h&&typeof c<"u"&&(!m.v[1]||Ei(m)!=4||m.Z()!=2)){if(m.u&&Ei(m)==4)Zt(m.Ea,0,m);else if(rt(m,"readystatechange"),Ei(m)==4){m.h=!1;try{const ve=m.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var M;if(M=ve===0){var X=String(m.D).match(kt)[1]||null;!X&&u.self&&u.self.location&&(X=u.self.location.protocol.slice(0,-1)),M=!Co.test(X?X.toLowerCase():"")}E=M}if(E)rt(m,"complete"),rt(m,"success");else{m.m=6;try{var re=2<Ei(m)?m.g.statusText:""}catch{re=""}m.l=re+" ["+m.Z()+"]",Io(m)}}finally{rs(m)}}}}function rs(m,v){if(m.g){ja(m);const E=m.g,M=m.v[0]?()=>{}:null;m.g=null,m.v=null,v||rt(m,"ready");try{E.onreadystatechange=M}catch{}}}function ja(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Ei(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var v=this.g.responseText;return m&&v.indexOf(m)==0&&(v=v.substring(m.length)),xr(v)}};function eh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function cm(m){const v={};m=(m.g&&2<=Ei(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(B(m[M]))continue;var E=C(m[M]);const X=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const re=v[X]||[];v[X]=re,re.push(E)}P(v,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(m,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||v}function Mo(m){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=La("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=La("baseRetryDelayMs",5e3,m),this.cb=La("retryDelaySeedMs",1e4,m),this.Wa=La("forwardChannelMaxRetries",2,m),this.wa=La("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new D(m&&m.concurrentRequestLimit),this.Da=new Pa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mo.prototype,n.la=8,n.G=1,n.connect=function(m,v,E,M){Ue(0),this.W=m,this.H=v||{},E&&M!==void 0&&(this.H.OSID=E,this.H.OAID=M),this.F=this.X,this.I=oh(this,null,this.W),Oo(this)};function Zl(m){if(th(m),m.G==3){var v=m.U++,E=ri(m.I);if(xt(E,"SID",m.K),xt(E,"RID",v),xt(E,"TYPE","terminate"),Va(m,E),v=new ln(m,m.j,v),v.L=2,v.v=Ia(ri(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.v,E=!0),E||(v.g=lh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ps(v)}ah(m)}function Po(m){m.g&&(Ua(m),m.g.cancel(),m.g=null)}function th(m){Po(m),m.u&&(u.clearTimeout(m.u),m.u=null),jo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Oo(m){if(!se(m.h)&&!m.s){m.s=!0;var v=m.Ga;ee||V(),ue||(ee(),ue=!0),xe.add(v,m),m.B=0}}function um(m,v){return pe(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=v.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=vt(x(m.Ga,m,v),tc(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const X=new ln(this,this.j,m);let re=this.o;if(this.S&&(re?(re=I(re),O(re,this.S)):re=this.S),this.m!==null||this.O||(X.H=re,re=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var M=this.i[E];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(v+=M,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=nh(this,X,v),E=ri(this.I),xt(E,"RID",m),xt(E,"CVER",22),this.D&&xt(E,"X-HTTP-Session-Id",this.D),Va(this,E),re&&(this.O?v="headers="+encodeURIComponent(String(Ql(re)))+"&"+v:this.m&&cn(E,this.m,re)),Fe(this.h,X),this.Ua&&xt(E,"TYPE","init"),this.P?(xt(E,"$req",v),xt(E,"SID","null"),X.T=!0,si(X,E,null)):si(X,E,v),this.G=2}}else this.G==3&&(m?Jl(this,m):this.i.length==0||se(this.h)||Jl(this))};function Jl(m,v){var E;v?E=v.l:E=m.U++;const M=ri(m.I);xt(M,"SID",m.K),xt(M,"RID",E),xt(M,"AID",m.T),Va(m,M),m.m&&m.o&&cn(M,m.m,m.o),E=new ln(m,m.j,E,m.B+1),m.m===null&&(E.H=m.o),v&&(m.i=v.D.concat(m.i)),v=nh(m,E,1e3),E.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Fe(m.h,E),si(E,M,v)}function Va(m,v){m.H&&le(m.H,function(E,M){xt(v,M,E)}),m.l&&et({},function(E,M){xt(v,M,E)})}function nh(m,v,E){E=Math.min(m.i.length,E);var M=m.l?x(m.l.Na,m.l,m):null;e:{var X=m.i;let re=-1;for(;;){const ve=["count="+E];re==-1?0<E?(re=X[0].g,ve.push("ofs="+re)):re=0:ve.push("ofs="+re);let tt=!0;for(let Jt=0;Jt<E;Jt++){let nt=X[Jt].g;const un=X[Jt].map;if(nt-=re,0>nt)re=Math.max(0,X[Jt].g-100),tt=!1;else try{ns(un,ve,"req"+nt+"_")}catch{M&&M(un)}}if(tt){M=ve.join("&");break e}}}return m=m.i.splice(0,E),v.D=m,M}function ih(m){if(!m.g&&!m.u){m.Y=1;var v=m.Fa;ee||V(),ue||(ee(),ue=!0),xe.add(v,m),m.v=0}}function ec(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=vt(x(m.Fa,m),tc(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,sh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=vt(x(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),Po(this),sh(this))};function Ua(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function sh(m){m.g=new ln(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var v=ri(m.qa);xt(v,"RID","rpc"),xt(v,"SID",m.K),xt(v,"AID",m.T),xt(v,"CI",m.F?"0":"1"),!m.F&&m.ja&&xt(v,"TO",m.ja),xt(v,"TYPE","xmlhttp"),Va(m,v),m.m&&m.o&&cn(v,m.m,m.o),m.L&&(m.g.I=m.L);var E=m.g;m=m.ia,E.L=1,E.v=Ia(ri(v)),E.m=null,E.P=!0,qn(E,m)}n.Za=function(){this.C!=null&&(this.C=null,Po(this),ec(this),Ue(19))};function jo(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function rh(m,v){var E=null;if(m.g==v){jo(m),Ua(m),m.g=null;var M=2}else if(De(m.h,v))E=v.D,Re(m.h,v),M=1;else return;if(m.G!=0){if(v.o)if(M==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var X=m.B;M=Zi(),rt(M,new mt(M,E)),Oo(m)}else ih(m);else if(X=v.s,X==3||X==0&&0<v.X||!(M==1&&um(m,v)||M==2&&ec(m)))switch(E&&0<E.length&&(v=m.h,v.i=v.i.concat(E)),X){case 1:Fs(m,5);break;case 4:Fs(m,10);break;case 3:Fs(m,6);break;default:Fs(m,2)}}}function tc(m,v){let E=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(E*=2),E*v}function Fs(m,v){if(m.j.info("Error code "+v),v==2){var E=x(m.fb,m),M=m.Xa;const X=!M;M=new Se(M||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ca(M,"https"),Ia(M),X?Ma(M.toString(),E):Fi(M.toString(),E)}else Ue(2);m.G=0,m.l&&m.l.sa(v),ah(m),th(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function ah(m){if(m.G=0,m.ka=[],m.l){const v=$t(m.h);(v.length!=0||m.i.length!=0)&&(R(m.ka,v),R(m.ka,m.i),m.h.i.length=0,k(m.i),m.i.length=0),m.l.ra()}}function oh(m,v,E){var M=E instanceof Se?ri(E):new Se(E);if(M.g!="")v&&(M.g=v+"."+M.g),Tr(M,M.s);else{var X=u.location;M=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;var re=new Se(null);M&&Ca(re,M),v&&(re.g=v),X&&Tr(re,X),E&&(re.l=E),M=re}return E=m.D,v=m.ya,E&&v&&xt(M,E,v),xt(M,"VER",m.la),Va(m,M),M}function lh(m,v,E){if(v&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=m.Ca&&!m.pa?new ht(new Ar({eb:E})):new ht(m.pa),v.Ha(m.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}n=ch.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lo(){}Lo.prototype.g=function(m,v){return new Un(m,v)};function Un(m,v){Nt.call(this),this.g=new Mo(v),this.l=m,this.h=v&&v.messageUrlParams||null,m=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(m?m["X-WebChannel-Content-Type"]=v.messageContentType:m={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(m?m["X-WebChannel-Client-Profile"]=v.va:m={"X-WebChannel-Client-Profile":v.va}),this.g.S=m,(m=v&&v.Sb)&&!B(m)&&(this.g.m=m),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,m=this.h,m!==null&&v in m&&(m=this.h,v in m&&delete m[v])),this.j=new as(this)}A(Un,Nt),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Zl(this.g)},Un.prototype.o=function(m){var v=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.u&&(E={},E.__data__=ni(m),m=E);v.i.push(new Sr(v.Ya++,m)),v.G==3&&Oo(v)},Un.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,Un.aa.N.call(this)};function uh(m){pi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var v=m.__sm__;if(v){e:{for(const E in v){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,v=v!==null&&m in v?v[m]:void 0),this.data=v}else this.data=m}A(uh,pi);function hh(){Aa.call(this),this.status=1}A(hh,Aa);function as(m){this.g=m}A(as,ch),as.prototype.ua=function(){rt(this.g,"a")},as.prototype.ta=function(m){rt(this.g,new uh(m))},as.prototype.sa=function(m){rt(this.g,new hh)},as.prototype.ra=function(){rt(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,QE=function(){return new Lo},XE=function(){return Zi()},KE=yi,Hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Fd=_i,Sn.COMPLETE="complete",YE=Sn,Ta.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Zc=Ta,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,WE=ht}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const Nx="@firebase/firestore",kx="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new ky("@firebase/firestore");function gl(){return mo.logLevel}function Ee(n,...e){if(mo.logLevel<=Xe.DEBUG){const t=e.map(Dy);mo.debug(`Firestore (${Ul}): ${n}`,...t)}}function hr(n,...e){if(mo.logLevel<=Xe.ERROR){const t=e.map(Dy);mo.error(`Firestore (${Ul}): ${n}`,...t)}}function Nl(n,...e){if(mo.logLevel<=Xe.WARN){const t=e.map(Dy);mo.warn(`Firestore (${Ul}): ${n}`,...t)}}function Dy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ZE(n,i,t)}function ZE(n,e,t){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw hr(i),new Error(i)}function ft(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||ZE(e,r,i)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ks{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class tI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nI{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oa,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},u=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oa)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new JE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class iI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new iI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const i=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=aI(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Qe(n,e){return n<e?-1:n>e?1:0}function qp(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),o=e.charAt(i);if(r!==o)return mp(r)===mp(o)?Qe(r,o):mp(r)?1:-1}return Qe(n.length,e.length)}const oI=55296,lI=57343;function mp(n){const e=n.charCodeAt(0);return e>=oI&&e<=lI}function kl(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="__name__";class ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Oe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=ps.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const i=ps.isNumericId(e),r=ps.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?ps.extractNumericId(e).compare(ps.extractNumericId(t)):qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class Rt extends ps{construct(e,t,i){return new Rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Rt(t)}static emptyPath(){return new Rt([])}}const cI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends ps{construct(e,t,i){return new xn(e,t,i)}static isValidIdentifier(e){return cI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ix}static keyField(){return new xn([Ix])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new we(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new we(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(c=!c,r++):u!=="."||c?(i+=u,r++):(o(),r++)}if(o(),c)throw new we(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Rt.fromString(e))}static fromName(e){return new ke(Rt.fromString(e).popFirst(5))}static empty(){return new ke(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e,t){if(!t)throw new we(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uI(n,e,t,i){if(e===!0&&i===!0)throw new we(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dx(n){if(!ke.isDocumentKey(n))throw new we(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(ke.isDocumentKey(n))throw new we(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pf(n);throw new we(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vu(n,e){if(!tS(n))throw new we(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new we(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=-62135596800,Ox=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ox);return new It(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Px)throw new we(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ox}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Px;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Qt("string",It._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new It(0,0))}static max(){return new ze(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function hI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new ha(r,ke.empty(),e)}function dI(n){return new ha(n.readTime,n.key,pu)}class ha{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ha(ze.min(),ke.empty(),pu)}static max(){return new ha(ze.max(),ke.empty(),pu)}}function fI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==mI)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,i)=>{t(e)}))}static reject(e){return new me(((t,i)=>{i(e)}))}static waitFor(e){return new me(((t,i)=>{let r=0,o=0,c=!1;e.forEach((u=>{++r,u.next((()=>{++o,c&&o===r&&t()}),(d=>i(d)))})),c=!0,o===r&&t()}))}static or(e){let t=me.resolve(!1);for(const i of e)t=t.next((r=>r?me.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new me(((i,r)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((y=>{c[f]=y,++u,u===o&&i(c)}),(y=>r(y)))}}))}static doWhile(e,t){return new me(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}function pI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function jf(n){return n==null}function sf(n){return n===0&&1/n==-1/0}function yI(n){return typeof n=="number"&&Number.isInteger(n)&&!sf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="";function bI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jx(e)),e=_I(n.get(t),e);return jx(e)}function _I(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case nS:t+="";break;default:t+=o}}return t}function jx(n){return n+nS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??vn.RED,this.left=r??vn.EMPTY,this.right=o??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new vn(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return vn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vx(this.data.getIterator())}getIteratorFrom(e){return new Vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class Vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new fi([])}unionWith(e){let t=new on(xn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new sS("Invalid base64 string: "+o):o}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const vI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=vI.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fa(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="server_timestamp",aS="__type__",oS="__previous_value__",lS="__local_write_time__";function Oy(n){return(n?.mapValue?.fields||{})[aS]?.stringValue===rS}function Lf(n){const e=n.mapValue.fields[oS];return Oy(e)?Lf(e):e}function yu(n){const e=da(n.mapValue.fields[lS].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,i,r,o,c,u,d,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=y}}const rf="(default)";class bu{constructor(e,t){this.projectId=e,this.database=t||rf}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",wI="__max__",gd={mapValue:{}},uS="__vector__",af="value";function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Oy(n)?4:SI(n)?9007199254740991:EI(n)?10:11:Oe(28295,{value:n})}function As(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=da(r.timestampValue),u=da(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return fa(r.bytesValue).isEqual(fa(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return Bt(r.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Bt(r.integerValue)===Bt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Bt(r.doubleValue),u=Bt(o.doubleValue);return c===u?sf(c)===sf(u):isNaN(c)&&isNaN(u)}return!1})(n,e);case 9:return kl(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},u=o.mapValue.fields||{};if(Lx(c)!==Lx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!As(c[d],u[d])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function _u(n,e){return(n.values||[]).find((t=>As(t,e)))!==void 0}function Cl(n,e){if(n===e)return 0;const t=ma(n),i=ma(e);if(t!==i)return Qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Bt(o.integerValue||o.doubleValue),d=Bt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return Ux(n.timestampValue,e.timestampValue);case 4:return Ux(yu(n),yu(e));case 5:return qp(n.stringValue,e.stringValue);case 6:return(function(o,c){const u=fa(o),d=fa(c);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const y=Qe(u[f],d[f]);if(y!==0)return y}return Qe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Qe(Bt(o.latitude),Bt(c.latitude));return u!==0?u:Qe(Bt(o.longitude),Bt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Fx(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[af]?.arrayValue,y=d[af]?.arrayValue,_=Qe(f?.values?.length||0,y?.values?.length||0);return _!==0?_:Fx(f,y)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===gd.mapValue&&c===gd.mapValue)return 0;if(o===gd.mapValue)return 1;if(c===gd.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const x=qp(d[_],y[_]);if(x!==0)return x;const w=Cl(u[d[_]],f[y[_]]);if(w!==0)return w}return Qe(d.length,y.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function Ux(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=da(n),i=da(e),r=Qe(t.seconds,i.seconds);return r!==0?r:Qe(t.nanos,i.nanos)}function Fx(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=Cl(t[r],i[r]);if(o)return o}return Qe(t.length,i.length)}function Il(n){return Gp(n)}function Gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=da(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=Gp(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${Gp(t.fields[c])}`;return r+"}"})(n.mapValue):Oe(61005,{value:n})}function zd(n){switch(ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(n);return e?16+zd(e):16;case 5:return 2*n.stringValue.length;case 6:return fa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+zd(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return va(i.fields,((o,c)=>{r+=o.length+zd(c)})),r})(n.mapValue);default:throw Oe(13486,{value:n})}}function zx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $p(n){return!!n&&"integerValue"in n}function jy(n){return!!n&&"arrayValue"in n}function Bx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bd(n){return!!n&&"mapValue"in n}function EI(n){return(n?.mapValue?.fields||{})[cS]?.stringValue===uS}function ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return va(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ru(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(n.arrayValue.values[t]);return e}return{...n}}function SI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=xn.emptyPath(),i={},r=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,i,r),i={},r=[],t=u.popLast()}c?i[u.lastSegment()]=ru(c):r.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());Bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Bd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){va(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Xn(ru(this.value))}}function hS(n){const e=[];return va(n.fields,((t,i)=>{const r=new xn([t]);if(Bd(i)){const o=hS(i.mapValue).fields;if(o.length===0)e.push(r);else for(const c of o)e.push(r.child(c))}else e.push(r)})),new fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t,i,r,o,c,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Cn(e,0,ze.min(),ze.min(),ze.min(),Xn.empty(),0)}static newFoundDocument(e,t,i,r){return new Cn(e,1,t,ze.min(),i,r,0)}static newNoDocument(e,t){return new Cn(e,2,t,ze.min(),ze.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,ze.min(),ze.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.position=e,this.inclusive=t}}function qx(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],c=n.position[r];if(o.field.isKeyField()?i=ke.comparator(ke.fromName(c.referenceValue),t.key):i=Cl(c,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function TI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{}class Xt extends dS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new RI(e,t,i):t==="array-contains"?new CI(e,i):t==="in"?new II(e,i):t==="not-in"?new DI(e,i):t==="array-contains-any"?new MI(e,i):new Xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new NI(e,i):new kI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cl(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(Cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends dS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ki(e,t)}matches(e){return fS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fS(n){return n.op==="and"}function mS(n){return AI(n)&&fS(n)}function AI(n){for(const e of n.filters)if(e instanceof Ki)return!1;return!0}function Wp(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Il(n.value);if(mS(n))return n.filters.map((e=>Wp(e))).join(",");{const e=n.filters.map((t=>Wp(t))).join(",");return`${n.op}(${e})`}}function gS(n,e){return n instanceof Xt?(function(i,r){return r instanceof Xt&&i.op===r.op&&i.field.isEqual(r.field)&&As(i.value,r.value)})(n,e):n instanceof Ki?(function(i,r){return r instanceof Ki&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,c,u)=>o&&gS(c,r.filters[u])),!0):!1})(n,e):void Oe(19439)}function pS(n){return n instanceof Xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Il(t.value)}`})(n):n instanceof Ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(pS).join(" ,")+"}"})(n):"Filter"}class RI extends Xt{constructor(e,t,i){super(e,t,i),this.key=ke.fromName(i.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class NI extends Xt{constructor(e,t){super(e,"in",t),this.keys=yS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kI extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=yS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yS(n,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class CI extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jy(t)&&_u(t.arrayValue,this.value)}}class II extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class DI extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_u(this.value.arrayValue,t)}}class MI extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>_u(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t=null,i=[],r=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function $x(n,e=null,t=[],i=[],r=null,o=null,c=null){return new PI(n,e,t,i,r,o,c)}function Ly(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Wp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),jf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Il(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Il(i))).join(",")),e.Te=t}return e.Te}function Vy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gx(n.startAt,e.startAt)&&Gx(n.endAt,e.endAt)}function Yp(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t=null,i=[],r=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OI(n,e,t,i,r,o,c,u){return new Bl(n,e,t,i,r,o,c,u)}function bS(n){return new Bl(n)}function Wx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _S(n){return n.collectionGroup!==null}function au(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new on(xn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new vu(o,i))})),t.has(xn.keyField().canonicalString())||e.Ie.push(new vu(xn.keyField(),i))}return e.Ie}function bs(n){const e=Be(n);return e.Ee||(e.Ee=jI(e,au(n))),e.Ee}function jI(n,e){if(n.limitType==="F")return $x(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new vu(r.field,o)}));const t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return $x(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Kp(n,e){const t=n.filters.concat([e]);return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xp(n,e,t){return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vf(n,e){return Vy(bs(n),bs(e))&&n.limitType===e.limitType}function vS(n){return`${Ly(bs(n))}|lt:${n.limitType}`}function pl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>pS(r))).join(", ")}]`),jf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Il(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Il(r))).join(",")),`Target(${i})`})(bs(n))}; limitType=${n.limitType})`}function Uf(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ke.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of au(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(c,u,d){const f=qx(c,u,d);return c.inclusive?f<=0:f<0})(i.startAt,au(i),r)||i.endAt&&!(function(c,u,d){const f=qx(c,u,d);return c.inclusive?f>=0:f>0})(i.endAt,au(i),r))})(n,e)}function LI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xS(n){return(e,t)=>{let i=!1;for(const r of au(n)){const o=VI(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function VI(n,e,t){const i=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Cl(d,f):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return iS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new jt(ke.comparator);function dr(){return UI}const wS=new jt(ke.comparator);function Jc(...n){let e=wS;for(const t of n)e=e.insert(t.key,t);return e}function ES(n){let e=wS;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function oo(){return ou()}function SS(){return ou()}function ou(){return new wo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const FI=new jt(ke.comparator),zI=new on(ke.comparator);function Ze(...n){let e=zI;for(const t of n)e=e.add(t);return e}const BI=new on(Qe);function HI(){return BI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function TS(n){return{integerValue:""+n}}function qI(n,e){return yI(e)?TS(e):Uy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function GI(n,e,t){return n instanceof lf?(function(r,o){const c={fields:{[aS]:{stringValue:rS},[lS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Oy(o)&&(o=Lf(o)),o&&(c.fields[oS]=o),{mapValue:c}})(t,e):n instanceof xu?RS(n,e):n instanceof wu?NS(n,e):(function(r,o){const c=AS(r,o),u=Yx(c)+Yx(r.Ae);return $p(c)&&$p(r.Ae)?TS(u):Uy(r.serializer,u)})(n,e)}function $I(n,e,t){return n instanceof xu?RS(n,e):n instanceof wu?NS(n,e):t}function AS(n,e){return n instanceof cf?(function(i){return $p(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class lf extends Ff{}class xu extends Ff{constructor(e){super(),this.elements=e}}function RS(n,e){const t=kS(e);for(const i of n.elements)t.some((r=>As(r,i)))||t.push(i);return{arrayValue:{values:t}}}class wu extends Ff{constructor(e){super(),this.elements=e}}function NS(n,e){let t=kS(e);for(const i of n.elements)t=t.filter((r=>!As(r,i)));return{arrayValue:{values:t}}}class cf extends Ff{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yx(n){return Bt(n.integerValue||n.doubleValue)}function kS(n){return jy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function WI(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof xu&&r instanceof xu||i instanceof wu&&r instanceof wu?kl(i.elements,r.elements,As):i instanceof cf&&r instanceof cf?As(i.Ae,r.Ae):i instanceof lf&&r instanceof lf})(n.transform,e.transform)}class YI{constructor(e,t){this.version=e,this.transformResults=t}}class Yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zf{}function CS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fy(n.key,Yi.none()):new Uu(n.key,n.data,Yi.none());{const t=n.data,i=Xn.empty();let r=new on(xn.comparator);for(let o of e.fields)if(!r.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new xa(n.key,i,new fi(r.toArray()),Yi.none())}}function KI(n,e,t){n instanceof Uu?(function(r,o,c){const u=r.value.clone(),d=Xx(r.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,e,t):n instanceof xa?(function(r,o,c){if(!Hd(r.precondition,o))return void o.convertToUnknownDocument(c.version);const u=Xx(r.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(IS(r)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function lu(n,e,t,i){return n instanceof Uu?(function(o,c,u,d){if(!Hd(o.precondition,c))return u;const f=o.value.clone(),y=Qx(o.fieldTransforms,d,c);return f.setAll(y),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof xa?(function(o,c,u,d){if(!Hd(o.precondition,c))return u;const f=Qx(o.fieldTransforms,d,c),y=c.data;return y.setAll(IS(o)),y.setAll(f),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(o,c,u){return Hd(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,e,t)}function XI(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=AS(i.transform,r||null);o!=null&&(t===null&&(t=Xn.empty()),t.set(i.field,o))}return t||null}function Kx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&kl(i,r,((o,c)=>WI(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uu extends zf{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xa extends zf{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Xx(n,e,t){const i=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],c=o.transform,u=e.data.field(o.field);i.set(o.field,$I(c,u,t[r]))}return i}function Qx(n,e,t){const i=new Map;for(const r of n){const o=r.transform,c=t.data.field(r.field);i.set(r.field,GI(o,c,e))}return i}class Fy extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QI extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&KI(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=SS();return this.mutations.forEach((r=>{const o=e.get(r.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(r.key)?null:u;const d=CS(c,u);d!==null&&i.set(r.key,d),c.isValidDocument()||c.convertToNoDocument(ze.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((t,i)=>Kx(t,i)))&&kl(this.baseMutations,e.baseMutations,((t,i)=>Kx(t,i)))}}class zy{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ft(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return FI})();const o=e.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new zy(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,st;function tD(n){switch(n){case de.OK:return Oe(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function DS(n){if(n===void 0)return hr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Kt.OK:return de.OK;case Kt.CANCELLED:return de.CANCELLED;case Kt.UNKNOWN:return de.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return de.INTERNAL;case Kt.UNAVAILABLE:return de.UNAVAILABLE;case Kt.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Kt.NOT_FOUND:return de.NOT_FOUND;case Kt.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Kt.ABORTED:return de.ABORTED;case Kt.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Kt.DATA_LOSS:return de.DATA_LOSS;default:return Oe(39323,{code:n})}}(st=Kt||(Kt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new aa([4294967295,4294967295],0);function Zx(n){const e=nD().encode(n),t=new $E;return t.update(e),new Uint8Array(t.digest())}function Jx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new aa([t,i],0),new aa([r,o],0)]}class By{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(i<0)throw new eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(aa.fromNumber(i)));return r.compare(iD)===1&&(r=new aa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Zx(e),[i,r]=Jx(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new By(o,r,t);return i.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=Zx(e),[i,r]=Jx(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Bf(ze.min(),r,new jt(Qe),dr(),Ze())}}class Fu{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Fu(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class MS{constructor(e,t){this.targetId=e,this.Ce=t}}class PS{constructor(e,t,i=wn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class ew{constructor(){this.ve=0,this.Fe=tw(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Oe(38017,{changeType:o})}})),new Fu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=tw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sD{constructor(e){this.Ge=e,this.ze=new Map,this.je=dr(),this.Je=pd(),this.He=pd(),this.Ye=new jt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Yp(o))if(i===0){const c=new ke(o.path);this.et(t,c,Cn.newNoDocument(c,ze.min()))}else ft(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let c,u;try{c=fa(i).toUint8Array()}catch(d){if(d instanceof sS)return Nl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new By(c,r,o)}catch(d){return Nl(d instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&Yp(u.target)){const d=new ke(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,Cn.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let i=Ze();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const r=new Bf(e,t,this.Ye,this.je,i);return this.je=dr(),this.Je=pd(),this.He=pd(),this.Ye=new jt(Qe),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ew,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new on(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new on(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ew),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pd(){return new jt(ke.comparator)}function tw(){return new jt(ke.comparator)}const rD={asc:"ASCENDING",desc:"DESCENDING"},aD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oD={and:"AND",or:"OR"};class lD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qp(n,e){return n.useProto3Json||jf(e)?e:{value:e}}function uf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cD(n,e){return uf(n,e.toTimestamp())}function _s(n){return ft(!!n,49232),ze.fromTimestamp((function(t){const i=da(t);return new It(i.seconds,i.nanos)})(n))}function Hy(n,e){return Zp(n,e).canonicalString()}function Zp(n,e){const t=(function(r){return new Rt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jS(n){const e=Rt.fromString(n);return ft(zS(e),10190,{key:e.toString()}),e}function Jp(n,e){return Hy(n.databaseId,e.path)}function gp(n,e){const t=jS(e);if(t.get(1)!==n.databaseId.projectId)throw new we(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(VS(t))}function LS(n,e){return Hy(n.databaseId,e)}function uD(n){const e=jS(n);return e.length===4?Rt.emptyPath():VS(e)}function ey(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VS(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nw(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function hD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Oe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,y){return f.useProto3Json?(ft(y===void 0||typeof y=="string",58123),wn.fromBase64String(y||"")):(ft(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),wn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const y=f.code===void 0?de.UNKNOWN:DS(f.code);return new we(y,f.message||"")})(c);t=new PS(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=gp(n,i.document.name),o=_s(i.document.updateTime),c=i.document.createTime?_s(i.document.createTime):ze.min(),u=new Xn({mapValue:{fields:i.document.fields}}),d=Cn.newFoundDocument(r,o,c,u),f=i.targetIds||[],y=i.removedTargetIds||[];t=new qd(f,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=gp(n,i.document),o=i.readTime?_s(i.readTime):ze.min(),c=Cn.newNoDocument(r,o),u=i.removedTargetIds||[];t=new qd([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=gp(n,i.document),o=i.removedTargetIds||[];t=new qd([],o,r,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new eD(r,o),u=i.targetId;t=new MS(u,c)}}return t}function dD(n,e){let t;if(e instanceof Uu)t={update:nw(n,e.key,e.value)};else if(e instanceof Fy)t={delete:Jp(n,e.key)};else if(e instanceof xa)t={update:nw(n,e.key,e.data),updateMask:xD(e.fieldMask)};else{if(!(e instanceof QI))return Oe(16599,{Vt:e.type});t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const u=c.transform;if(u instanceof lf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof xu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof wu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof cf)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Oe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:cD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Oe(27497)})(n,e.precondition)),t}function fD(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(r,o){let c=r.updateTime?_s(r.updateTime):_s(o);return c.isEqual(ze.min())&&(c=_s(o)),new YI(c,r.transformResults||[])})(t,e)))):[]}function mD(n,e){return{documents:[LS(n,e.path)]}}function gD(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LS(n,r);const o=(function(f){if(f.length!==0)return FS(Ki.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((y=>(function(x){return{field:yl(x.field),direction:bD(x.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Qp(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function pD(n){let e=uD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ft(i===1,65062);const y=t.from[0];y.allDescendants?r=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(_){const x=US(_);return x instanceof Ki&&mS(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((x=>(function(A){return new vu(bl(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(x)))})(t.orderBy));let u=null;t.limit&&(u=(function(_){let x;return x=typeof _=="object"?_.value:_,jf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(_){const x=!!_.before,w=_.values||[];return new of(w,x)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const x=!_.before,w=_.values||[];return new of(w,x)})(t.endAt)),OI(e,r,c,o,u,"F",d,f)}function yD(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function US(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bl(t.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=bl(t.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bl(t.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bl(t.unaryFilter.field);return Xt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xt.create(bl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ki.create(t.compositeFilter.filters.map((i=>US(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function bD(n){return rD[n]}function _D(n){return aD[n]}function vD(n){return oD[n]}function yl(n){return{fieldPath:n.canonicalString()}}function bl(n){return xn.fromServerFormat(n.fieldPath)}function FS(n){return n instanceof Xt?(function(t){if(t.op==="=="){if(Hx(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(Bx(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hx(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(Bx(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:_D(t.op),value:t.value}}})(n):n instanceof Ki?(function(t){const i=t.getFilters().map((r=>FS(r)));return i.length===1?i[0]:{compositeFilter:{op:vD(t.op),filters:i}}})(n):Oe(54877,{filter:n})}function xD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,i,r,o=ze.min(),c=ze.min(),u=wn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.yt=e}}function ED(n){const e=pD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.Cn=new TD}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(ha.min())}updateCollectionGroup(e,t,i){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class TD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new on(Rt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new on(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BS=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(BS,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="LruGarbageCollector",AD=1048576;function rw([n,e],[t,i]){const r=Qe(n,t);return r===0?Qe(e,i):r}class RD{constructor(e){this.Ir=e,this.buffer=new on(rw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();rw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ND{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zl(t)?Ee(sw,"Ignoring IndexedDB error during garbage collection: ",t):await Fl(t)}await this.Vr(3e5)}))}}class kD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(Of.ce);const i=new RD(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(iw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,o,c,u,d,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(i=_,u=Date.now(),this.removeTargets(e,i,t)))).next((_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(f=Date.now(),gl()<=Xe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${r} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${_} documents in `+(f-d)+`ms
Total Duration: ${f-y}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function CD(n,e){return new kD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.changes=new wo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?me.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&lu(i.mutation,r,fi.empty(),It.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const r=oo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let c=Jc();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=oo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,i,r){let o=dr();const c=ou(),u=(function(){return ou()})();return t.forEach(((d,f)=>{const y=i.get(f.key);r.has(f.key)&&(y===void 0||y.mutation instanceof xa)?o=o.insert(f.key,f):y!==void 0?(c.set(f.key,y.mutation.getFieldMask()),lu(y.mutation,f,y.mutation.getFieldMask(),It.now())):c.set(f.key,fi.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,y)=>c.set(f,y))),t.forEach(((f,y)=>u.set(f,new DD(y,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=ou();let r=new jt(((c,u)=>c-u)),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let y=i.get(d)||fi.empty();y=u.applyToLocalView(f,y),i.set(d,y);const _=(r.get(u.batchId)||Ze()).add(d);r=r.insert(u.batchId,_)}))})).next((()=>{const c=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,y=d.value,_=SS();y.forEach((x=>{if(!o.has(x)){const w=CS(t.get(x),i.get(x));w!==null&&_.set(x,w),o=o.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,_))}return me.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(c){return ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):me.resolve(oo());let u=pu,d=o;return c.next((f=>me.forEach(f,((y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(y)?me.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{d=d.insert(y,x)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ze()))).next((y=>({batchId:u,changes:ES(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((i=>{let r=Jc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let c=Jc();return this.indexManager.getCollectionParents(e,o).next((u=>me.forEach(u,(d=>{const f=(function(_,x){return new Bl(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((y=>{y.forEach(((_,x)=>{c=c.insert(_,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((c=>{o.forEach(((d,f)=>{const y=f.getKey();c.get(y)===null&&(c=c.insert(y,Cn.newInvalidDocument(y)))}));let u=Jc();return c.forEach(((d,f)=>{const y=o.get(d);y!==void 0&&lu(y.mutation,f,fi.empty(),It.now()),Uf(t,f)&&(u=u.insert(d,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:_s(r.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:ED(r.bundledQuery),readTime:_s(r.readTime)}})(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.overlays=new jt(ke.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const i=oo();return me.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.St(e,t,o)})),me.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),me.resolve()}getOverlaysForCollection(e,t,i){const r=oo(),o=t.length+1,c=new ke(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return me.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new jt(((f,y)=>f-y));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let y=o.get(f.largestBatchId);y===null&&(y=oo(),o=o.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const u=oo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,y)=>u.set(f,y))),!(u.size()>=r)););return me.resolve(u)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new JI(t,i));let o=this.qr.get(t);o===void 0&&(o=Ze(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Qr=new on(mn.$r),this.Ur=new on(mn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new mn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new mn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ke(new Rt([])),i=new mn(t,e),r=new mn(t,e+1),o=[];return this.Ur.forEachInRange([i,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new Rt([])),i=new mn(t,e),r=new mn(t,e+1);let o=Ze();return this.Ur.forEachInRange([i,r],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new mn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class mn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new on(mn.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ZI(o,t,i,r);this.mutationQueue.push(c);for(const u of r)this.Zr=this.Zr.add(new mn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),o=r<0?0:r;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Py:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new mn(t,0),r=new mn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(c=>{const u=this.Xr(c.Yr);o.push(u)})),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new on(Qe);return t.forEach((r=>{const o=new mn(r,0),c=new mn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{i=i.add(u.Yr)}))})),me.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;ke.isDocumentKey(o)||(o=o.child(""));const c=new mn(new ke(o),0);let u=new on(Qe);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.Yr)),!0)}),c),me.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return me.forEach(t.mutations,(r=>{const o=new mn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new mn(t,0),r=this.Zr.firstAfterOrEqual(i);return me.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.ri=e,this.docs=(function(){return new jt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return me.resolve(i?i.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let i=dr();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Cn.newInvalidDocument(r))})),me.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=dr();const c=t.path,u=new ke(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:y}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||fI(dI(y),i)<=0||(r.has(y.key)||Uf(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Oe(9500)}ii(e,t){return me.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new UD(this)}getSize(e){return me.resolve(this.size)}}class UD extends ID{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.persistence=e,this.si=new wo((t=>Ly(t)),Vy),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new qy,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),me.waitFor(o).next((()=>r))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return me.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),me.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((c=>{o.push(r.markPotentiallyOrphaned(e,c))})),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return me.resolve(i)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new jD,this.referenceDelegate=e(this),this.Pi=new FD(this),this.indexManager=new SD,this.remoteDocumentCache=(function(r){return new VD(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new wD(t),this.Ii=new PD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new LD(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Ee("MemoryPersistence","Starting transaction:",e);const r=new zD(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return me.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class zD extends gI{constructor(e){super(),this.currentSequenceNumber=e}}class Gy{constructor(e){this.persistence=e,this.Ri=new qy,this.Vi=null}static mi(e){return new Gy(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),me.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(i=>{const r=ke.fromPath(i);return this.gi(e,r).next((o=>{o||t.removeEntry(r,ze.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.pi=new wo((i=>bI(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=CD(this,t)}static mi(e,t){return new hf(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return me.forEach(this.pi,((i,r)=>this.br(e,i,r).next((o=>o?me.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((u=>{u||(i++,o.removeEntry(c,ze.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),me.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zd(e.data.value)),t}br(e,t,i){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return me.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Ze(),r=Ze();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new $y(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jk()?8:pI(Mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,r,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new BD;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(gl()<=Xe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(gl()<=Xe.DEBUG&&Ee("QueryEngine","Query:",pl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(gl()<=Xe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bs(t))):me.resolve())}ys(e,t){if(Wx(t))return me.resolve(null);let i=bs(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Xp(t,null,"F"),i=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Ze(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,Xp(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,i,r){return Wx(t)||r.isEqual(ze.min())?me.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,i,r)?me.resolve(null):(gl()<=Xe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pl(t)),this.vs(e,c,t,hI(r,pu)).next((u=>u)))}))}Ds(e,t){let i=new on(xS(e));return t.forEach(((r,o)=>{Uf(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,i){return gl()<=Xe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",pl(t)),this.ps.getDocumentsMatchingQuery(e,t,ha.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LocalStore",qD=3e8;class GD{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new jt(Qe),this.xs=new wo((o=>Ly(o)),Vy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $D(n,e,t,i){return new GD(n,e,t,i)}async function qS(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],u=[];let d=Ze();for(const f of r){c.push(f.batchId);for(const y of f.mutations)d=d.add(y.key)}for(const f of o){u.push(f.batchId);for(const y of f.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(i,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function WD(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,y){const _=f.batch,x=_.keys();let w=me.resolve();return x.forEach((A=>{w=w.next((()=>y.getEntry(d,A))).next((k=>{const R=f.docVersions.get(A);ft(R!==null,48541),k.version.compareTo(R)<0&&(_.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),y.addEntry(k)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let d=Ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function GS(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YD(n,e){const t=Be(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const u=[];e.targetChanges.forEach(((y,_)=>{const x=r.get(_);if(!x)return;u.push(t.Pi.removeMatchingKeys(o,y.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,y.addedDocuments,_))));let w=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?w=w.withResumeToken(wn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),r=r.insert(_,w),(function(k,R,j){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=qD?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,w,y)&&u.push(t.Pi.updateTargetData(o,w))}));let d=dr(),f=Ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(KD(o,c,e.documentUpdates).next((y=>{d=y.ks,f=y.qs}))),!i.isEqual(ze.min())){const y=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(y)}return me.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=r,o)))}function KD(n,e,t){let i=Ze(),r=Ze();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let c=dr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(ze.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):Ee(Wy,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:r}}))}function XD(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Py),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function QD(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((o=>o?(r=o,me.resolve(r)):t.Pi.allocateTargetId(i).next((c=>(r=new Jr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ty(n,e,t){const i=Be(n),r=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!zl(c))throw c;Ee(Wy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function aw(n,e,t){const i=Be(n);let r=ze.min(),o=Ze();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,y){const _=Be(d),x=_.xs.get(y);return x!==void 0?me.resolve(_.Ms.get(x)):_.Pi.getTargetData(f,y)})(i,c,bs(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?r:ze.min(),t?o:Ze()))).next((u=>(ZD(i,LI(e),u),{documents:u,Qs:o})))))}function ZD(n,e,t){let i=n.Os.get(e)||ze.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}class ow{constructor(){this.activeTargetIds=HI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JD{constructor(){this.Mo=new ow,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ow,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="ConnectivityMonitor";class cw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(lw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(lw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function ny(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RestConnection",tM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===rf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,o){const c=ny(),u=this.zo(e,t.toUriEncodedString());Ee(pp,`Sending RPC '${e}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,r,o);const{host:f}=new URL(u),y=vo(f);return this.Jo(e,u,d,i,y).then((_=>(Ee(pp,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Nl(pp,`RPC '${e}' ${c} failed with error: `,_,"url: ",u,"request:",i),_}))}Ho(e,t,i,r,o,c){return this.Go(e,t,i,r,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const i=tM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class sM extends nM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,o){const c=ny();return new Promise(((u,d)=>{const f=new WE;f.setWithCredentials(!0),f.listenOnce(YE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Fd.NO_ERROR:const _=f.getResponseJson();Ee(Rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),u(_);break;case Fd.TIMEOUT:Ee(Rn,`RPC '${e}' ${c} timed out`),d(new we(de.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:const x=f.getStatus();if(Ee(Rn,`RPC '${e}' ${c} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const k=(function(j){const B=j.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(B)>=0?B:de.UNKNOWN})(A.status);d(new we(k,A.message))}else d(new we(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new we(de.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ee(Rn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(r);Ee(Rn,`RPC '${e}' ${c} sending request:`,r),f.send(t,"POST",y,i,15)}))}T_(e,t,i){const r=ny(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QE(),u=XE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const y=o.join("");Ee(Rn,`Creating RPC '${e}' stream ${r}: ${y}`,d);const _=c.createWebChannel(y,d);this.I_(_);let x=!1,w=!1;const A=new iM({Yo:R=>{w?Ee(Rn,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(x||(Ee(Rn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),x=!0),Ee(Rn,`RPC '${e}' stream ${r} sending:`,R),_.send(R))},Zo:()=>_.close()}),k=(R,j,B)=>{R.listen(j,(W=>{try{B(W)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return k(_,Zc.EventType.OPEN,(()=>{w||(Ee(Rn,`RPC '${e}' stream ${r} transport opened.`),A.o_())})),k(_,Zc.EventType.CLOSE,(()=>{w||(w=!0,Ee(Rn,`RPC '${e}' stream ${r} transport closed`),A.a_(),this.E_(_))})),k(_,Zc.EventType.ERROR,(R=>{w||(w=!0,Nl(Rn,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new we(de.UNAVAILABLE,"The operation could not be completed")))})),k(_,Zc.EventType.MESSAGE,(R=>{if(!w){const j=R.data[0];ft(!!j,16349);const B=j,W=B?.error||B[0]?.error;if(W){Ee(Rn,`RPC '${e}' stream ${r} received error:`,W);const Z=W.status;let $=(function(I){const T=Kt[I];if(T!==void 0)return DS(T)})(Z),le=W.message;$===void 0&&($=de.INTERNAL,le="Unknown error status: "+Z+" with message "+W.message),w=!0,A.a_(new we($,le)),_.close()}else Ee(Rn,`RPC '${e}' stream ${r} received:`,j),A.u_(j)}})),k(u,KE.STAT_EVENT,(R=>{R.stat===Hp.PROXY?Ee(Rn,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===Hp.NOPROXY&&Ee(Rn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){return new lD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="PersistentStream";class WS{constructor(e,t,i,r,o,c,u,d){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new we(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ee(uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rM extends WS{constructor(e,t,i,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=hD(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ze.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?_s(c.readTime):ze.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ey(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=Yp(d)?{documents:mD(o,d)}:{query:gD(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=OS(o,c.resumeToken);const f=Qp(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ze.min())>0){u.readTime=uf(o,c.snapshotVersion.toTimestamp());const f=Qp(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const i=yD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ey(this.serializer),t.removeTarget=e,this.q_(t)}}class aM extends WS{constructor(e,t,i,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fD(e.writeResults,e.commitTime),i=_s(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ey(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>dD(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{}class lM extends oM{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new we(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,Zp(t,i),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(de.UNKNOWN,o.toString())}))}Ho(e,t,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,Zp(t,i),r,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(t),this.aa=!1):Ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class uM{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Eo(this)&&(Ee(po,"Restarting streams for network reachability change."),await(async function(d){const f=Be(d);f.Ea.add(4),await zu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await qf(f)})(this))}))})),this.Ra=new cM(i,r)}}async function qf(n){if(Eo(n))for(const e of n.da)await e(!0)}async function zu(n){for(const e of n.da)await e(!1)}function YS(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Qy(t)?Xy(t):Hl(t).O_()&&Ky(t,e))}function Yy(n,e){const t=Be(n),i=Hl(t);t.Ia.delete(e),i.O_()&&KS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Eo(t)&&t.Ra.set("Unknown"))}function Ky(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hl(n).Y_(e)}function KS(n,e){n.Va.Ue(e),Hl(n).Z_(e)}function Xy(n){n.Va=new sD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Hl(n).start(),n.Ra.ua()}function Qy(n){return Eo(n)&&!Hl(n).x_()&&n.Ia.size>0}function Eo(n){return Be(n).Ea.size===0}function XS(n){n.Va=void 0}async function hM(n){n.Ra.set("Online")}async function dM(n){n.Ia.forEach(((e,t)=>{Ky(n,e)}))}async function fM(n,e){XS(n),Qy(n)?(n.Ra.ha(e),Xy(n)):n.Ra.set("Unknown")}async function mM(n,e,t){if(n.Ra.set("Online"),e instanceof PS&&e.state===2&&e.cause)try{await(async function(r,o){const c=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,c),r.Ia.delete(u),r.Va.removeTarget(u))})(n,e)}catch(i){Ee(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await df(n,i)}else if(e instanceof qd?n.Va.Ze(e):e instanceof MS?n.Va.st(e):n.Va.tt(e),!t.isEqual(ze.min()))try{const i=await GS(n.localStore);t.compareTo(i)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(f);y&&o.Ia.set(f,y.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(wn.EMPTY_BYTE_STRING,y.snapshotVersion)),KS(o,d);const _=new Jr(y.target,d,f,y.sequenceNumber);Ky(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(i){Ee(po,"Failed to raise snapshot:",i),await df(n,i)}}async function df(n,e,t){if(!zl(e))throw e;n.Ea.add(1),await zu(n),n.Ra.set("Offline"),t||(t=()=>GS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ee(po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qf(n)}))}function QS(n,e){return e().catch((t=>df(n,t,e)))}async function Gf(n){const e=Be(n),t=ga(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;gM(e);)try{const r=await XD(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,pM(e,r)}catch(r){await df(e,r)}ZS(e)&&JS(e)}function gM(n){return Eo(n)&&n.Ta.length<10}function pM(n,e){n.Ta.push(e);const t=ga(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(n){return Eo(n)&&!ga(n).x_()&&n.Ta.length>0}function JS(n){ga(n).start()}async function yM(n){ga(n).ra()}async function bM(n){const e=ga(n);for(const t of n.Ta)e.ea(t.mutations)}async function _M(n,e,t){const i=n.Ta.shift(),r=zy.from(i,e,t);await QS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Gf(n)}async function vM(n,e){e&&ga(n).X_&&await(async function(i,r){if((function(c){return tD(c)&&c!==de.ABORTED})(r.code)){const o=i.Ta.shift();ga(i).B_(),await QS(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Gf(i)}})(n,e),ZS(n)&&JS(n)}async function hw(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Ee(po,"RemoteStore received new credentials");const i=Eo(t);t.Ea.add(3),await zu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function xM(n,e){const t=Be(n);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function Hl(n){return n.ma||(n.ma=(function(t,i,r){const o=Be(t);return o.sa(),new rM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:hM.bind(null,n),t_:dM.bind(null,n),r_:fM.bind(null,n),H_:mM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Qy(n)?Xy(n):n.Ra.set("Unknown")):(await n.ma.stop(),XS(n))}))),n.ma}function ga(n){return n.fa||(n.fa=(function(t,i,r){const o=Be(t);return o.sa(),new aM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:yM.bind(null,n),r_:vM.bind(null,n),ta:bM.bind(null,n),na:_M.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ee(po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const c=Date.now()+i,u=new Zy(e,t,c,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(n,e){if(hr("AsyncQueue",`${e}: ${n}`),zl(n))return new we(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ke.comparator(t.key,i.key):(t,i)=>ke.comparator(t.key,i.key),this.keyedMap=Jc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.ga=new jt(ke.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ml{constructor(e,t,i,r,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new Ml(e,t,vl.emptySet(t),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EM{constructor(){this.queries=fw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Be(t),o=r.queries;r.queries=fw(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(i)}))})(this,new we(de.ABORTED,"Firestore shutting down"))}}function fw(){return new wo((n=>vS(n)),Vf)}async function SM(n,e){const t=Be(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new wM,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const u=Jy(c,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&e0(t)}async function TM(n,e){const t=Be(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function AM(n,e){const t=Be(n);let i=!1;for(const r of e){const o=r.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(r)&&(i=!0);c.wa=r}}i&&e0(t)}function RM(n,e,t){const i=Be(n),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);i.queries.delete(e)}function e0(n){n.Ca.forEach((e=>{e.next()}))}var iy,mw;(mw=iy||(iy={})).Ma="default",mw.Cache="cache";class NM{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==iy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class kM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=xS(e),this.tu=new vl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new dw,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((y,_)=>{const x=r.get(y),w=Uf(this.query,_)?_:null,A=!!x&&this.mutatedKeys.has(x.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;x&&w?x.data.isEqual(w.data)?A!==k&&(i.track({type:3,doc:w}),R=!0):this.su(x,w)||(i.track({type:2,doc:w}),R=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!x&&w?(i.track({type:0,doc:w}),R=!0):x&&!w&&(i.track({type:1,doc:x}),R=!0,(d||f)&&(u=!0)),R&&(w?(c=c.add(w),o=k?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,_)=>(function(w,A){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:R})}};return k(w)-k(A)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(i),r=r??!1;const u=t&&!r?this._u():[],d=this.Xa.size===0&&this.current&&!r?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new Ml(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const t0="SyncEngine";class CM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IM{constructor(e){this.key=e,this.hu=!1}}class DM{constructor(e,t,i,r,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new wo((u=>vS(u)),Vf),this.Iu=new Map,this.Eu=new Set,this.du=new jt(ke.comparator),this.Au=new Map,this.Ru=new qy,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MM(n,e,t=!0){const i=oT(n);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await nT(i,e,t,!0),r}async function PM(n,e){const t=oT(n);await nT(t,e,!0,!1)}async function nT(n,e,t,i){const r=await QD(n.localStore,bs(e)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let u;return i&&(u=await OM(n,e,o,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&YS(n.remoteStore,r),u}async function OM(n,e,t,i,r){n.pu=(_,x,w)=>(async function(k,R,j,B){let W=R.view.ru(j);W.Cs&&(W=await aw(k.localStore,R.query,!1).then((({documents:P})=>R.view.ru(P,W))));const Z=B&&B.targetChanges.get(R.targetId),$=B&&B.targetMismatches.get(R.targetId)!=null,le=R.view.applyChanges(W,k.isPrimaryClient,Z,$);return pw(k,R.targetId,le.au),le.snapshot})(n,_,x,w);const o=await aw(n.localStore,e,!0),c=new kM(e,o.Qs),u=c.ru(o.documents),d=Fu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=c.applyChanges(u,n.isPrimaryClient,d);pw(n,t,f.au);const y=new CM(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function jM(n,e,t){const i=Be(n),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((c=>!Vf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ty(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Yy(i.remoteStore,r.targetId),sy(i,r.targetId)})).catch(Fl)):(sy(i,r.targetId),await ty(i.localStore,r.targetId,!0))}async function LM(n,e){const t=Be(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Yy(t.remoteStore,i.targetId))}async function VM(n,e,t){const i=GM(n);try{const r=await(function(c,u){const d=Be(c),f=It.now(),y=u.reduce(((w,A)=>w.add(A.key)),Ze());let _,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=dr(),k=Ze();return d.Ns.getEntries(w,y).next((R=>{A=R,A.forEach(((j,B)=>{B.isValidDocument()||(k=k.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,A))).next((R=>{_=R;const j=[];for(const B of u){const W=XI(B,_.get(B.key).overlayedDocument);W!=null&&j.push(new xa(B.key,W,hS(W.value.mapValue),Yi.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,j,u)})).next((R=>{x=R;const j=R.applyToLocalDocumentSet(_,k);return d.documentOverlayCache.saveOverlays(w,R.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:ES(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new jt(Qe)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(i,r.batchId,t),await Bu(i,r.changes),await Gf(i.remoteStore)}catch(r){const o=Jy(r,"Failed to persist write");t.reject(o)}}async function iT(n,e){const t=Be(n);try{const i=await YD(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const c=t.Au.get(o);c&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?ft(c.hu,14607):r.removedDocuments.size>0&&(ft(c.hu,42227),c.hu=!1))})),await Bu(t,i,e)}catch(i){await Fl(i)}}function gw(n,e,t){const i=Be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(c,u){const d=Be(c);d.onlineState=u;let f=!1;d.queries.forEach(((y,_)=>{for(const x of _.Sa)x.va(u)&&(f=!0)})),f&&e0(d)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function UM(n,e,t){const i=Be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),o=r&&r.key;if(o){let c=new jt(ke.comparator);c=c.insert(o,Cn.newNoDocument(o,ze.min()));const u=Ze().add(o),d=new Bf(ze.min(),new Map,new jt(Qe),c,u);await iT(i,d),i.du=i.du.remove(o),i.Au.delete(e),n0(i)}else await ty(i.localStore,e,!1).then((()=>sy(i,e,t))).catch(Fl)}async function FM(n,e){const t=Be(n),i=e.batch.batchId;try{const r=await WD(t.localStore,e);rT(t,i,null),sT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Bu(t,r)}catch(r){await Fl(r)}}async function zM(n,e,t){const i=Be(n);try{const r=await(function(c,u){const d=Be(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return d.mutationQueue.lookupMutationBatch(f,u).next((_=>(ft(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(f,_)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>d.localDocuments.getDocuments(f,y)))}))})(i.localStore,e);rT(i,e,t),sT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Bu(i,r)}catch(r){await Fl(r)}}function sT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rT(n,e,t){const i=Be(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||aT(n,i)}))}function aT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),n0(n))}function pw(n,e,t){for(const i of t)i instanceof eT?(n.Ru.addReference(i.key,e),BM(n,i)):i instanceof tT?(Ee(t0,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||aT(n,i.key)):Oe(19791,{wu:i})}function BM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(Ee(t0,"New document in limbo: "+t),n.Eu.add(i),n0(n))}function n0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(Rt.fromString(e)),i=n.fu.next();n.Au.set(i,new IM(t)),n.du=n.du.insert(t,i),YS(n.remoteStore,new Jr(bs(bS(t.path)),i,"TargetPurposeLimboResolution",Of.ce))}}async function Bu(n,e,t){const i=Be(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,d)=>{c.push(i.pu(d,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const y=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){r.push(f);const y=$y.As(d.targetId,f);o.push(y)}})))})),await Promise.all(c),i.Pu.H_(r),await(async function(d,f){const y=Be(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>me.forEach(f,(x=>me.forEach(x.Es,(w=>y.persistence.referenceDelegate.addReference(_,x.targetId,w))).next((()=>me.forEach(x.ds,(w=>y.persistence.referenceDelegate.removeReference(_,x.targetId,w)))))))))}catch(_){if(!zl(_))throw _;Ee(Wy,"Failed to update sequence numbers: "+_)}for(const _ of f){const x=_.targetId;if(!_.fromCache){const w=y.Ms.get(x),A=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(A);y.Ms=y.Ms.insert(x,k)}}})(i.localStore,o))}async function HM(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Ee(t0,"User change. New user:",e.toKey());const i=await qS(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new we(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bu(t,i.Ls)}}function qM(n,e){const t=Be(n),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let r=Ze();const o=t.Iu.get(e);if(!o)return r;for(const c of o){const u=t.Tu.get(c);r=r.unionWith(u.view.nu)}return r}}function oT(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UM.bind(null,e),e.Pu.H_=AM.bind(null,e.eventManager),e.Pu.yu=RM.bind(null,e.eventManager),e}function GM(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zM.bind(null,e),e}class ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $D(this.persistence,new HD,e.initialUser,this.serializer)}Cu(e){return new HS(Gy.mi,this.serializer)}Du(e){return new JD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ff.provider={build:()=>new ff};class $M extends ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ND(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new HS((i=>hf.mi(i,t)),this.serializer)}}class ry{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=HM.bind(null,this.syncEngine),await xM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EM})()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),i=(function(o){return new sM(o)})(e.databaseInfo);return(function(o,c,u,d){return new lM(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,c,u){return new uM(i,r,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>gw(this.syncEngine,t,0)),(function(){return cw.v()?new cw:new eM})())}createSyncEngine(e,t){return(function(r,o,c,u,d,f,y){const _=new DM(r,o,c,u,d,f);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Be(t);Ee(po,"RemoteStore shutting down."),i.Ea.add(5),await zu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ry.provider={build:()=>new ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class YM{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=kn.UNAUTHENTICATED,this.clientId=My.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{Ee(pa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ee(pa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Jy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function bp(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await qS(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KM(n);Ee(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>hw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>hw(e.remoteStore,r))),n._onlineComponents=e}async function KM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(pa,"Using user provided OfflineComponentProvider");try{await bp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Nl("Error using user provided cache. Falling back to memory cache: "+t),await bp(n,new ff)}}else Ee(pa,"Using default OfflineComponentProvider"),await bp(n,new $M(void 0));return n._offlineComponents}async function lT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(pa,"Using user provided OnlineComponentProvider"),await yw(n,n._uninitializedComponentsProvider._online)):(Ee(pa,"Using default OnlineComponentProvider"),await yw(n,new ry))),n._onlineComponents}function XM(n){return lT(n).then((e=>e.syncEngine))}async function QM(n){const e=await lT(n),t=e.eventManager;return t.onListen=MM.bind(null,e.syncEngine),t.onUnlisten=jM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LM.bind(null,e.syncEngine),t}function ZM(n,e,t={}){const i=new oa;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const y=new WM({next:x=>{y.Nu(),c.enqueueAndForget((()=>TM(o,_))),x.fromCache&&d.source==="server"?f.reject(new we(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),_=new NM(u,y,{includeMetadataChanges:!0,qa:!0});return SM(o,_)})(await QM(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firestore.googleapis.com",_w=!0;class vw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uT,this.ssl=_w}else this.host=e.host,this.ssl=e.ssl??_w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AD)throw new we(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $f{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new eI;switch(i.type){case"firstParty":return new sI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=bw.get(t);i&&(Ee("ComponentProvider","Removing Datastore"),bw.delete(t),i.terminate())})(this),Promise.resolve()}}function JM(n,e,t,i={}){n=go(n,$f);const r=vo(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;r&&(Ry(`https://${u}`),Ny("Firestore",!0)),o.host!==uT&&o.host!==u&&Nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:r,emulatorOptions:i};if(!ho(d,c)&&(n._setSettings(d),i.mockUserToken)){let f,y;if(typeof i.mockUserToken=="string")f=i.mockUserToken,y=kn.MOCK_USER;else{f=FE(i.mockUserToken,n._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new we(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new kn(_)}n._authCredentials=new tI(new JE(f,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class rn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vu(t,rn._jsonSchema))return new rn(e,i||null,new ke(Rt.fromString(t.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:Qt("string",rn._jsonSchemaVersion),referencePath:Qt("string")};class la extends So{constructor(e,t,i){super(e,t,bS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ke(e))}withConverter(e){return new la(this.firestore,e,this._path)}}function ya(n,e,...t){if(n=Pn(n),eS("collection","path",e),n instanceof $f){const i=Rt.fromString(e,...t);return Mx(i),new la(n,null,i)}{if(!(n instanceof rn||n instanceof la))throw new we(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rt.fromString(e,...t));return Mx(i),new la(n.firestore,null,i)}}function ql(n,e,...t){if(n=Pn(n),arguments.length===1&&(e=My.newId()),eS("doc","path",e),n instanceof $f){const i=Rt.fromString(e,...t);return Dx(i),new rn(n,null,new ke(i))}{if(!(n instanceof rn||n instanceof la))throw new we(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rt.fromString(e,...t));return Dx(i),new rn(n.firestore,n instanceof la?n.converter:null,new ke(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class ww{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=yp();i&&Ee(xw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=yp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new oa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zl(e))throw e;Ee(xw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",Ew(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Zy.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Oe(47125,{Pc:Ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ew(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Hu extends $f{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new ww,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ww(e),this._firestoreClient=void 0,await e}}}function eP(n,e){const t=typeof n=="object"?n:Iy(),i=typeof n=="string"?n:rf,r=Mf(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=LE("firestore");o&&JM(r,...o)}return r}function hT(n){if(n._terminated)throw new we(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tP(n),n._firestoreClient}function tP(n){const e=n._freezeSettings(),t=(function(r,o,c,u){return new xI(r,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,cT(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new YM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(wn.fromBase64String(e))}catch(t){throw new we(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Di(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,Di._jsonSchema))return Di.fromBase64String(e.bytes)}}Di._jsonSchemaVersion="firestore/bytes/1.0",Di._jsonSchema={type:Qt("string",Di._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,vs._jsonSchema))return new vs(e.latitude,e.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:Qt("string",vs._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xs(e.vectorValues);throw new we(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xs._jsonSchemaVersion="firestore/vectorValue/1.0",xs._jsonSchema={type:Qt("string",xs._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^__.*__$/;class iP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uu(e,this.data,t,this.fieldTransforms)}}class dT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:n})}}class s0{constructor(e,t,i,r,o,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new s0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fT(this.Ac)&&nP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hf(e)}Cc(e,t,i,r=!1){return new s0({Ac:e,methodName:t,Dc:i,path:xn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r0(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new sP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rP(n,e,t,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);a0("Data must be an object, but it was:",c,i);const u=mT(i,c);let d,f;if(o.merge)d=new fi(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const x=ay(e,_,t);if(!c.contains(x))throw new we(de.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);pT(y,x)||y.push(x)}d=new fi(y),f=c.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,f=c.fieldTransforms;return new iP(new Xn(u),d,f)}class Yf extends i0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function aP(n,e,t,i){const r=n.Cc(1,e,t);a0("Data must be an object, but it was:",r,i);const o=[],c=Xn.empty();va(i,((d,f)=>{const y=o0(e,d,t);f=Pn(f);const _=r.yc(y);if(f instanceof Yf)o.push(y);else{const x=qu(f,_);x!=null&&(o.push(y),c.set(y,x))}}));const u=new fi(o);return new dT(c,u,r.fieldTransforms)}function oP(n,e,t,i,r,o){const c=n.Cc(1,e,t),u=[ay(e,i,t)],d=[r];if(o.length%2!=0)throw new we(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(ay(e,o[x])),d.push(o[x+1]);const f=[],y=Xn.empty();for(let x=u.length-1;x>=0;--x)if(!pT(f,u[x])){const w=u[x];let A=d[x];A=Pn(A);const k=c.yc(w);if(A instanceof Yf)f.push(w);else{const R=qu(A,k);R!=null&&(f.push(w),y.set(w,R))}}const _=new fi(f);return new dT(y,_,c.fieldTransforms)}function lP(n,e,t,i=!1){return qu(t,n.Cc(i?4:3,e))}function qu(n,e){if(gT(n=Pn(n)))return a0("Unsupported field value:",e,n),mT(n,e);if(n instanceof i0)return(function(i,r){if(!fT(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let c=0;for(const u of i){let d=qu(u,r.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=It.fromDate(i);return{timestampValue:uf(r.serializer,o)}}if(i instanceof It){const o=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uf(r.serializer,o)}}if(i instanceof vs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Di)return{bytesValue:OS(r.serializer,i._byteString)};if(i instanceof rn){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xs)return(function(c,u){return{mapValue:{fields:{[cS]:{stringValue:uS},[af]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Uy(u.serializer,f)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Pf(i)}`)})(n,e)}function mT(n,e){const t={};return iS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,((i,r)=>{const o=qu(r,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function gT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof vs||n instanceof Di||n instanceof rn||n instanceof i0||n instanceof xs)}function a0(n,e,t){if(!gT(t)||!tS(t)){const i=Pf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function ay(n,e,t){if((e=Pn(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return o0(n,e);throw mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const cP=new RegExp("[~\\*/\\[\\]]");function o0(n,e,t){if(e.search(cP)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mf(n,e,t,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${r}`),d+=")"),new we(de.INVALID_ARGUMENT,u+n+d)}function pT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uP extends yT{data(){return super.data()}}function Kf(n,e){return typeof e=="string"?o0(n,e):e instanceof Wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l0{}class bT extends l0{}function Xf(n,e,...t){let i=[];e instanceof l0&&i.push(e),i=i.concat(t),(function(o){const c=o.filter((d=>d instanceof c0)).length,u=o.filter((d=>d instanceof Qf)).length;if(c>1||c>0&&u>0)throw new we(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class Qf extends bT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qf(e,t,i)}_apply(e){const t=this._parse(e);return _T(e._query,t),new So(e.firestore,e.converter,Kp(e._query,t))}_parse(e){const t=r0(e.firestore);return(function(o,c,u,d,f,y,_){let x;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new we(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Tw(_,y);const A=[];for(const k of _)A.push(Sw(d,o,k));x={arrayValue:{values:A}}}else x=Sw(d,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Tw(_,y),x=lP(u,c,_,y==="in"||y==="not-in");return Xt.create(f,y,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dP(n,e,t){const i=e,r=Kf("where",n);return Qf._create(r,i,t)}class c0 extends l0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let c=r;const u=o.getFlattenedFilters();for(const d of u)_T(c,d),c=Kp(c,d)})(e._query,t),new So(e.firestore,e.converter,Kp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u0 extends bT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new u0(e,t)}_apply(e){const t=(function(r,o,c){if(r.startAt!==null)throw new we(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new we(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(o,c)})(e._query,this._field,this._direction);return new So(e.firestore,e.converter,(function(r,o){const c=r.explicitOrderBy.concat([o]);return new Bl(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function h0(n,e="asc"){const t=e,i=Kf("orderBy",n);return u0._create(i,t)}function Sw(n,e,t){if(typeof(t=Pn(t))=="string"){if(t==="")throw new we(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_S(e)&&t.indexOf("/")!==-1)throw new we(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Rt.fromString(t));if(!ke.isDocumentKey(i))throw new we(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zx(n,new ke(i))}if(t instanceof rn)return zx(n,t._key);throw new we(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(t)}.`)}function Tw(n,e){if(!Array.isArray(n)||n.length===0)throw new we(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _T(n,e){const t=(function(r,o){for(const c of r)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class fP{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return va(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[af].arrayValue?.values?.map((i=>Bt(i.doubleValue)));return new xs(t)}convertGeoPoint(e){return new vs(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=da(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Rt.fromString(e);ft(zS(i),9688,{name:e});const r=new bu(i.get(1),i.get(3)),o=new ke(i.popFirst(5));return r.isEqual(t)||hr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class bd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xl extends yT{constructor(e,t,i,r,o,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Kf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xl._jsonSchemaVersion="firestore/documentSnapshot/1.0",xl._jsonSchema={type:Qt("string",xl._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Gd extends xl{data(e={}){return super.data(e)}}class wl{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Gd(this._firestore,this._userDataWriter,i.key,i,new bd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((u=>{const d=new Gd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Gd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),y=c.indexOf(u.doc.key)),{type:gP(u.type),doc:d,oldIndex:f,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=My.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}wl._jsonSchemaVersion="firestore/querySnapshot/1.0",wl._jsonSchema={type:Qt("string",wl._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class pP extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}function Gu(n){n=go(n,So);const e=go(n.firestore,Hu),t=hT(e),i=new pP(e);return hP(n._query),ZM(t,n._query).then((r=>new wl(e,i,n,r)))}function d0(n,e,t,...i){n=go(n,rn);const r=go(n.firestore,Hu),o=r0(r);let c;return c=typeof(e=Pn(e))=="string"||e instanceof Wf?oP(o,"updateDoc",n._key,e,t,i):aP(o,"updateDoc",n._key,e),m0(r,[c.toMutation(n._key,Yi.exists(!0))])}function vT(n){return m0(go(n.firestore,Hu),[new Fy(n._key,Yi.none())])}function f0(n,e){const t=go(n.firestore,Hu),i=ql(n),r=mP(n.converter,e);return m0(t,[rP(r0(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Yi.exists(!1))]).then((()=>i))}function m0(n,e){return(function(i,r){const o=new oa;return i.asyncQueue.enqueueAndForget((async()=>VM(await XM(i),r,o))),o.promise})(hT(n),e)}(function(e,t=!0){(function(r){Ul=r})(xo),fo(new ua("firestore",((i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),u=new Hu(new nI(i.getProvider("auth-internal")),new rI(c,i.getProvider("app-check-internal")),(function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new we(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(f.options.projectId,y)})(c,r),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ys(Nx,kx,e),ys(Nx,kx,"esm2020")})();var yP="firebase",bP="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(yP,bP,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="firebasestorage.googleapis.com",_P="storageBucket",vP=120*1e3,xP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends ks{constructor(e,t,i=0){super(_p(e),`Firebase Storage: ${t} (${_p(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rs||(Rs={}));function _p(n){return"storage/"+n}function wP(){const n="An unknown error occurred, please check the error payload for server response.";return new Cs(Rs.UNKNOWN,n)}function EP(){return new Cs(Rs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SP(){return new Cs(Rs.CANCELED,"User canceled the upload/download.")}function TP(n){return new Cs(Rs.INVALID_URL,"Invalid URL '"+n+"'.")}function AP(n){return new Cs(Rs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Aw(n){return new Cs(Rs.INVALID_ARGUMENT,n)}function wT(){return new Cs(Rs.APP_DELETED,"The Firebase app was deleted.")}function RP(n){return new Cs(Rs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=$i.makeFromUrl(e,t)}catch{return new $i(e,"")}if(i.path==="")return i;throw AP(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+r+c,"i"),d={bucket:1,path:3};function f(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${_}/${y}/b/${r}/o${x}`,"i"),A={bucket:1,path:3},k=t===xT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",j=new RegExp(`^https?://${k}/${r}/${R}`,"i"),W=[{regex:u,indices:d,postModify:o},{regex:w,indices:A,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let Z=0;Z<W.length;Z++){const $=W[Z],le=$.regex.exec(e);if(le){const P=le[$.indices.bucket];let I=le[$.indices.path];I||(I=""),i=new $i(P,I),$.postModify(i);break}}if(i==null)throw TP(e);return i}}class NP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n,e,t){let i=1,r=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function y(...R){f||(f=!0,e.apply(null,R))}function _(R){r=setTimeout(()=>{r=null,n(w,d())},R)}function x(){o&&clearTimeout(o)}function w(R,...j){if(f){x();return}if(R){x(),y.call(null,R,...j);return}if(d()||c){x(),y.call(null,R,...j);return}i<64&&(i*=2);let W;u===1?(u=2,W=0):W=(i+Math.random())*1e3,_(W)}let A=!1;function k(R){A||(A=!0,x(),!f&&(r!==null?(R||(u=2),clearTimeout(r),_(0)):R||(u=1)))}return _(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function CP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){return n!==void 0}function Rw(n,e,t,i){if(i<e)throw Aw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Aw(`Invalid value for '${n}'. Expected ${t} or less.`)}function DP(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var gf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(gf||(gf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t,i,r,o,c,u,d,f,y,_,x=!0,w=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=_,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new _d(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===gf.NO_ERROR,d=o.getStatus();if(!u||MP(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===gf.ABORT;i(!1,new _d(!1,null,y));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new _d(f,o))})},t=(i,r)=>{const o=this.resolve_,c=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());IP(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=wP();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(r.canceled){const d=this.appDelete_?wT():SP();c(d)}else{const d=EP();c(d)}};this.canceled_?t(!1,new _d(!1,null,!0)):this.backoffId_=kP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _d{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function OP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function VP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function UP(n,e,t,i,r,o,c=!0,u=!1){const d=DP(n.urlParams),f=n.url+d,y=Object.assign({},n.headers);return LP(y,e),OP(y,t),jP(y,o),VP(y,i),new PP(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function zP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this._service=e,t instanceof $i?this._location=t:this._location=$i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pf(e,t)}get root(){const e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zP(this._location.path)}get storage(){return this._service}get parent(){const e=FP(this._location.path);if(e===null)return null;const t=new $i(this._location.bucket,e);return new pf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RP(e)}}function Nw(n,e){const t=e?.[_P];return t==null?null:$i.makeFromBucketSpec(t,n)}function BP(n,e,t,i={}){n.host=`${e}:${t}`;const r=vo(e);r&&(Ry(`https://${n.host}/b`),Ny("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:FE(o,n.app.options.projectId))}class HP{constructor(e,t,i,r,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=xT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vP,this._maxUploadRetryTime=xP,this._requests=new Set,r!=null?this._bucket=$i.makeFromBucketSpec(r,this._host):this._bucket=Nw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$i.makeFromBucketSpec(this._url,e):this._bucket=Nw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pf(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new NP(wT());{const c=UP(e,this._appId,i,r,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const kw="@firebase/storage",Cw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="storage";function qP(n=Iy(),e){n=Pn(n);const i=Mf(n,ET).getImmediate({identifier:e}),r=LE("storage");return r&&GP(i,...r),i}function GP(n,e,t,i={}){BP(n,e,t,i)}function $P(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new HP(t,i,r,e,xo)}function WP(){fo(new ua(ET,$P,"PUBLIC").setMultipleInstances(!0)),ys(kw,Cw,""),ys(kw,Cw,"esm2020")}WP();function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=ST,TT=new ju("auth","Firebase",ST());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new ky("@firebase/auth");function KP(n,...e){yf.logLevel<=Xe.WARN&&yf.warn(`Auth (${xo}): ${n}`,...e)}function $d(n,...e){yf.logLevel<=Xe.ERROR&&yf.error(`Auth (${xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,...e){throw g0(n,...e)}function ws(n,...e){return g0(n,...e)}function AT(n,e,t){const i={...YP(),[e]:t};return new ju("auth","Firebase",i).create(e,{appName:n.name})}function co(n){return AT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g0(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return TT.create(n,...e)}function Ve(n,e,...t){if(!n)throw g0(e,...t)}function rr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function mr(n,e){n||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){return typeof self<"u"&&self.location?.href||""}function XP(){return Iw()==="http:"||Iw()==="https:"}function Iw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XP()||Mk()||"connection"in navigator)?navigator.onLine:!0}function ZP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ck()||Pk()}get(){return QP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e){mr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tO=new $u(3e4,6e4);function y0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Gl(n,e,t,i,r={}){return NT(n,r,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const u=Lu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return Dk()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&vo(n.emulatorConfig.host)&&(f.credentials="include"),RT.fetch()(await kT(n,n.config.apiHost,t,u),f)})}async function NT(n,e,t){n._canInitEmulator=!1;const i={...JP,...e};try{const r=new iO(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw vd(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw vd(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw vd(n,"user-disabled",c);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AT(n,y,f);fr(n,y)}}catch(r){if(r instanceof ks)throw r;fr(n,"network-request-failed",{message:String(r)})}}async function nO(n,e,t,i,r={}){const o=await Gl(n,e,t,i,r);return"mfaPendingCredential"in o&&fr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function kT(n,e,t,i){const r=`${e}${t}?${i}`,o=n,c=o.config.emulator?p0(n.config,r):`${n.config.apiScheme}://${r}`;return eO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class iO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ws(this.auth,"network-request-failed")),tO.get())})}}function vd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=ws(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n,e){return Gl(n,"POST","/v1/accounts:delete",e)}async function bf(n,e){return Gl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rO(n,e=!1){const t=Pn(n),i=await t.getIdToken(e),r=b0(i);Ve(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:cu(vp(r.auth_time)),issuedAtTime:cu(vp(r.iat)),expirationTime:cu(vp(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function vp(n){return Number(n)*1e3}function b0(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const r=OE(t);return r?JSON.parse(r):($d("Failed to decode base64 JWT payload"),null)}catch(r){return $d("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Dw(n){const e=b0(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ks&&aO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(n){const e=n.auth,t=await n.getIdToken(),i=await Eu(n,bf(e,{idToken:t}));Ve(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=r.providerUserInfo?.length?CT(r.providerUserInfo):[],c=cO(n.providerData,o),u=n.isAnonymous,d=!(n.email&&r.passwordHash)&&!c?.length,f=u?d:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new ly(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,y)}async function lO(n){const e=Pn(n);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cO(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function CT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(n,e){const t=await NT(n,{},async()=>{const i=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await kT(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&vo(n.emulatorConfig.host)&&(d.credentials="include"),RT.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hO(n,e){return Gl(n,"POST","/v2/accounts:revokeToken",y0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Dw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await uO(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,c=new El;return i&&(Ve(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(Ve(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),o&&(Ve(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wi{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new oO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ly(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rO(this,e)}reload(){return lO(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await _f(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gi(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await Eu(this,sO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:_,emailVerified:x,isAnonymous:w,providerData:A,stsTokenManager:k}=t;Ve(_&&k,e,"internal-error");const R=El.fromJSON(this.name,k);Ve(typeof _=="string",e,"internal-error"),Yr(i,e.name),Yr(r,e.name),Ve(typeof x=="boolean",e,"internal-error"),Ve(typeof w=="boolean",e,"internal-error"),Yr(o,e.name),Yr(c,e.name),Yr(u,e.name),Yr(d,e.name),Yr(f,e.name),Yr(y,e.name);const j=new Wi({uid:_,auth:e,email:r,emailVerified:x,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:R,createdAt:f,lastLoginAt:y});return A&&Array.isArray(A)&&(j.providerData=A.map(B=>({...B}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,i=!1){const r=new El;r.updateFromServerResponse(t);const o=new Wi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await _f(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ve(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?CT(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,u=new El;u.updateFromIdToken(i);const d=new Wi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ly(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Map;function ar(n){mr(n instanceof Function,"Expected a class definition");let e=Mw.get(n);return e?(mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IT.type="NONE";const Pw=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n,e,t){return`firebase:${n}:${e}:${t}`}class Sl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Wd(this.userKey,r.apiKey,o),this.fullPersistenceKey=Wd("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bf(this.auth,{idToken:e}).catch(()=>{});return t?Wi._fromGetAccountInfoResponse(this.auth,t,e):null}return Wi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Sl(ar(Pw),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ar(Pw);const c=Wd(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const y=await f._get(c);if(y){let _;if(typeof y=="string"){const x=await bf(e,{idToken:y}).catch(()=>{});if(!x)break;_=await Wi._fromGetAccountInfoResponse(e,x,y)}else _=Wi._fromJSON(e,y);f!==o&&(u=_),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Sl(o,e,i):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Sl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LT(e))return"Blackberry";if(VT(e))return"Webos";if(MT(e))return"Safari";if((e.includes("chrome/")||PT(e))&&!e.includes("edge/"))return"Chrome";if(jT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function DT(n=Mn()){return/firefox\//i.test(n)}function MT(n=Mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PT(n=Mn()){return/crios\//i.test(n)}function OT(n=Mn()){return/iemobile/i.test(n)}function jT(n=Mn()){return/android/i.test(n)}function LT(n=Mn()){return/blackberry/i.test(n)}function VT(n=Mn()){return/webos/i.test(n)}function _0(n=Mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dO(n=Mn()){return _0(n)&&!!window.navigator?.standalone}function fO(){return Ok()&&document.documentMode===10}function UT(n=Mn()){return _0(n)||jT(n)||VT(n)||LT(n)||/windows phone/i.test(n)||OT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n,e=[]){let t;switch(n){case"Browser":t=Ow(Mn());break;case"Worker":t=`${Ow(Mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(n,e={}){return Gl(n,"GET","/v2/passwordPolicy",y0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=6;class yO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jw(this),this.idTokenSubscription=new jw(this),this.beforeStateQueue=new mO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ar(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bf(this,{idToken:e}),i=await Wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gi(this.app))return Promise.reject(co(this));const t=e?Pn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gi(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gi(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gO(this),t=new yO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await hO(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ar(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,r);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function v0(n){return Pn(n)}class jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _O(n){x0=n}function vO(n){return x0.loadJS(n)}function xO(){return x0.gapiScript}function wO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n,e){const t=Mf(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(ho(o,e??{}))return r;fr(r,"already-initialized")}return t.initialize({options:e})}function SO(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ar);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function TO(n,e,t){const i=v0(n);Ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=zT(e),{host:c,port:u}=AO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},y=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ve(ho(f,i.config.emulator)&&ho(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,vo(c)?(Ry(`${o}//${c}${d}`),Ny("Auth",!0)):RO()}function zT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AO(n){const e=zT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Lw(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Lw(c)}}}function Lw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n,e){return nO(n,"POST","/v1/accounts:signInWithIdp",y0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="http://localhost";class yo extends BT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=t;if(!i||!r)return null;const c=new yo(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Tl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Tl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tl(e,t)}buildRequest(){const e={requestUri:NO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends HT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Wu{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Xr.credential(t,i)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Wu{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Wu{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Zr.credential(t,i)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await Wi._fromIdTokenResponse(e,i,r),c=Vw(i);return new Pl({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Vw(i);return new Pl({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Vw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends ks{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new vf(e,t,i,r)}}function qT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,o,e,i):o})}async function kO(n,e,t=!1){const i=await Eu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Pl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(n,e,t=!1){const{auth:i}=n;if(Gi(i.app))return Promise.reject(co(i));const r="reauthenticate";try{const o=await Eu(n,qT(i,r,e,n),t);Ve(o.idToken,i,"internal-error");const c=b0(o.idToken);Ve(c,i,"internal-error");const{sub:u}=c;return Ve(n.uid===u,i,"user-mismatch"),Pl._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&fr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(n,e,t=!1){if(Gi(n.app))return Promise.reject(co(n));const i="signIn",r=await qT(n,i,e),o=await Pl._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}function DO(n,e,t,i){return Pn(n).onIdTokenChanged(e,t,i)}function MO(n,e,t){return Pn(n).beforeAuthStateChanged(e,t)}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=1e3,OO=10;class $T extends GT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);fO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,OO):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$T.type="LOCAL";const jO=$T;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends GT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WT.type="SESSION";const YT=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Zf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,c=this.handlersMap[r];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await LO(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=w0("",20);r.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(_){const x=_;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(){return window}function UO(n){Es().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return typeof Es().WorkerGlobalScope<"u"&&typeof Es().importScripts=="function"}async function FO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zO(){return navigator?.serviceWorker?.controller||null}function BO(){return KT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebaseLocalStorageDb",HO=1,wf="firebaseLocalStorage",QT="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(n,e){return n.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function qO(){const n=indexedDB.deleteDatabase(XT);return new Yu(n).toPromise()}function cy(){const n=indexedDB.open(XT,HO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(wf,{keyPath:QT})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(wf)?e(i):(i.close(),await qO(),e(await cy()))})})}async function Uw(n,e,t){const i=Jf(n,!0).put({[QT]:e,value:t});return new Yu(i).toPromise()}async function GO(n,e){const t=Jf(n,!1).get(e),i=await new Yu(t).toPromise();return i===void 0?null:i.value}function Fw(n,e){const t=Jf(n,!0).delete(e);return new Yu(t).toPromise()}const $O=800,WO=3;class ZT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>WO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(BO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FO(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cy();return await Uw(e,xf,"1"),await Fw(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Uw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>GO(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Jf(r,!1).getAll();return new Yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZT.type="LOCAL";const YO=ZT;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n,e){return e?ar(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends BT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XO(n){return IO(n.auth,new E0(n),n.bypassAuthState)}function QO(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),CO(t,new E0(n),n.bypassAuthState)}async function ZO(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),kO(t,new E0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XO;case"linkViaPopup":case"linkViaRedirect":return ZO;case"reauthViaPopup":case"reauthViaRedirect":return QO;default:fr(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new $u(2e3,1e4);class _l extends JT{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,_l.currentPopupAction&&_l.currentPopupAction.cancel(),_l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=w0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_l.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JO.get())};e()}}_l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="pendingRedirect",Yd=new Map;class t4 extends JT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const i=await n4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n4(n,e){const t=r4(e),i=s4(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function i4(n,e){Yd.set(n._key(),e)}function s4(n){return ar(n._redirectPersistence)}function r4(n){return Wd(e4,n.config.apiKey,n.name)}async function a4(n,e,t=!1){if(Gi(n.app))return Promise.reject(co(n));const i=v0(n),r=KO(i,e),c=await new t4(i,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=600*1e3;class l4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!eA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o4&&this.cachedEventUids.clear(),this.cachedEventUids.has(zw(e))}saveEventToCache(e){this.cachedEventUids.add(zw(e)),this.lastProcessedEventTime=Date.now()}}function zw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function c4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,e={}){return Gl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d4=/^https?/;async function f4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await u4(n);for(const t of e)try{if(m4(t))return}catch{}fr(n,"unauthorized-domain")}function m4(n){const e=oy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!d4.test(t))return!1;if(h4.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new $u(3e4,6e4);function Bw(){const n=Es().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function p4(n){return new Promise((e,t)=>{function i(){Bw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bw(),t(ws(n,"network-request-failed"))},timeout:g4.get()})}if(Es().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Es().gapi?.load)i();else{const r=wO("iframefcb");return Es()[r]=()=>{gapi.load?i():t(ws(n,"network-request-failed"))},vO(`${xO()}?onload=${r}`).catch(o=>t(o))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function y4(n){return Kd=Kd||p4(n),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new $u(5e3,15e3),_4="__/auth/iframe",v4="emulator/auth/iframe",x4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E4(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?p0(e,v4):`https://${n.config.authDomain}/${_4}`,i={apiKey:e.apiKey,appName:n.name,v:xo},r=w4.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Lu(i).slice(1)}`}async function S4(n){const e=await y4(n),t=Es().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:E4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x4,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=ws(n,"network-request-failed"),u=Es().setTimeout(()=>{o(c)},b4.get());function d(){Es().clearTimeout(u),r(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A4=500,R4=600,N4="_blank",k4="http://localhost";class Hw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function C4(n,e,t,i=A4,r=R4){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...T4,width:i.toString(),height:r.toString(),top:o,left:c},f=Mn().toLowerCase();t&&(u=PT(f)?N4:t),DT(f)&&(e=e||k4,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[w,A])=>`${x}${w}=${A},`,"");if(dO(f)&&u!=="_self")return I4(e||"",u),new Hw(null);const _=window.open(e||"",u,y);Ve(_,n,"popup-blocked");try{_.focus()}catch{}return new Hw(_)}function I4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="__/auth/handler",M4="emulator/auth/handler",P4=encodeURIComponent("fac");async function qw(n,e,t,i,r,o){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:xo,eventId:r};if(e instanceof HT){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Bk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Wu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await n._getAppCheckToken(),f=d?`#${P4}=${encodeURIComponent(d)}`:"";return`${O4(n)}?${Lu(u).slice(1)}${f}`}function O4({config:n}){return n.emulator?p0(n,M4):`https://${n.authDomain}/${D4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="webStorageSupport";class j4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YT,this._completeRedirectFn=a4,this._overrideRedirectResult=i4}async _openPopup(e,t,i,r){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await qw(e,t,i,oy(),r);return C4(e,o,w0())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await qw(e,t,i,oy(),r);return UO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(mr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await S4(e),i=new l4(e);return t.register("authEvent",r=>(Ve(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},r=>{const o=r?.[0]?.[xp];o!==void 0&&t(!!o),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=f4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UT()||MT()||_0()}}const L4=j4;var Gw="@firebase/auth",$w="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F4(n){fo(new ua("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FT(n)},f=new bO(i,r,o,d);return SO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),fo(new ua("auth-internal",e=>{const t=v0(e.getProvider("auth").getImmediate());return(i=>new V4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(Gw,$w,U4(n)),ys(Gw,$w,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=300,B4=UE("authIdTokenMaxAge")||z4;let Ww=null;const H4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>B4)return;const r=t?.token;Ww!==r&&(Ww=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function q4(n=Iy()){const e=Mf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=EO(n,{popupRedirectResolver:L4,persistence:[YO,jO,YT]}),i=UE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=H4(o.toString());MO(t,c,()=>c(t.currentUser)),DO(t,u=>c(u))}}const r=jE("auth");return r&&TO(t,`http://${r}`),t}function G4(){return document.getElementsByTagName("head")?.[0]??document}_O({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=ws("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",G4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F4("Browser");const uy={apiKey:"AIzaSyApXtfSzd-lexTDqv_SN2hys39ArZMBrCs",authDomain:"losgamers-website.firebaseapp.com",projectId:"losgamers-website",storageBucket:"losgamers-website.firebasestorage.app",messagingSenderId:"2782474569",appId:"1:2782474569:web:139978c2c8e18e456e2a98"},S0=HE(uy),mi=eP(S0);qP(S0);q4(S0);console.log("Firebase initialized with config:",{projectId:uy.projectId,storageBucket:uy.storageBucket});const ea={CLOUD_NAME:"dpxlbcjql",UPLOAD_PRESET:"pokemon_uploads",DEFAULT_FOLDER:"pokemon-images"},Ku="pokemon",wp=async(n,e)=>{try{console.log("Uploading to Cloudinary...");const t=Date.now(),i=e.toLowerCase().replace(/[^a-z0-9]/g,"-"),r=`${ea.DEFAULT_FOLDER}/${i}-${t}`;console.log("Uploading to Cloudinary with public_id:",r);const o=new FormData;o.append("file",n),o.append("upload_preset",ea.UPLOAD_PRESET),o.append("public_id",r),o.append("folder",ea.DEFAULT_FOLDER);const c=await fetch(`https://api.cloudinary.com/v1_1/${ea.CLOUD_NAME}/image/upload`,{method:"POST",body:o});if(!c.ok)throw new Error(`Cloudinary upload failed: ${c.statusText}`);const u=await c.json();return console.log("Upload successful:",u),u.secure_url}catch(t){return console.error("Detailed upload error:",t),console.error("Error message:",t?.message),null}},$4=async()=>{try{const n=Xf(ya(mi,Ku),h0("pokedexNumber")),e=await Gu(n);if(e.empty)return 1;const t=e.docs.map(i=>i.data().pokedexNumber);for(let i=1;i<=151;i++)if(!t.includes(i))return i;return 152}catch(n){return console.error("Error getting next Pokedex number:",n),1}},em=async()=>{try{const n=Xf(ya(mi,Ku),h0("pokedexNumber"));return(await Gu(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){return console.error("Error fetching Pokemon:",n),[]}},W4=async n=>{try{const e=new Date;return(await f0(ya(mi,Ku),{...n,createdAt:e,updatedAt:e})).id}catch(e){return console.error("Error adding Pokemon:",e),null}},xd=async(n,e)=>{try{const t=ql(mi,Ku,n);return await d0(t,{...e,updatedAt:new Date}),!0}catch(t){return console.error("Error updating Pokemon:",t),!1}},Y4=async n=>{try{const e=n.split("/"),t=e[e.length-1].split(".")[0],r=`${e[e.length-2]}/${t}`;return console.log("Attempting to delete Cloudinary image with public_id:",r),console.log("Image deletion would be handled by backend in production"),!0}catch(e){return console.error("Error deleting image:",e),!1}},K4=async(n,e)=>{try{return e&&await Y4(e),await vT(ql(mi,Ku,n)),!0}catch(t){return console.error("Error deleting Pokemon with image:",t),!1}},Xd="pokemon_ratings",Yw=n=>({1:10,2:15,3:21,4:28,5:36,6:45,7:55,8:66,9:78,10:91})[n]||0,X4=async(n,e,t)=>{try{const i=Xf(ya(mi,Xd),dP("pokemonId","==",n)),r=await Gu(i);if(r.empty){const o={pokemonId:n,ratings:{[e]:t},averageRating:t,totalVotes:1,totalPoints:Yw(t),lastUpdated:new Date};await f0(ya(mi,Xd),o)}else{const o=r.docs[0],u={...o.data().ratings,[e]:t},d=Object.values(u).reduce((x,w)=>x+w,0),f=Object.keys(u).length,y=f>0?d/f:0,_=Object.values(u).reduce((x,w)=>x+Yw(w),0);await d0(ql(mi,Xd,o.id),{ratings:u,averageRating:y,totalVotes:f,totalPoints:_,lastUpdated:new Date})}return!0}catch(i){return console.error("Error saving rating:",i),!1}},Su=async()=>{try{const n=await Gu(ya(mi,Xd)),e={};return n.docs.forEach(t=>{const i=t.data();e[i.pokemonId]={...i,lastUpdated:i.lastUpdated?.toDate?i.lastUpdated.toDate():new Date}}),e}catch(n){return console.error("Error fetching ratings:",n),{}}},tA=async()=>{try{const n=await Su(),e=Object.values(n).map(t=>({pokemonId:t.pokemonId,averageRating:t.averageRating||0,totalPoints:t.totalPoints||0}));return e.sort((t,i)=>t.averageRating!==i.averageRating?i.averageRating-t.averageRating:i.totalPoints-t.totalPoints),e.map((t,i)=>({pokemonId:t.pokemonId,rank:i+1,totalPoints:t.totalPoints}))}catch(n){return console.error("Error getting global rankings:",n),[]}},Q4=async n=>{try{const t=(await em()).filter(o=>o.artist===n),i=await Su(),r=t.map(o=>({pokemonId:o.id,averageRating:i[o.id]?.averageRating||0,totalPoints:i[o.id]?.totalPoints||0}));return r.sort((o,c)=>c.averageRating!==o.averageRating?c.averageRating-o.averageRating:c.totalPoints-o.totalPoints),r.map((o,c)=>({pokemonId:o.pokemonId,rank:c+1,totalPoints:o.totalPoints}))}catch(e){return console.error("Error getting artist rankings:",e),[]}},Z4=()=>{const{requireAdmin:n}=Ay(),[e,t]=H.useState([]),[i,r]=H.useState(!0),[o,c]=H.useState([]),[u,d]=H.useState(!0),[f,y]=H.useState(1);H.useEffect(()=>{_()},[]),H.useEffect(()=>{if(u){const D=setTimeout(()=>{y(.01),setTimeout(()=>{d(!1)},2e3)},3e3);return()=>clearTimeout(D)}},[u]);const _=async()=>{try{r(!0);const D=await em();t(D);const se=[];for(let pe=1;pe<=151;pe++){const De=D.find(Fe=>Fe.pokedexNumber===pe);De?se.push({id:pe,name:De.name,artist:De.artist,imageUrl:De.imageUrl,additionalImages:De.additionalImages||[],types:De.types,type2:De.types?.[1],unique:De.unique,evolutionStage:De.evolutionStage,hasArt:!0,firebaseId:De.id}):se.push({id:pe,name:`Pokemon #${pe.toString().padStart(3,"0")}`,hasArt:!1})}c(se),await x(se),u||y(.01)}catch(D){console.error("Error loading Pokemon data:",D)}finally{r(!1)}},x=async D=>{try{const se=gi(),pe=await Su(),De=D||o,Fe=new Set(De.filter(Ie=>Ie.hasArt&&Ie.firebaseId).map(Ie=>Ie.firebaseId)),Re=[],$t={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0};Object.entries(pe).forEach(([Ie,et])=>{if(Fe.has(Ie)){const kt=et.ratings[se];kt&&(Re.push(kt),kt>=1&&kt<=10&&$t[kt]++)}});const je=Re.length>0?Re.reduce((Ie,et)=>Ie+et,0)/Re.length:0;No({averageRating:je,totalRatings:Re.length,ratingDistribution:$t})}catch(se){console.error("Error loading user rating stats:",se)}},w=async()=>{if(!(!C||!C.firebaseId||!C.imageUrl)){F(!0);try{await K4(C.firebaseId,C.imageUrl)?(Je(`${C.name} has been deleted successfully!`,"success"),z(null),be(!1),await _()):Je("❌ Failed to delete Pokemon. Please try again.","error")}catch(D){console.error("Error deleting Pokemon:",D),Je("❌ Error deleting Pokemon. Check console for details.","error")}finally{F(!1)}}},A=()=>{C&&(ge({name:C.name,artist:C.artist||"",types:C.types||[],unique:C.unique||"",evolutionStage:C.evolutionStage||0,image:null,additionalImages:[]}),ue(!0))},k=async()=>{if(!(!C||!C.firebaseId)){if(!Y.name||!Y.artist||Y.types.length===0){Je("Please fill in all required fields","error");return}G(!0);try{let D=C.imageUrl,se=C.additionalImages||[];if(Y.image){const Re=await wp(Y.image,Y.name);if(!Re){Je("❌ Failed to upload new image. Please try again.","error"),G(!1);return}D=Re}if(Y.additionalImages.length>0){const Re=Y.additionalImages.map((Ie,et)=>wp(Ie,`${Y.name}_additional_${et+1}`)),je=(await Promise.all(Re)).filter(Ie=>Ie!==null);if(je.length!==Y.additionalImages.length){Je("❌ Some additional images failed to upload. Please try again.","error"),G(!1);return}se=je}let pe=C.additionalImages||[];Y.additionalImages.length>0&&(pe=[...pe,...se]);const De={name:Y.name,artist:Y.artist,types:Y.types,evolutionStage:Y.evolutionStage,unique:Y.unique,...D!==C.imageUrl&&{imageUrl:D},additionalImages:pe,updatedAt:new Date};await xd(C.firebaseId,De)?(Je(`${Y.name} has been updated successfully!`,"success"),ue(!1),z(Re=>Re?{...Re,name:Y.name,artist:Y.artist,types:Y.types,evolutionStage:Y.evolutionStage,unique:Y.unique,imageUrl:D,additionalImages:pe}:null),await _()):Je("❌ Failed to update Pokemon. Please try again.","error")}catch(D){console.error("Error updating Pokemon:",D),Je("❌ Error updating Pokemon. Check console for details.","error")}finally{G(!1)}}},R=async()=>{if(!ye.name||!ye.artist||ye.types.length===0||!ye.image){Je("Please fill in all required fields and select an image","error");return}He(!0);try{const D=await wp(ye.image,ye.name);if(!D){Je("❌ Failed to upload image. Please try again.","error");return}const pe={pokedexNumber:await $4(),name:ye.name,artist:ye.artist,types:ye.types,imageUrl:D,evolutionStage:ye.evolutionStage,...ye.unique&&{unique:ye.unique}};await W4(pe),Je(`✅ ${ye.name} has been added successfully!`,"success"),V(!1),_e({name:"",artist:"",types:[],unique:"",evolutionStage:0,image:null}),await _()}catch(D){console.error("Error adding Pokemon:",D),Je("❌ Error adding Pokemon. Check console for details.","error")}finally{He(!1)}},j=D=>{_e(se=>se.types.includes(D)?{...se,types:se.types.filter(pe=>pe!==D)}:se.types.length<2?{...se,types:[...se.types,D]}:(Je("Pokemon can only have up to 2 types","error"),se))},B=D=>{const se=D.target.files?.[0];if(se){if(se.size>5*1024*1024){Je("Image size should be less than 5MB","error");return}if(!se.type.startsWith("image/")){Je("Please select a valid image file","error");return}_e(pe=>({...pe,image:se}))}},W=D=>{const se=D.target.files?.[0];if(se){if(se.size>5*1024*1024){Je("Image size should be less than 5MB","error");return}if(!se.type.startsWith("image/")){Je("Please select a valid image file","error");return}ge(pe=>({...pe,image:se}))}},Z=D=>{const se=Array.from(D.target.files||[]);if(se.length>3){Je("You can only upload up to 3 additional images","error");return}for(const pe of se){if(pe.size>5*1024*1024){Je("Each image should be less than 5MB","error");return}if(!pe.type.startsWith("image/")){Je("Please select valid image files only","error");return}}ge(pe=>({...pe,additionalImages:se}))},$=D=>{const se=D.clipboardData.items;for(let pe=0;pe<se.length;pe++)if(se[pe].type.startsWith("image/")){const De=se[pe].getAsFile();if(De){if(De.size>5*1024*1024){Je("Image size should be less than 5MB","error");return}_e(Fe=>({...Fe,image:De})),Je("✅ Image pasted from clipboard!","success")}}},le=D=>{const se=D.clipboardData.items;for(let pe=0;pe<se.length;pe++)if(se[pe].type.startsWith("image/")){const De=se[pe].getAsFile();if(De){if(De.size>5*1024*1024){Je("Image size should be less than 5MB","error");return}ge(Fe=>({...Fe,image:De})),Je("✅ Image pasted from clipboard!","success")}}},P=D=>{Ce&&(br(D),ji(!0))},I=D=>{D.preventDefault()},T=async D=>{if(!Jn||!Ce||Jn.id===D.id){br(null),ji(!1);return}try{const se=Jn.id,pe=D.id;console.log(`Inserting Pokemon from position ${se} to position ${pe}`),Ao(`#${se} → #${pe}`),Li(!0);const De=o.filter(Re=>Re.hasArt&&Re.firebaseId),Fe=[];if(se<pe)for(const Re of De)Re.id>se&&Re.id<=pe&&Fe.push(xd(Re.firebaseId,{pokedexNumber:Re.id-1}));else for(const Re of De)Re.id>=pe&&Re.id<se&&Fe.push(xd(Re.firebaseId,{pokedexNumber:Re.id+1}));Jn.firebaseId&&Jn.hasArt&&Fe.push(xd(Jn.firebaseId,{pokedexNumber:pe})),await Promise.all(Fe),await _(),setTimeout(()=>{Li(!1)},2e3)}catch(se){console.error("Error inserting Pokemon position:",se),Ao("❌ Insert failed"),Li(!0),setTimeout(()=>{Li(!1)},3e3)}finally{br(null),ji(!1)}},O=D=>{ge(se=>se.types.includes(D)?{...se,types:se.types.filter(pe=>pe!==D)}:se.types.length<2?{...se,types:[...se.types,D]}:(Je("Pokemon can only have up to 2 types","error"),se))},[C,z]=H.useState(null),[L,be]=H.useState(!1),[Ae,F]=H.useState(!1),[ee,ue]=H.useState(!1),[xe,V]=H.useState(!1),[ae,te]=H.useState(!1);H.useEffect(()=>{if(o.length>0&&!C){const D=o.find(se=>se.hasArt);D&&z(D)}},[o,C]);const[Y,ge]=H.useState({name:"",artist:"",types:[],unique:"",evolutionStage:0,image:null,additionalImages:[]}),[ye,_e]=H.useState({name:"",artist:"",types:[],unique:"",evolutionStage:0,image:null}),[_t,G]=H.useState(!1),[oe,He]=H.useState(!1),[Ce,Zn]=H.useState(!1),[Is,ji]=H.useState(!1),[Jn,br]=H.useState(null),[zn,Ao]=H.useState(""),[wa,Li]=H.useState(!1),[ei,_r]=H.useState(null),[Bn,vr]=H.useState({message:"",type:"info",show:!1}),[Ea,Nt]=H.useState({rotateX:0,rotateY:0}),rt=H.useRef(null),[On,Zt]=H.useState(0),[Hn,Sa]=H.useState({}),[ti,Ds]=H.useState({}),gi=()=>{let D=localStorage.getItem("pokemon_device_id");return D||(D="device_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("pokemon_device_id",D)),D},ni=D=>{const se=gi();return Hn[D]?.ratings[se]||0},xr=D=>D>=9.3?"SS":D>=8?"S":D>=7?"A":D>=6?"B":D>=5?"C":D>=4?"D":"F",Xi=D=>`/tiers/${D.toLowerCase()}.png`,Qi=D=>{const se=Hn[D]?.averageRating||0;return xr(se)},Je=(D,se="info")=>{vr({message:D,type:se,show:!0}),setTimeout(()=>{vr(pe=>({...pe,show:!1}))},5e3)},Ta=D=>{if(!rt.current||D.target.closest("button"))return;const pe=rt.current.getBoundingClientRect(),De=pe.left+pe.width/2,Fe=pe.top+pe.height/2,Re=D.clientX-De,je=(D.clientY-Fe)/pe.height*-30,Ie=Re/pe.width*30;Nt({rotateX:je,rotateY:Ie})},Vi=()=>{Nt({rotateX:0,rotateY:0})},pi=D=>{C&&(D===C.imageUrl?_r(null):_r(D))},Aa=()=>ei&&C?ei:C?.imageUrl||"";H.useEffect(()=>{_r(null)},[C?.id]);const yi=D=>{if(!C)return;const se=C.additionalImages?.filter(pe=>pe!==D)||[];z(pe=>pe?{...pe,additionalImages:se}:null),ei===D&&_r(null)},Ra=async(D,se)=>{const pe=gi();try{Sa(De=>{const Re={...(De[D]||{averageRating:0,totalVotes:0,totalPoints:0,ratings:{}}).ratings,[pe]:se},$t=Object.values(Re).reduce((gn,Se)=>gn+Se,0),je=Object.keys(Re).length,Ie=je>0?$t/je:0,et=gn=>({1:10,2:15,3:21,4:28,5:36,6:45,7:55,8:66,9:78,10:91})[gn]||0,kt=Object.values(Re).reduce((gn,Se)=>gn+et(Se),0);return{...De,[D]:{averageRating:Ie,totalVotes:je,totalPoints:kt,ratings:Re}}}),await Zi(D,pe,se),Je(`✨ Rated ${se}/10 stars!`,"success")}catch(De){console.error("Error saving rating:",De),Je("❌ Failed to save rating. Please try again.","error")}},Zi=async(D,se,pe)=>{try{if(!await X4(D,se,pe))throw new Error("Failed to save rating to Firebase");await Ms(),await x();const Fe=JSON.parse(localStorage.getItem("pokemon_ratings")||"{}");Fe[D]||(Fe[D]={ratings:{},averageRating:0,totalVotes:0}),Fe[D].ratings[se]=pe;const Re=Object.values(Fe[D].ratings);Fe[D].averageRating=Re.reduce(($t,je)=>$t+je,0)/Re.length,Fe[D].totalVotes=Re.length,localStorage.setItem("pokemon_ratings",JSON.stringify(Fe))}catch(De){const Fe=JSON.parse(localStorage.getItem("pokemon_ratings")||"{}");Fe[D]||(Fe[D]={ratings:{},averageRating:0,totalVotes:0}),Fe[D].ratings[se]=pe;const Re=Object.values(Fe[D].ratings);throw Fe[D].averageRating=Re.reduce(($t,je)=>$t+je,0)/Re.length,Fe[D].totalVotes=Re.length,localStorage.setItem("pokemon_ratings",JSON.stringify(Fe)),De}},Ms=async()=>{try{const D=await Su();Sa(D);const se=await tA();console.log("Global rankings loaded:",se);const pe={};se.forEach(De=>{pe[De.pokemonId]=De.rank}),console.log("Ranking map:",pe),Ds(pe),localStorage.setItem("pokemon_ratings",JSON.stringify(D))}catch(D){console.error("Error loading ratings from Firebase:",D);const se=localStorage.getItem("pokemon_ratings");se&&Sa(JSON.parse(se))}};H.useEffect(()=>{Ms()},[]);const[ii,Na]=H.useState(""),[Ue,mt]=H.useState([]),[vt,En]=H.useState([]),[wr,Ro]=H.useState(!1),[lt,bi]=H.useState("all"),[jn,_i]=H.useState(null),[Sn,Ln]=H.useState("none"),[qt,ln]=H.useState(!0),[ut,ka]=H.useState({types:!1,artists:!1,evolution:!1,rating:!1}),[Ji,si]=H.useState(!0),qn=D=>{ka(se=>({...se,[D]:!se[D]}))},[Vn,No]=H.useState({averageRating:0,totalRatings:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}}),Ps=Array.from(new Set(o.filter(D=>D.hasArt&&D.types).flatMap(D=>D.types))),Er=ii||Ue.length>0||vt.length>0||wr||lt!=="all"||jn!==null||Sn!=="none",Ui=o.filter(D=>{if(Ce)return!0;if(Er&&!D.hasArt||ii&&!D.name.toLowerCase().includes(ii.toLowerCase()))return!1;if(Ue.length>0&&D.types){const pe=Ue.filter(De=>!["U0","U1","U2"].includes(De));if(pe.length>0&&!pe.some(Fe=>D.types.includes(Fe)))return!1}const se=Ue.filter(pe=>["U0","U1","U2"].includes(pe));if(se.length>0&&(!D.unique||!se.includes(D.unique))||vt.length>0&&D.artist&&!vt.includes(D.artist)||wr&&D.unique!=="U0")return!1;if(lt!=="all"&&D.evolutionStage!==void 0){if(lt==="stage0"&&D.evolutionStage!==0||lt==="stage1"&&D.evolutionStage!==1||lt==="stage2"&&D.evolutionStage!==2||lt==="gmax"&&D.evolutionStage!==3||lt==="legendary"&&D.evolutionStage!==4||lt==="mega"&&D.evolutionStage!==5||lt==="evolved"&&D.evolutionStage===0)return!1}else if(lt!=="all"&&D.evolutionStage===void 0)return!1;if(jn!==null&&D.firebaseId){const pe=gi();if(Hn[D.firebaseId]?.ratings[pe]!==jn)return!1}return!0}),Dt=(()=>{if(Sn==="none")return Ui;const D=Ui.map(se=>({...se,globalRank:se.firebaseId&&ti[se.firebaseId]||1/0}));return Sn==="ascending"?D.sort((se,pe)=>se.globalRank-pe.globalRank):D.sort((se,pe)=>pe.globalRank-se.globalRank)})(),Gt=()=>{if(!C)return;const D=Dt.findIndex(se=>se.id===C.id);D>0&&z(Dt[D-1])},es=()=>{if(!C)return;const D=Dt.findIndex(se=>se.id===C.id);D<Dt.length-1&&z(Dt[D+1])};H.useEffect(()=>{const D=se=>{se.key==="ArrowLeft"?Gt():se.key==="ArrowRight"&&es()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[C,Dt]);const Sr=D=>({Fire:"type-fire",Water:"type-water",Electric:"type-electric",Grass:"type-grass",Psychic:"type-psychic",Dragon:"type-dragon",Dark:"type-dark",Ghost:"type-ghost",Steel:"type-steel",Normal:"type-normal",Ice:"type-ice",Fighting:"type-fighting",Poison:"type-poison",Ground:"type-ground",Flying:"type-flying",Bug:"type-bug",Rock:"type-rock",Fairy:"type-fairy"})[D]||"type-normal";return p.jsxs(p.Fragment,{children:[p.jsx(Ud,{}),p.jsxs("div",{className:"max-w-full mx-auto relative min-h-screen transform scale-90 origin-top mt-4",children:[i&&p.jsx("div",{className:"text-center py-16",children:p.jsxs("div",{className:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-purple-500 hover:bg-purple-400 transition ease-in-out duration-150",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Pokemon data from Firebase..."]})}),!i&&p.jsx(p.Fragment,{children:p.jsxs("div",{className:"grid grid-cols-12 gap-4",style:{height:"calc(100vh - 80px)"},children:[p.jsx("div",{className:"col-span-2 space-y-2 h-full custom-scrollbar animate-slide-in-left",children:p.jsxs("div",{className:"overflow-y-auto space-y-2",style:{maxHeight:"calc(100vh - 80px)"},children:[p.jsx("div",{className:"text-center mt-2 animate-filter-item",style:{animationDelay:"0.3s"},children:p.jsx("h2",{className:"text-white font-bold text-base mb-2",children:"FILTERS"})}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 animate-filter-item",style:{animationDelay:"0.4s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("h3",{className:"text-white font-semibold text-sm",children:"Types"}),p.jsx("button",{onClick:()=>qn("types"),className:"text-white/70 hover:text-white transition-colors text-sm",children:ut.types?"▼":"▲"})]}),!ut.types&&p.jsx("div",{className:"grid grid-cols-3 gap-1",children:Ps.map(D=>p.jsx("button",{onClick:()=>{Ue.includes(D)?mt(Ue.filter(se=>se!==D)):mt([...Ue,D])},className:`px-2 py-1 rounded text-xs font-semibold transition-all ${Ue.includes(D)?`${Sr(D)} text-white scale-105`:"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 animate-filter-item",style:{animationDelay:"0.5s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("h3",{className:"text-white font-semibold text-sm",children:"Artists & Uniques"}),p.jsx("button",{onClick:()=>qn("artists"),className:"text-white/70 hover:text-white transition-colors text-sm",children:ut.artists?"▼":"▲"})]}),!ut.artists&&p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-1 text-sm",children:"Artists"}),p.jsx("div",{className:"space-y-1",children:["DAVE","JOAO","GUTO"].map(D=>p.jsx("button",{onClick:()=>{vt.includes(D)?En(vt.filter(se=>se!==D)):En([...vt,D])},className:`w-full px-2 py-1 rounded text-xs font-semibold transition-all ${vt.includes(D)?"bg-yellow-400 text-black":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-1 text-sm",children:"Uniques"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("button",{onClick:()=>{Ro(!1),Ue.includes("U0")?mt(Ue.filter(D=>D!=="U0")):mt([...Ue.filter(D=>!["U0","U1","U2"].includes(D)),"U0"])},className:`w-full px-2 py-1 rounded text-xs font-semibold transition-all ${Ue.includes("U0")?"bg-gray-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Doesn't Evolve"}),p.jsx("button",{onClick:()=>{Ue.includes("U1")?mt(Ue.filter(D=>D!=="U1")):mt([...Ue.filter(D=>!["U0","U1","U2"].includes(D)),"U1"])},className:`w-full px-2 py-1 rounded text-xs font-semibold transition-all ${Ue.includes("U1")?"bg-gray-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Evolves Once"}),p.jsx("button",{onClick:()=>{Ue.includes("U2")?mt(Ue.filter(D=>D!=="U2")):mt([...Ue.filter(D=>!["U0","U1","U2"].includes(D)),"U2"])},className:`w-full px-2 py-1 rounded text-xs font-semibold transition-all ${Ue.includes("U2")?"bg-gray-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Evolves Twice"})]})]})]})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 animate-filter-item",style:{animationDelay:"0.7s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("h3",{className:"text-white font-semibold text-sm",children:"Evolution"}),p.jsx("button",{onClick:()=>qn("evolution"),className:"text-white/70 hover:text-white transition-colors text-sm",children:ut.evolution?"▼":"▲"})]}),!ut.evolution&&p.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[p.jsx("button",{onClick:()=>bi(lt==="stage0"?"all":"stage0"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="stage0"?"bg-green-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Stage 0"}),p.jsx("button",{onClick:()=>bi(lt==="stage1"?"all":"stage1"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="stage1"?"bg-yellow-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Stage 1"}),p.jsx("button",{onClick:()=>bi(lt==="stage2"?"all":"stage2"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="stage2"?"bg-red-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Stage 2"}),p.jsx("button",{onClick:()=>bi(lt==="gmax"?"all":"gmax"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="gmax"?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"GMAX"}),p.jsx("button",{onClick:()=>bi(lt==="legendary"?"all":"legendary"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="legendary"?"bg-orange-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"Legendary"}),p.jsx("button",{onClick:()=>bi(lt==="mega"?"all":"mega"),className:`px-2 py-1 rounded text-xs font-semibold transition-all ${lt==="mega"?"bg-pink-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"MEGA"})]})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 animate-filter-item",style:{animationDelay:"0.7s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("h3",{className:"text-white font-semibold text-sm",children:"Global Ranking"}),p.jsx("button",{onClick:()=>qn("rating"),className:"text-white/70 hover:text-white transition-colors text-sm",children:ut.rating?"▼":"▲"})]}),!ut.rating&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[p.jsx("button",{onClick:()=>Ln("none"),className:`px-1 py-1 rounded text-xs font-semibold transition-all ${Sn==="none"?"bg-gray-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"None"}),p.jsx("button",{onClick:()=>Ln("ascending"),className:`px-1 py-1 rounded text-xs font-semibold transition-all ${Sn==="ascending"?"bg-green-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"↑ Asc"}),p.jsx("button",{onClick:()=>Ln("descending"),className:`px-1 py-1 rounded text-xs font-semibold transition-all ${Sn==="descending"?"bg-red-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:"↓ Desc"})]})}),p.jsx("div",{children:p.jsx("button",{onClick:()=>ln(!qt),className:`w-full px-2 py-1 rounded text-xs font-semibold transition-all ${qt?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:qt?"★ Hide Tiers":"★ Show Tiers"})})]})]}),Er&&p.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 animate-filter-item",style:{animationDelay:"0.8s"},children:p.jsx("button",{onClick:()=>{Na(""),mt([]),En([]),Ro(!1),bi("all"),_i(null),Ln("none"),ln(!1),z(null)},className:"w-full px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-sm",children:"Clear All Filters"})}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-3 animate-filter-item mt-4",style:{animationDelay:"0.9s"},children:[p.jsx("h3",{className:"text-white font-semibold mb-2 text-sm text-center",children:"Your Rating Stats"}),p.jsxs("div",{className:"mb-3 text-center",children:[p.jsx("div",{className:"text-yellow-300 font-bold text-lg",children:Vn.averageRating>0?Vn.averageRating.toFixed(1):"0.0"}),p.jsx("div",{className:"text-white/70 text-xs",children:"Average Stars"}),p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"text-white/50 text-xs",children:"Votes"}),p.jsxs("span",{className:"text-white/70 text-xs font-semibold",children:[Vn.totalRatings,"/",o.filter(D=>D.hasArt).length]})]}),p.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 overflow-hidden",children:p.jsx("div",{className:`h-full rounded-full transition-all duration-500 ease-out ${Vn.totalRatings>=o.filter(D=>D.hasArt).length&&o.filter(D=>D.hasArt).length>0?"bg-gradient-to-r from-green-400 to-green-500":"bg-gradient-to-r from-yellow-400 to-yellow-500"}`,style:{width:`${o.filter(D=>D.hasArt).length>0?Math.min(100,Vn.totalRatings/o.filter(D=>D.hasArt).length*100):0}%`}})})]})]}),p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("h4",{className:"text-white font-semibold text-xs",children:"Rating Distribution"}),p.jsx("button",{onClick:()=>si(!Ji),className:"text-white/70 hover:text-white transition-colors text-sm",children:Ji?"▼":"▲"})]}),!Ji&&p.jsx("div",{className:"space-y-1",children:[10,9,8,7,6,5,4,3,2,1].map(D=>p.jsxs("div",{className:"flex items-center justify-between text-xs",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"text-yellow-300 w-4 text-center font-bold",children:D}),p.jsx("svg",{className:"w-3 h-3 text-yellow-300 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]}),p.jsx("button",{onClick:()=>{_i(jn===D?null:D)},className:`px-2 py-1 rounded text-xs font-semibold transition-all ${jn===D?"bg-blue-500 text-white":Vn.ratingDistribution[D]>0?"bg-white/20 text-white/90 hover:bg-white/30":"bg-white/10 text-white/50 cursor-default"}`,disabled:Vn.ratingDistribution[D]===0,title:Vn.ratingDistribution[D]>0?`Filter Pokemon you rated ${D} stars`:`No Pokemon rated ${D} stars`,children:Vn.ratingDistribution[D]})]},D))}),Vn.totalRatings===0&&p.jsx("div",{className:"text-center text-white/50 text-xs mt-2",children:"No ratings yet. Start rating each Pokemon!"})]})]})}),p.jsxs("div",{className:"col-span-6 h-full flex flex-col animate-slide-in-top",children:[p.jsxs("div",{className:"text-center flex-shrink-0 mt-2",children:[p.jsxs("div",{className:"flex items-center justify-center gap-3",children:[p.jsx("h2",{className:`font-bold text-base mb-2 ${Ce?"text-blue-300":"text-white"}`,children:Ce?"POSITION EDITOR MODE":"POKEMON LIST"}),!Ce&&p.jsxs("div",{className:"text-white/60 text-sm mb-2",children:[p.jsx("span",{className:"text-yellow-300 font-bold",children:Dt.filter(D=>D.hasArt).length})," / 151 Pokemon Found",Er&&p.jsxs("span",{className:"ml-2 text-blue-300",children:["(",Dt.length," filtered)"]}),jn!==null&&p.jsxs("span",{className:"ml-2 text-purple-300 text-xs",children:["[You rated ",jn,"★]"]})]})]}),Ce&&p.jsx("p",{className:"text-blue-200 text-xs mb-2",children:"Drag Pokemon with artwork to swap their Pokedex positions"})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2 flex-shrink-0 mb-2",children:[p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("input",{type:"text",placeholder:Ce?"Position Editor Mode - Search disabled":"Search Pokemon name...",value:Ce?"":ii,onChange:D=>!Ce&&Na(D.target.value),disabled:Ce,className:`flex-1 px-2 py-1 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-sm ${Ce?"opacity-50 cursor-not-allowed":""}`}),p.jsx("button",{onClick:()=>Zn(!Ce),className:`px-2 py-1 rounded-lg font-semibold transition-all text-sm ${Ce?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"}`,title:Ce?"Exit Position Editor":"Edit Pokemon Positions",children:Ce?"✕":"✏️"})]}),Ce&&p.jsx("div",{className:"mt-3 p-3 bg-blue-500/20 border border-blue-400/30 rounded-lg",children:p.jsxs("p",{className:"text-blue-200 text-sm",children:["🎯 ",p.jsx("strong",{children:"Position Editor Mode:"})," Drag and drop Pokemon to swap their Pokedex positions."]})})]}),wa&&p.jsx("div",{className:"fixed top-4 left-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",children:zn}),Bn.show&&p.jsx("div",{className:`fixed top-4 right-4 px-6 py-4 rounded-lg shadow-2xl z-50 transform transition-all duration-500 ease-in-out animate-bounce ${Bn.type==="success"?"bg-gradient-to-r from-green-500 to-green-600":Bn.type==="error"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-blue-500 to-blue-600"} text-white border border-white/20 backdrop-blur-sm`,children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs("div",{className:"flex-shrink-0",children:[Bn.type==="success"&&p.jsx("span",{className:"text-2xl",children:"✅"}),Bn.type==="error"&&p.jsx("span",{className:"text-2xl",children:"❌"}),Bn.type==="info"&&p.jsx("span",{className:"text-2xl",children:"ℹ️"})]}),p.jsx("span",{className:"font-medium",children:Bn.message})]})}),p.jsx("div",{className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-2 overflow-y-auto custom-scrollbar",style:{maxHeight:"calc(100vh - 170px)"},children:p.jsxs("div",{className:"space-y-2",children:[Dt.map((D,se)=>p.jsxs("div",{className:`flex items-center transition-all duration-300 ease-in-out ${qt?"gap-2":"gap-0"}`,children:[p.jsxs("div",{draggable:Ce&&D.hasArt,onDragStart:()=>P(D),onDragOver:I,onDrop:()=>T(D),onClick:()=>{Ce||(z(D),be(!1),ue(!1),te(!1))},className:`flex items-center p-2 m-1 rounded-lg border transition-all duration-300 ease-in-out animate-fade-in-up ${qt?"flex-1":"w-full"} ${Ce?D.hasArt?"cursor-grab active:cursor-grabbing bg-blue-500/10 border-blue-400/50 hover:bg-blue-500/20 hover:border-blue-400":"cursor-not-allowed bg-gray-500/10 border-gray-400/20":`cursor-pointer ${C?.id===D.id?"bg-yellow-400/20 border-yellow-400 scale-[1.02]":D.hasArt?"bg-white/10 border-white/20 hover:bg-white/20 hover:border-white/40":"bg-white/5 border-white/10 hover:bg-white/10"}`} ${Is&&Jn?.id===D.id?"opacity-50 scale-95":""}`,style:{animationDelay:`${se*(.03*f)}s`},children:[p.jsx("div",{className:"flex-shrink-0 w-10 text-center",children:p.jsxs("span",{className:"text-white/80 font-bold text-xs",children:["#",D.id.toString().padStart(3,"0")]})}),p.jsx("div",{className:"flex-shrink-0 w-12 h-12 ml-2 relative",children:D.hasArt?p.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover rounded-lg"}):p.jsx("div",{className:"w-full h-full bg-white/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-white/40 text-xl",children:"?"})})}),p.jsxs("div",{className:"flex-1 ml-3",children:[p.jsx("h3",{className:"text-white font-semibold text-base",children:D.name}),D.hasArt?p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs("p",{className:"text-white/60 text-xs",children:["by ",D.artist]}),D.types&&p.jsx("div",{className:"flex gap-1",children:D.types.slice(0,2).map(pe=>p.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs font-semibold text-white ${Sr(pe)}`,children:pe},pe))})]}):p.jsx("p",{className:"text-white/40 text-xs",children:"No artwork yet"})]}),p.jsxs("div",{className:"flex-shrink-0 flex flex-col items-end space-y-1",children:[Ce&&D.hasArt&&p.jsxs("div",{className:"flex items-center text-blue-300 text-xs",children:[p.jsx("span",{className:"mr-1",children:"⋮⋮"}),p.jsx("span",{children:"Drag"})]}),Ce&&!D.hasArt&&p.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[p.jsx("span",{className:"mr-1",children:"✕"}),p.jsx("span",{children:"Empty"})]}),D.firebaseId&&(ti[D.firebaseId]?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"bg-yellow-200 text-xs font-bold px-1.5 py-0.5 rounded",children:Hn[D.firebaseId]?.averageRating?`${Hn[D.firebaseId].averageRating.toFixed(1)}★`:"0.0★"}),p.jsxs("span",{className:"bg-yellow-500 text-black px-1.5 py-0.5 rounded text-xs font-bold",children:["#",ti[D.firebaseId]]})]}):p.jsx("span",{className:"bg-gray-500 text-white px-1.5 py-0.5 rounded text-xs font-bold",children:"Unranked"})),D.evolutionStage!==void 0&&p.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs font-bold text-white ${D.evolutionStage===0?"bg-green-500":D.evolutionStage===1?"bg-yellow-500":D.evolutionStage===2?"bg-red-500":D.evolutionStage===3?"bg-purple-500":D.evolutionStage===4?"bg-orange-500":D.evolutionStage===5?"bg-pink-500":"bg-gray-500"}`,children:D.evolutionStage===0?"Stage 0":D.evolutionStage===1?"Stage 1":D.evolutionStage===2?"Stage 2":D.evolutionStage===3?"GMAX":D.evolutionStage===4?"Legendary":D.evolutionStage===5?"MEGA":`Stage ${D.evolutionStage}`})]})]}),p.jsx("div",{className:`flex-shrink-0 flex items-center justify-center transition-all duration-300 ease-in-out ${qt?"w-14 h-14 opacity-100":"w-0 h-14 opacity-0 overflow-hidden"}`,children:qt&&D.firebaseId&&Hn[D.firebaseId]?.averageRating?p.jsx("img",{src:Xi(Qi(D.firebaseId)),alt:`${Qi(D.firebaseId)} Tier`,className:"w-12 h-12 object-contain transition-transform duration-300 ease-in-out"}):qt?p.jsx("div",{className:"w-12 h-12"}):null})]},D.id)),Dt.length===0&&p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-white/60",children:"No Pokemon match your current filters"})})]})})]}),p.jsx("div",{className:"col-span-4 space-y-2 h-full custom-scrollbar animate-slide-in-right",children:p.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 80px)"},children:[p.jsx("div",{className:"text-center mt-2 animate-filter-item",style:{animationDelay:"0.4s"},children:p.jsx("h2",{className:"text-white font-bold text-base mb-2",children:"DETAILS"})}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-3 animate-filter-item relative",style:{animationDelay:"0.5s"},children:[qt&&C&&C.firebaseId&&Hn[C.firebaseId]?.averageRating&&p.jsx("div",{className:"absolute top-3 right-3 z-20 bg-white-800 backdrop-blur-sm rounded-lg p-2 border border-white/30 shadow-lg",children:p.jsx("img",{src:Xi(Qi(C.firebaseId)),alt:`${Qi(C.firebaseId)} Tier`,className:"w-14 h-14 object-contain"})}),C&&C.hasArt?p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"w-full mx-auto perspective-1000 flex items-center justify-center relative",children:[p.jsx("button",{onClick:Gt,disabled:!C||Dt.findIndex(D=>D.id===C.id)===0,className:"absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-white/20 hover:bg-white/30 disabled:bg-gray-500/20 disabled:cursor-not-allowed backdrop-blur-md rounded-full p-3 transition-all duration-200 group",title:"Previous Pokemon (Left Arrow)",children:p.jsx("svg",{className:"w-6 h-6 text-white group-disabled:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsxs("div",{ref:rt,onMouseMove:Ta,onMouseLeave:Vi,className:"relative w-full max-w-xl group cursor-pointer mx-16",style:{perspective:"1000px"},children:[p.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-2 w-3/4 h-4 bg-black/40 rounded-full blur-md opacity-60 group-hover:opacity-80 transition-all duration-300"}),p.jsx("div",{className:"relative w-full rounded-lg overflow-hidden transform-gpu transition-transform duration-300 ease-out group-hover:scale-105",style:{transform:`rotateX(${Ea.rotateX}deg) rotateY(${Ea.rotateY}deg)`,transformStyle:"preserve-3d"},children:p.jsx("img",{src:Aa(),alt:C.name,className:"w-full h-auto object-contain max-h-[32rem]"})}),C.additionalImages&&C.additionalImages.length>0&&p.jsxs("div",{className:"absolute bottom-0 right-[-60px] flex flex-col gap-2 z-10",children:[ei&&p.jsx("button",{onClick:()=>pi(C.imageUrl),className:"w-12 h-12 rounded-lg overflow-hidden border-2 transition-all duration-200 hover:scale-110 border-yellow-400/70 hover:border-yellow-300 shadow-md shadow-yellow-400/25",title:"Main image",children:p.jsx("img",{src:C.imageUrl,alt:"Main",className:"w-full h-full object-cover"})}),C.additionalImages.map((D,se)=>ei===D?null:p.jsx("button",{onClick:()=>pi(D),className:"w-12 h-12 rounded-lg overflow-hidden border-2 transition-all duration-200 hover:scale-110 border-white/40 hover:border-white/60",title:`Additional image ${se+1}`,children:p.jsx("img",{src:D,alt:`Additional ${se+1}`,className:"w-full h-full object-cover"})},se))]})]}),p.jsx("button",{onClick:es,disabled:!C||Dt.findIndex(D=>D.id===C.id)===Dt.length-1,className:"absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-white/20 hover:bg-white/30 disabled:bg-gray-500/20 disabled:cursor-not-allowed backdrop-blur-md rounded-full p-3 transition-all duration-200 group",title:"Next Pokemon (Right Arrow)",children:p.jsx("svg",{className:"w-6 h-6 text-white group-disabled:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),p.jsx("div",{className:"text-center",children:p.jsxs("span",{className:"bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-bold",children:["#",C.id.toString().padStart(3,"0")]})}),p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:C.name}),C.types&&p.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:C.types.map(D=>p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold text-white ${Sr(D)}`,children:D},D))})]}),p.jsxs("p",{className:"text-white/80 text-center text-sm",children:["Created by ",p.jsx("span",{className:"text-yellow-300 font-semibold",children:C.artist})]}),p.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[p.jsx("div",{className:"flex justify-center items-center space-x-1 mb-2",children:[1,2,3,4,5,6,7,8,9,10].map(D=>p.jsx("button",{onClick:()=>Ra(C.firebaseId,D),onMouseEnter:()=>Zt(D),onMouseLeave:()=>Zt(0),className:"p-1 transition-all duration-200 transform hover:scale-110",title:`Rate ${D} star${D>1?"s":""}`,children:p.jsx("svg",{className:`w-6 h-6 transition-all duration-200 ${D<=(On||ni(C.firebaseId))?"text-yellow-400 drop-shadow-[0_0_8px_rgba(255,255,0,0.8)]":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},D))}),p.jsx("div",{className:"text-center",children:C.firebaseId&&(ti[C.firebaseId]?p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"text-yellow-300 text-sm font-semibold mt-1",children:["Global Rank: #",ti[C.firebaseId]]}),Hn[C.firebaseId]?.averageRating&&p.jsxs("p",{className:"text-yellow-200 text-xs font-medium",children:["Average: ",Hn[C.firebaseId].averageRating.toFixed(1),"★"]})]}):p.jsx("p",{className:"text-gray-400 text-sm font-semibold mt-1",children:"Unranked - No votes yet"}))})]}),C&&C.hasArt&&C.evolutionStage!==void 0&&C.evolutionStage!==4&&(()=>{const D=C.id,se=C.evolutionStage,pe=[],De=new Set,Fe=je=>o.find(Ie=>Ie.id===je&&Ie.hasArt&&Ie.evolutionStage!==void 0),Re=je=>{je&&!De.has(je.id)&&(pe.push(je),De.add(je.id))};let $t=D;for(let je=D-1;je>=1;je--){const Ie=Fe(je);if(Ie){if(Ie.evolutionStage===0){if(Ie.unique==="U0")break;$t=je;break}if(!(Ie.evolutionStage!==void 0&&se!==void 0&&Ie.evolutionStage<se)&&Ie.evolutionStage!==se)break}}for(let je=$t;je<=151;je++){const Ie=Fe(je);if(!Ie)continue;if(Ie.evolutionStage===0&&Ie.unique==="U0"&&je!==D&&je!==$t||(Re(Ie),Ie.evolutionStage===0&&Ie.unique==="U0"&&je!==D))break;const et=Fe(je+1);if(!et||et.evolutionStage===0&&et.unique==="U0"||et.evolutionStage===0&&pe.some(kt=>kt.evolutionStage===0))break;if(!(et.evolutionStage!==void 0&&Ie.evolutionStage!==void 0&&(et.evolutionStage>Ie.evolutionStage||et.evolutionStage===Ie.evolutionStage||et.evolutionStage===5||et.evolutionStage===3)))break}if(pe.sort((je,Ie)=>je.evolutionStage!==Ie.evolutionStage?(je.evolutionStage||0)-(Ie.evolutionStage||0):je.id-Ie.id),pe.length>1){const je={};pe.forEach(kt=>{const gn=kt.evolutionStage||0;je[gn]||(je[gn]=[]),je[gn].push(kt)});const Ie=Object.keys(je).map(Number).sort((kt,gn)=>kt-gn),et=Ie.length>3;return p.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[p.jsx("h4",{className:"text-white/80 text-sm font-semibold mb-3 text-center",children:"Evolution Line"}),p.jsx("div",{className:`flex items-center justify-center ${et?"gap-1":"gap-4"}`,children:Ie.map((kt,gn)=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"flex flex-col gap-2",children:je[kt].map(Se=>p.jsxs("button",{onClick:()=>z(Se),disabled:Se.id===C.id,className:`flex items-center ${et?"gap-1 px-2 py-1":"gap-2 px-3 py-2"} rounded-lg transition-all duration-200 min-w-0 ${Se.id===C.id?"bg-yellow-400/30 border border-yellow-400 cursor-default":"bg-white/10 border border-white/20 hover:bg-white/20 hover:border-white/40 hover:scale-[1.02] cursor-pointer"}`,title:`${Se.name} - ${Se.evolutionStage===0?"Base Form":Se.evolutionStage===1?"First Evolution":Se.evolutionStage===2?"Second Evolution":Se.evolutionStage===3?"GMAX Form":Se.evolutionStage===4?"Legendary Form":Se.evolutionStage===5?"MEGA Form":"Unknown Form"} ${Se.id===C.id?"(Current)":""}`,children:[p.jsx("div",{className:`${et?"w-8 h-8":"w-10 h-10"} rounded-lg overflow-hidden border border-white/20 flex-shrink-0`,children:p.jsx("img",{src:Se.imageUrl,alt:Se.name,className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left min-w-0 flex-1",children:[p.jsxs("div",{className:`text-xs font-semibold ${Se.id===C.id?"text-yellow-300":"text-white"}`,children:["#",Se.id.toString().padStart(3,"0")]}),p.jsx("div",{className:`text-xs font-medium truncate ${et?"max-w-12":"max-w-16"} ${Se.id===C.id?"text-yellow-200":"text-white/90"}`,children:Se.name}),p.jsx("div",{className:`inline-block ${et?"text-xs px-1 py-0.5":"text-xs px-1.5 py-0.5"} rounded font-bold text-white mt-0.5 ${Se.evolutionStage===0?"bg-green-500":Se.evolutionStage===1?"bg-yellow-500":Se.evolutionStage===2?"bg-red-500":Se.evolutionStage===3?"bg-purple-500":Se.evolutionStage===4?"bg-orange-500":Se.evolutionStage===5?"bg-pink-500":"bg-gray-500"}`,children:et?Se.evolutionStage===0?"S0":Se.evolutionStage===1?"S1":Se.evolutionStage===2?"S2":Se.evolutionStage===3?"GM":Se.evolutionStage===4?"LG":Se.evolutionStage===5?"MG":`S${Se.evolutionStage}`:Se.evolutionStage===0?"Stage 0":Se.evolutionStage===1?"Stage 1":Se.evolutionStage===2?"Stage 2":Se.evolutionStage===3?"GMAX":Se.evolutionStage===4?"Legendary":Se.evolutionStage===5?"MEGA":`Stage ${Se.evolutionStage}`})]})]},Se.id))}),gn<Ie.length-1&&p.jsx("div",{className:`${et?"mx-1":"mx-2"} text-white/40 ${et?"text-sm":"text-xl"}`,children:"→"})]},kt))})]})}return null})(),C.firebaseId&&p.jsxs("div",{className:"pt-2 border-t border-white/20",children:[p.jsx("button",{onClick:()=>te(!ae),className:"w-full px-2 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-300 flex items-center justify-center",title:"Toggle Actions",children:p.jsx("span",{className:`transform transition-transform duration-300 text-sm ${ae?"rotate-180":"rotate-0"}`,children:"⏷"})}),p.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${ae?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:p.jsxs("div",{className:"pt-3",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>n(A),className:"flex-[4] px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold transform hover:scale-[1.02]",children:"✏️ Edit Pokemon"}),p.jsx("button",{onClick:()=>be(!0),className:"flex-1 px-2 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-center transform hover:scale-[1.02]",title:"Delete Pokemon",children:"🗑️"})]}),L&&p.jsxs("div",{className:"mt-3 p-3 bg-red-500/20 border border-red-500/40 rounded-lg animate-fade-in-up",children:[p.jsxs("p",{className:"text-white text-center text-sm mb-3",children:["Are you sure you want to delete ",p.jsx("strong",{children:C.name}),"?"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>be(!1),className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold text-sm",children:"Cancel"}),p.jsx("button",{onClick:w,disabled:Ae,className:"flex-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-sm disabled:bg-red-400 disabled:cursor-not-allowed",children:Ae?"Deleting...":"Delete"})]})]})]})})]})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[p.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-full flex items-center justify-center mb-4",children:p.jsx("span",{className:"text-white/40 text-4xl",children:"?"})}),p.jsx("h3",{className:"text-white/60 text-lg font-semibold mb-2",children:"No Pokemon Selected"}),p.jsx("p",{className:"text-white/40 text-sm",children:"Click on a Pokemon from the list to view details"})]})]}),p.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-3 mt-2",style:{animationDelay:"0.6s"},children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-white font-bold text-lg",children:"ADD NEW POKEMON"}),p.jsx("p",{className:"text-white/60 text-sm",children:"Add a new Pokemon to your collection"})]}),p.jsxs("button",{onClick:()=>n(()=>V(!0)),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold flex items-center space-x-2",children:[p.jsx("span",{className:"text-xl",children:"➕"}),p.jsx("span",{children:"Add Pokemon"})]})]})})]})})]})})]}),ee&&C&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Pokemon"}),p.jsx("button",{onClick:()=>ue(!1),className:"text-white/60 hover:text-white text-2xl",children:"✕"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Pokemon Name *"}),p.jsx("input",{type:"text",value:Y.name,onChange:D=>ge(se=>({...se,name:D.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter Pokemon name"})]}),p.jsxs("div",{onPaste:le,tabIndex:0,className:"outline-none",children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Pokemon Image ",p.jsx("span",{className:"text-xs text-white/60",children:"(Upload or paste new image)"})]}),C?.imageUrl&&p.jsxs("div",{className:"mb-3",children:[p.jsx("p",{className:"text-white/60 text-sm mb-2",children:"Current Image:"}),p.jsx("div",{className:"w-32 h-32 rounded-lg overflow-hidden border border-white/20",children:p.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-full h-full object-cover"})})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-white/60 text-sm mb-2",children:"Upload New Image (optional):"}),p.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),Y.image&&p.jsxs("p",{className:"text-green-400 text-sm mt-2",children:["✅ New image selected: ",Y.image.name]}),p.jsx("p",{className:"text-white/40 text-xs mt-1",children:"You can paste an image here (Ctrl+V or Cmd+V) or click to browse files. Max size: 5MB."})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Additional Images ",p.jsx("span",{className:"text-xs text-white/60",children:"(Up to 3 images)"})]}),C.additionalImages&&C.additionalImages.length>0&&p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-white/60 text-sm mb-2",children:"Current Additional Images:"}),p.jsx("div",{className:"flex gap-3 flex-wrap",children:C.additionalImages.map((D,se)=>p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border border-white/20",children:p.jsx("img",{src:D,alt:`Additional ${se+1}`,className:"w-full h-full object-cover"})}),p.jsx("button",{onClick:()=>yi(D),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full text-xs flex items-center justify-center transition-all duration-200 opacity-0 group-hover:opacity-100",title:"Delete this image",children:"✕"})]},se))})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-white/60 text-sm mb-2",children:"Add New Additional Images:"}),p.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Z,className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-500 file:text-white hover:file:bg-purple-600"}),Y.additionalImages.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsxs("p",{className:"text-green-400 text-sm mb-2",children:["✅ ",Y.additionalImages.length," new image",Y.additionalImages.length>1?"s":""," selected"]}),p.jsx("div",{className:"flex gap-2 flex-wrap",children:Y.additionalImages.map((D,se)=>p.jsx("div",{className:"text-xs text-white/60 bg-white/10 px-2 py-1 rounded",children:D.name},se))})]}),p.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Select up to 3 additional images. These will appear as clickable buttons in the detail view. Max size: 5MB each."})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Artist *"}),p.jsx("div",{className:"flex gap-2",children:["DAVE","JOAO","GUTO"].map(D=>p.jsx("button",{onClick:()=>ge(se=>({...se,artist:D})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${Y.artist===D?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Types * (Select 1-2)"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto",children:["Normal","Fire","Water","Electric","Grass","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dragon","Dark","Steel","Fairy"].map(D=>p.jsx("button",{onClick:()=>O(D),disabled:!Y.types.includes(D)&&Y.types.length>=2,className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${Y.types.includes(D)?"bg-yellow-400 text-black":!Y.types.includes(D)&&Y.types.length>=2?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))}),p.jsxs("p",{className:"text-white/60 text-sm mt-2",children:["Selected: ",Y.types.join(", ")||"None"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Unique Evolution Status"}),p.jsx("div",{className:"flex gap-2",children:[{value:"",label:"Not Unique"},{value:"U0",label:"No Evolution (U0)"},{value:"U1",label:"One Evolution (U1)"},{value:"U2",label:"Two Evolutions (U2)"}].map(D=>p.jsx("button",{onClick:()=>ge(se=>({...se,unique:D.value})),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${Y.unique===D.value?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D.label},D.value))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Evolution Stage"}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:0,label:"Base Form (Stage 0)"},{value:1,label:"First Evolution (Stage 1)"},{value:2,label:"Second Evolution (Stage 2)"},{value:3,label:"GMAX"},{value:4,label:"Legendary"},{value:5,label:"MEGA"}].map(D=>p.jsx("button",{onClick:()=>ge(se=>({...se,evolutionStage:D.value})),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${Y.evolutionStage===D.value?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D.label},D.value))})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{onClick:()=>ue(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"}),p.jsx("button",{onClick:k,disabled:_t||!Y.name||!Y.artist||Y.types.length===0,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold disabled:bg-blue-400 disabled:cursor-not-allowed",children:_t?"Saving...":"Save Changes"})]})]})]})}),xe&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:"Add New Pokemon"}),p.jsx("button",{onClick:()=>V(!1),className:"text-white/60 hover:text-white text-2xl",children:"✕"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Pokemon Name *"}),p.jsx("input",{type:"text",value:ye.name,onChange:D=>_e(se=>({...se,name:D.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter Pokemon name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Artist *"}),p.jsx("div",{className:"flex gap-2",children:["DAVE","JOAO","GUTO"].map(D=>p.jsx("button",{onClick:()=>_e(se=>({...se,artist:D})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${ye.artist===D?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))})]}),p.jsxs("div",{onPaste:$,tabIndex:0,className:"outline-none",children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Pokemon Image * ",p.jsx("span",{className:"text-xs text-white/60",children:"(Upload or paste)"})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),ye.image&&p.jsxs("p",{className:"text-green-400 text-sm mt-2",children:["✅ ",ye.image.name," selected"]}),p.jsx("p",{className:"text-white/40 text-xs mt-1",children:"You can paste an image here (Ctrl+V or Cmd+V) or click to browse files"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Types * (Select 1-2)"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto",children:["Normal","Fire","Water","Electric","Grass","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dragon","Dark","Steel","Fairy"].map(D=>p.jsx("button",{onClick:()=>j(D),disabled:!ye.types.includes(D)&&ye.types.length>=2,className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${ye.types.includes(D)?"bg-yellow-400 text-black":!ye.types.includes(D)&&ye.types.length>=2?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D},D))}),p.jsxs("p",{className:"text-white/60 text-sm mt-2",children:["Selected: ",ye.types.join(", ")||"None"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Unique Evolution Status"}),p.jsx("div",{className:"flex gap-2",children:[{value:"",label:"Not Unique"},{value:"U0",label:"No Evolution (U0)"},{value:"U1",label:"One Evolution (U1)"},{value:"U2",label:"Two Evolutions (U2)"}].map(D=>p.jsx("button",{onClick:()=>_e(se=>({...se,unique:D.value})),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${ye.unique===D.value?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D.label},D.value))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Evolution Stage"}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:0,label:"Base Form (Stage 0)"},{value:1,label:"First Evolution (Stage 1)"},{value:2,label:"Second Evolution (Stage 2)"},{value:3,label:"GMAX"},{value:4,label:"Legendary"},{value:5,label:"MEGA"}].map(D=>p.jsx("button",{onClick:()=>_e(se=>({...se,evolutionStage:D.value})),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${ye.evolutionStage===D.value?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:D.label},D.value))})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"}),p.jsx("button",{onClick:R,disabled:oe||!ye.name||!ye.artist||ye.types.length===0||!ye.image,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold disabled:bg-green-400 disabled:cursor-not-allowed",children:oe?"Adding...":"Add Pokemon"})]})]})]})})]})},tm="challenge_art",Kw=async(n,e)=>{try{console.log("Uploading challenge art to Cloudinary...");const t=Date.now(),r=`challenges/${e.toLowerCase().replace(/[^a-z0-9]/g,"-")}-${t}`;console.log("Uploading to Cloudinary with public_id:",r);const o=new FormData;o.append("file",n),o.append("upload_preset",ea.UPLOAD_PRESET),o.append("public_id",r),o.append("folder","challenges");const c=await fetch(`https://api.cloudinary.com/v1_1/${ea.CLOUD_NAME}/image/upload`,{method:"POST",body:o});if(!c.ok)throw new Error(`Cloudinary upload failed: ${c.statusText}`);const u=await c.json();return console.log("Upload successful:",u),u.secure_url}catch(t){return console.error("Detailed upload error:",t),console.error("Error message:",t?.message),null}},wd=async(n,e,t)=>{try{console.log("Uploading Pokemon image to Cloudinary...");const i=Date.now(),o=`challenges/pokemon/${e.toLowerCase().replace(/[^a-z0-9]/g,"-")}-pokemon${t}-${i}`;console.log("Uploading to Cloudinary with public_id:",o);const c=new FormData;c.append("file",n),c.append("upload_preset",ea.UPLOAD_PRESET),c.append("public_id",o),c.append("folder","challenges/pokemon");const u=await fetch(`https://api.cloudinary.com/v1_1/${ea.CLOUD_NAME}/image/upload`,{method:"POST",body:c});if(!u.ok)throw new Error(`Cloudinary upload failed: ${u.statusText}`);const d=await u.json();return console.log("Pokemon image upload successful:",d),d.secure_url}catch(i){return console.error("Detailed Pokemon image upload error:",i),console.error("Error message:",i?.message),null}},J4=async()=>{try{const n=Xf(ya(mi,tm),h0("createdAt","desc"));return(await Gu(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){return console.error("Error fetching challenge art:",n),[]}},ej=async n=>{try{const e=new Date;return(await f0(ya(mi,tm),{...n,createdAt:e,updatedAt:e})).id}catch(e){return console.error("Error adding challenge art:",e),null}},tj=async(n,e)=>{try{const t=ql(mi,tm,n);return await d0(t,{...e,updatedAt:new Date}),!0}catch(t){return console.error("Error updating challenge art:",t),!1}},nj=async(n,e)=>{try{if(e){const t=e.split("/"),o=`challenges/${t[t.length-1].split(".")[0]}`;console.log("Challenge art image should be cleaned up from Cloudinary:",o),console.log("Full image URL:",e)}return await vT(ql(mi,tm,n)),!0}catch(t){return console.error("Error deleting challenge art with image:",t),!1}},dl=[{id:"alt-evo",name:"ALT EVO",description:"Evolve NON evolving pokemons"},{id:"fusions",name:"FUSIONS",description:"Pokemon fusions (fusions of existing pokemon)"},{id:"body-completion",name:"BODY COMPLETION",description:"We all take turns drawing body parts for the same pokemons"},{id:"trainers",name:"TRAINERS",description:"Trainers / gym leaders"},{id:"themes",name:"THEMES",description:"Themed pokemon"},{id:"fill-shadow",name:"FILL THE SHADOW",description:"Complete the shadow"}],ij=()=>{const{requireAdmin:n}=Ay(),[e,t]=H.useState("alt-evo"),[i,r]=H.useState([]),[o,c]=H.useState(!0),[u,d]=H.useState(null),[f,y]=H.useState(!1),[_,x]=H.useState(!1),[w,A]=H.useState({name:"",creator:"",challenge:"alt-evo",types:[],image:null,pokemon1Name:"",pokemon1ImageUrl:"",pokemon1Image:null,pokemon2Name:"",pokemon2ImageUrl:"",pokemon2Image:null,trainerType:"trainer",themeName:""}),[k,R]=H.useState(!1),[j,B]=H.useState(!1),[W,Z]=H.useState(!1),[$,le]=H.useState(!1),[P,I]=H.useState(!1),[T,O]=H.useState({name:"",creator:"",challenge:"alt-evo",types:[],image:null,pokemon1Name:"",pokemon1ImageUrl:"",pokemon1Image:null,pokemon2Name:"",pokemon2ImageUrl:"",pokemon2Image:null,trainerType:"trainer",themeName:""}),[C,z]=H.useState({message:"",type:"info",show:!1});H.useEffect(()=>{L()},[]);const L=async()=>{try{c(!0);const G=await J4();r(G),G.length>0&&!u&&d(G[0])}catch(G){console.error("Error loading challenge data:",G)}finally{c(!1)}},be=(G,oe="info")=>{z({message:G,type:oe,show:!0}),setTimeout(()=>{z(He=>({...He,show:!1}))},5e3)},Ae=G=>{A(oe=>({...oe,challenge:G,pokemon1Name:"",pokemon1ImageUrl:"",pokemon1Image:null,pokemon2Name:"",pokemon2ImageUrl:"",pokemon2Image:null,trainerType:"trainer",themeName:"",creator:G==="body-completion"?"":oe.creator,types:G==="trainers"?[]:oe.types}))},F=async()=>{if(!w.name||!w.image){be("Please fill in all required fields and select an image","error");return}if(w.challenge!=="body-completion"&&!w.creator){be("Please select a creator","error");return}if(w.challenge==="fusions"&&(!w.pokemon1Image||!w.pokemon2Image||!w.pokemon1Name||!w.pokemon2Name)){be("Please provide names and images for both Pokemon in the fusion","error");return}if(w.challenge==="themes"&&!w.themeName){be("Please provide theme name","error");return}if(w.challenge==="trainers"){if(w.trainerType==="trainer"&&w.types.length>0){be("Regular trainers should not have specific types","error");return}if(w.trainerType==="gym-leader"&&w.types.length!==1){be("Gym leaders must have exactly one type selected","error");return}}else if(w.challenge!=="fusions"&&w.types.length===0){be("Please select at least one Pokemon type","error");return}x(!0);try{const G=await Kw(w.image,w.name);if(!G){be("❌ Error uploading image. Please try again.","error");return}const oe={name:w.name,challenge:w.challenge,types:w.types,imageUrl:G};if(w.challenge!=="body-completion"&&(oe.creator=w.creator),w.challenge==="fusions"){if(oe.pokemon1Name=w.pokemon1Name,oe.pokemon2Name=w.pokemon2Name,w.pokemon1Image){const Ce=await wd(w.pokemon1Image,w.name,1);if(!Ce){be("❌ Error uploading Pokemon 1 image. Please try again.","error");return}oe.pokemon1ImageUrl=Ce}if(w.pokemon2Image){const Ce=await wd(w.pokemon2Image,w.name,2);if(!Ce){be("❌ Error uploading Pokemon 2 image. Please try again.","error");return}oe.pokemon2ImageUrl=Ce}}w.challenge==="trainers"&&(oe.trainerType=w.trainerType),w.challenge==="themes"&&(oe.themeName=w.themeName),await ej(oe)?(be(`✅ ${w.name} has been added successfully!`,"success"),y(!1),A({name:"",creator:"",challenge:"alt-evo",types:[],image:null,pokemon1Name:"",pokemon1ImageUrl:"",pokemon1Image:null,pokemon2Name:"",pokemon2ImageUrl:"",pokemon2Image:null,trainerType:"trainer",themeName:""}),await L()):be("❌ Error adding challenge art. Please try again.","error")}catch(G){console.error("Error adding challenge art:",G),be("❌ Error adding challenge art. Check console for details.","error")}finally{x(!1)}},ee=G=>{A(oe=>oe.types.includes(G)?{...oe,types:oe.types.filter(He=>He!==G)}:oe.challenge==="trainers"&&oe.trainerType==="gym-leader"?oe.types.length<1?{...oe,types:[G]}:oe:oe.types.length<2?{...oe,types:[...oe.types,G]}:oe)},ue=G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}A(He=>({...He,image:oe}))}},xe=G=>{const oe=G.clipboardData.items;for(let He=0;He<oe.length;He++)if(oe[He].type.startsWith("image/")){const Ce=oe[He].getAsFile();Ce&&(A(Zn=>({...Zn,image:Ce})),be("✅ Image pasted successfully!","success"));break}},V=()=>{u&&(O({name:u.name,creator:u.creator||"",challenge:u.challenge,types:[...u.types],image:null,pokemon1Name:u.pokemon1Name||"",pokemon1ImageUrl:u.pokemon1ImageUrl||"",pokemon1Image:null,pokemon2Name:u.pokemon2Name||"",pokemon2ImageUrl:u.pokemon2ImageUrl||"",pokemon2Image:null,trainerType:u.trainerType||"trainer",themeName:u.themeName||""}),B(!0),R(!1))},ae=async()=>{if(!u||!T.name){be("Please fill in all required fields","error");return}if(T.challenge!=="body-completion"&&!T.creator){be("Please select a creator","error");return}if(T.challenge==="fusions"&&(!T.pokemon1Image&&!T.pokemon1ImageUrl||!T.pokemon2Image&&!T.pokemon2ImageUrl||!T.pokemon1Name||!T.pokemon2Name)){be("Please provide names and images for both Pokemon in the fusion","error");return}if(T.challenge==="themes"&&!T.themeName){be("Please provide theme name","error");return}if(T.challenge==="trainers"){if(T.trainerType==="trainer"&&T.types.length>0){be("Regular trainers should not have specific types","error");return}if(T.trainerType==="gym-leader"&&T.types.length!==1){be("Gym leaders must have exactly one type selected","error");return}}else if(T.challenge!=="fusions"&&T.types.length===0){be("Please select at least one Pokemon type","error");return}le(!0);try{let G=u.imageUrl;if(T.image){const Ce=await Kw(T.image,T.name);if(!Ce){be("❌ Error uploading image. Please try again.","error");return}G=Ce}const oe={name:T.name,challenge:T.challenge,types:T.types,imageUrl:G};if(T.challenge!=="body-completion"&&(oe.creator=T.creator),T.challenge==="fusions"){if(oe.pokemon1Name=T.pokemon1Name,oe.pokemon2Name=T.pokemon2Name,oe.pokemon1ImageUrl=T.pokemon1ImageUrl,oe.pokemon2ImageUrl=T.pokemon2ImageUrl,T.pokemon1Image){const Ce=await wd(T.pokemon1Image,T.name,1);if(!Ce){be("❌ Error uploading Pokemon 1 image. Please try again.","error");return}oe.pokemon1ImageUrl=Ce}if(T.pokemon2Image){const Ce=await wd(T.pokemon2Image,T.name,2);if(!Ce){be("❌ Error uploading Pokemon 2 image. Please try again.","error");return}oe.pokemon2ImageUrl=Ce}}T.challenge==="trainers"&&(oe.trainerType=T.trainerType),T.challenge==="themes"&&(oe.themeName=T.themeName),await tj(u.id,oe)?(be(`✅ ${T.name} has been updated successfully!`,"success"),B(!1),await L()):be("❌ Error updating challenge art. Please try again.","error")}catch(G){console.error("Error updating challenge art:",G),be("❌ Error updating challenge art. Check console for details.","error")}finally{le(!1)}},te=async()=>{if(u){I(!0);try{await nj(u.id,u.imageUrl)?(be(`✅ ${u.name} has been deleted successfully!`,"success"),Z(!1),R(!1),d(null),await L()):be("❌ Failed to delete challenge art. Please try again.","error")}catch(G){console.error("Error deleting challenge art:",G),be("❌ Error deleting challenge art. Check console for details.","error")}finally{I(!1)}}},Y=G=>{O(oe=>oe.types.includes(G)?{...oe,types:oe.types.filter(He=>He!==G)}:oe.challenge==="trainers"&&oe.trainerType==="gym-leader"?oe.types.length<1?{...oe,types:[G]}:oe:oe.types.length<2?{...oe,types:[...oe.types,G]}:oe)},ge=G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}O(He=>({...He,image:oe}))}},ye=G=>{const oe=G.clipboardData.items;for(let He=0;He<oe.length;He++)if(oe[He].type.startsWith("image/")){const Ce=oe[He].getAsFile();Ce&&(O(Zn=>({...Zn,image:Ce})),be("✅ Image pasted successfully!","success"));break}},_e=i.filter(G=>G.challenge===e),_t=G=>({Fire:"type-fire",Water:"type-water",Electric:"type-electric",Grass:"type-grass",Psychic:"type-psychic",Dragon:"type-dragon",Dark:"type-dark",Ghost:"type-ghost",Steel:"type-steel",Normal:"type-normal",Ice:"type-ice",Fighting:"type-fighting",Poison:"type-poison",Ground:"type-ground",Flying:"type-flying",Bug:"type-bug",Rock:"type-rock",Fairy:"type-fairy"})[G]||"type-normal";return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"max-w-full mx-auto relative min-h-screen transform scale-90 origin-top mt-4",children:[o&&p.jsx("div",{className:"text-center py-16",children:p.jsxs("div",{className:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-purple-500 hover:bg-purple-400 transition ease-in-out duration-150",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Challenge Art..."]})}),!o&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Challenges"}),p.jsx("p",{className:"text-white/70",children:"Pokemon art created for special challenges"})]}),p.jsxs("div",{className:"mb-6 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2",children:[p.jsx("div",{className:"flex flex-wrap gap-2",children:dl.map(G=>p.jsx("button",{onClick:()=>t(G.id),className:`px-4 py-2 rounded-lg font-semibold transition-all ${e===G.id?"bg-yellow-400 text-black":"bg-white/20 text-white/80 hover:bg-white/30"}`,title:G.description,children:G.name},G.id))}),p.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:p.jsx("p",{className:"text-white/70 text-sm",children:dl.find(G=>G.id===e)?.description})})]}),p.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[p.jsxs("div",{className:"col-span-6 space-y-2 custom-scrollbar animate-slide-in-left",children:[p.jsx("div",{className:"text-center mb-4",children:p.jsxs("div",{className:"flex items-center justify-center gap-3",children:[p.jsxs("h2",{className:"text-white font-bold text-xl",children:[dl.find(G=>G.id===e)?.name," Collection"]}),p.jsxs("p",{className:"text-white/60 text-sm",children:["(",_e.length," ",_e.length===1?"artwork":"artworks",")"]})]})}),p.jsx("div",{className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-4 overflow-y-auto custom-scrollbar",style:{maxHeight:"60vh"},children:_e.length===0?p.jsxs("div",{className:"text-center py-16",children:[p.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Art Yet"}),p.jsx("p",{className:"text-white/60",children:"No artwork has been created for this challenge yet"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_e.map(G=>p.jsxs("div",{onClick:()=>d(G),className:`group cursor-pointer bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-3 hover:bg-white/20 transition-all duration-300 ${u?.id===G.id?"ring-2 ring-yellow-400 bg-white/20":""}`,children:[p.jsx("div",{className:"aspect-square rounded-lg overflow-hidden mb-3 bg-white/5",children:p.jsx("img",{src:G.imageUrl,alt:G.name,className:`w-full h-full ${G.challenge==="trainers"?"object-cover object-top":"object-cover"} group-hover:scale-105 transition-transform duration-300`})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-white font-bold text-base group-hover:text-yellow-300 transition-colors",children:G.name}),p.jsx("div",{className:"flex flex-wrap gap-1",children:G.types.map(oe=>p.jsx("span",{className:`px-1 py-0.5 rounded text-xs font-semibold text-white ${_t(oe)}`,children:oe},oe))}),G.challenge==="trainers"&&G.trainerType&&p.jsx("div",{className:"px-2 py-1 bg-gray-500/30 rounded-full text-white text-xs font-medium text-center",children:G.trainerType==="gym-leader"?"Gym Leader":"Trainer"}),G.challenge==="themes"&&G.themeName&&p.jsx("div",{className:"px-2 py-1 bg-gray-500/30 rounded-full text-white text-xs font-medium text-center",children:G.themeName}),G.challenge==="fusions"&&(G.pokemon1ImageUrl||G.pokemon2ImageUrl)&&p.jsxs("div",{className:"flex items-center gap-1",children:[G.pokemon1ImageUrl&&p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("img",{src:G.pokemon1ImageUrl,alt:G.pokemon1Name||"Pokemon 1",className:"w-8 h-8 rounded object-cover"}),G.pokemon1Name&&p.jsx("div",{className:"px-2 py-0.5 bg-gray-500/30 rounded-full text-white text-xs font-medium",children:G.pokemon1Name})]}),p.jsx("span",{className:"text-yellow-400 text-sm",children:"+"}),G.pokemon2ImageUrl&&p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("img",{src:G.pokemon2ImageUrl,alt:G.pokemon2Name||"Pokemon 2",className:"w-8 h-8 rounded object-cover"}),G.pokemon2Name&&p.jsx("div",{className:"px-2 py-0.5 bg-gray-500/30 rounded-full text-white text-xs font-medium",children:G.pokemon2Name})]})]}),G.creator&&p.jsxs("div",{className:"flex items-center text-white/70 text-xs",children:[p.jsx("span",{className:"font-semibold",children:"By:"}),p.jsx("span",{className:"ml-1 text-yellow-300",children:G.creator})]})]})]},G.id))})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("button",{onClick:()=>n(()=>y(!0)),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold flex items-center space-x-2 mx-auto",children:p.jsx("span",{children:"Add New Art"})})})]}),p.jsxs("div",{className:"col-span-6 space-y-2 custom-scrollbar animate-slide-in-right",children:[p.jsx("div",{className:"text-center mb-4",children:p.jsx("h2",{className:"text-white font-bold text-xl",children:"Art Details"})}),p.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-4",children:u?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"w-full rounded-lg overflow-hidden bg-white/5",style:{aspectRatio:"1/1",maxHeight:"500px"},children:p.jsx("img",{src:u.imageUrl,alt:u.name,className:"w-full h-full object-contain"})}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:u.name}),p.jsxs("p",{className:"text-white/70 text-sm",children:["Challenge: ",dl.find(G=>G.id===u.challenge)?.name]})]}),u.types.length>0&&u.challenge!=="fusions"&&!(u.challenge==="trainers"&&u.trainerType==="trainer")&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Types"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:u.types.map(G=>p.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-semibold text-white ${_t(G)}`,children:G},G))})]}),u.creator&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Creator"}),p.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:p.jsx("span",{className:"text-yellow-300 font-bold text-lg",children:u.creator})})]}),u.challenge==="fusions"&&(u.pokemon1ImageUrl||u.pokemon2ImageUrl)&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Fusion Details"}),p.jsx("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:p.jsxs("div",{className:"flex items-center justify-center gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[u.pokemon1ImageUrl&&p.jsx("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-white/10",children:p.jsx("img",{src:u.pokemon1ImageUrl,alt:u.pokemon1Name||"Pokemon 1",className:"w-full h-full object-cover"})}),p.jsx("div",{className:"text-white text-sm font-medium",children:u.pokemon1Name||"Pokemon 1"})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"text-yellow-400 text-3xl font-bold",children:"+"}),p.jsx("div",{className:"text-white/60 text-xs",children:"FUSION"})]}),p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[u.pokemon2ImageUrl&&p.jsx("div",{className:"w-32 h-32 rounded-lg overflow-hidden bg-white/10",children:p.jsx("img",{src:u.pokemon2ImageUrl,alt:u.pokemon2Name||"Pokemon 2",className:"w-full h-full object-cover"})}),p.jsx("div",{className:"text-white text-sm font-medium",children:u.pokemon2Name||"Pokemon 2"})]})]})})]}),u.challenge==="trainers"&&u.trainerType&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Trainer Type"}),p.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-semibold ${u.trainerType==="gym-leader"?"bg-purple-500 text-white":"bg-blue-500 text-white"}`,children:u.trainerType==="gym-leader"?"Gym Leader":"Trainer"}),u.trainerType==="gym-leader"&&u.types.length>0&&p.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold text-white ${_t(u.types[0])}`,children:u.types[0]})]})})]}),u.challenge==="themes"&&u.themeName&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Theme Details"}),p.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/10 space-y-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-white/70 text-sm",children:"Pokemon:"}),p.jsx("span",{className:"text-yellow-300 font-medium ml-2",children:u.name})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/70 text-sm",children:"Theme:"}),p.jsx("span",{className:"text-blue-300 font-medium ml-2",children:u.themeName})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold mb-2",children:"Created"}),p.jsx("p",{className:"text-white/70",children:u.createdAt.toLocaleDateString()})]}),u.id&&p.jsxs("div",{className:"pt-2 border-t border-white/20",children:[p.jsx("button",{onClick:()=>R(!k),className:"w-full px-2 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-300 flex items-center justify-center",title:"Toggle Actions",children:p.jsx("span",{className:`transform transition-transform duration-300 text-sm ${k?"rotate-180":"rotate-0"}`,children:"⏷"})}),p.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${k?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:p.jsxs("div",{className:"pt-3",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>n(V),className:"flex-[4] px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold transform hover:scale-[1.02]",children:"✏️ Edit Art"}),p.jsx("button",{onClick:()=>n(()=>Z(!0)),className:"flex-1 px-2 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-center transform hover:scale-[1.02]",title:"Delete Art",children:"🗑️"})]}),W&&p.jsxs("div",{className:"mt-3 p-3 bg-red-500/20 border border-red-500/40 rounded-lg animate-fade-in-up",children:[p.jsxs("p",{className:"text-white text-center text-sm mb-3",children:["Are you sure you want to delete ",p.jsx("strong",{children:u.name}),"?"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold text-sm",children:"Cancel"}),p.jsx("button",{onClick:()=>n(te),disabled:P,className:"flex-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-sm disabled:bg-red-400 disabled:cursor-not-allowed",children:P?"Deleting...":"Delete"})]})]})]})})]})]})]}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"text-4xl mb-4",children:"🖼️"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Select an Artwork"}),p.jsx("p",{className:"text-white/60",children:"Click on any artwork to view its details"})]})})]})]})]}),C.show&&p.jsx("div",{className:`fixed top-4 right-4 z-[70] p-4 rounded-lg shadow-lg ${C.type==="success"?"bg-green-500":C.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:C.message})]}),f&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:"Add New Challenge Art"}),p.jsx("button",{onClick:()=>y(!1),className:"text-white/60 hover:text-white text-2xl",children:"✕"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Art Name *"}),p.jsx("input",{type:"text",value:w.name,onChange:G=>A(oe=>({...oe,name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter artwork name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Challenge Type *"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:dl.map(G=>p.jsx("button",{onClick:()=>Ae(G.id),className:`px-3 py-2 rounded-lg font-semibold transition-all text-sm ${w.challenge===G.id?"bg-yellow-400 text-black":"bg-white/20 text-white/80 hover:bg-white/30"}`,title:G.description,children:G.name},G.id))})]}),w.challenge!=="body-completion"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Creator *"}),p.jsx("div",{className:"flex gap-2",children:["DAVE","JOAO","GUTO"].map(G=>p.jsx("button",{onClick:()=>A(oe=>({...oe,creator:G})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${w.creator===G?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G},G))})]}),w.challenge==="fusions"&&p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[p.jsx("h3",{className:"text-white font-semibold mb-3",children:"Fusion Details"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Pokemon 1 *"}),p.jsx("input",{type:"text",value:w.pokemon1Name,onChange:G=>A(oe=>({...oe,pokemon1Name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Pokemon 1 name"}),p.jsx("input",{type:"file",accept:"image/*",onChange:G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}A(He=>({...He,pokemon1Image:oe}))}},className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),w.pokemon1Image&&p.jsxs("div",{className:"mt-2 text-sm text-green-400",children:["✅ ",w.pokemon1Image.name]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:"→"}),p.jsx("div",{className:"text-white/60 text-sm",children:"FUSION"}),p.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:"←"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Pokemon 2 *"}),p.jsx("input",{type:"text",value:w.pokemon2Name,onChange:G=>A(oe=>({...oe,pokemon2Name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Pokemon 2 name"}),p.jsx("input",{type:"file",accept:"image/*",onChange:G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}A(He=>({...He,pokemon2Image:oe}))}},className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),w.pokemon2Image&&p.jsxs("div",{className:"mt-2 text-sm text-green-400",children:["✅ ",w.pokemon2Image.name]})]})]})]})}),w.challenge==="trainers"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Type *"}),p.jsx("div",{className:"flex gap-2",children:[{value:"trainer",label:"Trainer"},{value:"gym-leader",label:"Gym Leader"}].map(G=>p.jsx("button",{onClick:()=>A(oe=>({...oe,trainerType:G.value})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${w.trainerType===G.value?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G.label},G.value))})]}),w.challenge==="themes"&&p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[p.jsx("h3",{className:"text-white font-semibold mb-3",children:"Theme Details"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Theme Name *"}),p.jsx("input",{type:"text",value:w.themeName,onChange:G=>A(oe=>({...oe,themeName:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"e.g., Halloween, Christmas, Cyberpunk"})]})})]})}),p.jsxs("div",{onPaste:xe,tabIndex:0,className:"outline-none",children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Challenge Art Image * ",p.jsx("span",{className:"text-xs text-white/60",children:"(Upload or paste)"})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:ue,className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),w.image&&p.jsxs("p",{className:"text-green-400 text-sm mt-2",children:["✅ ",w.image.name," selected"]}),p.jsx("p",{className:"text-white/40 text-xs mt-1",children:"You can paste an image here (Ctrl+V or Cmd+V) or click to browse files"})]}),(w.challenge!=="trainers"&&w.challenge!=="fusions"||w.challenge==="trainers"&&w.trainerType==="gym-leader")&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Pokemon Types *",w.challenge==="trainers"&&w.trainerType==="gym-leader"?" (Select gym type - 1 only)":" (Select 1-2)"]}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto",children:["Normal","Fire","Water","Electric","Grass","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dragon","Dark","Steel","Fairy"].map(G=>p.jsx("button",{onClick:()=>ee(G),disabled:!w.types.includes(G)&&(w.challenge==="trainers"&&w.trainerType==="gym-leader"&&w.types.length>=1||w.challenge!=="trainers"&&w.types.length>=2),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${w.types.includes(G)?"bg-yellow-400 text-black":!w.types.includes(G)&&(w.challenge==="trainers"&&w.trainerType==="gym-leader"&&w.types.length>=1||w.challenge!=="trainers"&&w.types.length>=2)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G},G))}),p.jsxs("p",{className:"text-white/60 text-sm mt-2",children:["Selected: ",w.types.join(", ")||"None"]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"}),p.jsx("button",{onClick:F,disabled:_||!w.name||!w.image||w.challenge!=="body-completion"&&!w.creator||w.challenge==="fusions"&&(!w.pokemon1Image||!w.pokemon2Image||!w.pokemon1Name||!w.pokemon2Name)||w.challenge==="themes"&&!w.themeName||w.challenge==="trainers"&&w.trainerType==="trainer"&&w.types.length>0||w.challenge==="trainers"&&w.trainerType==="gym-leader"&&w.types.length!==1||w.challenge!=="trainers"&&w.challenge!=="fusions"&&w.types.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold disabled:bg-green-400 disabled:cursor-not-allowed",children:_?"Adding...":"Add Challenge Art"})]})]})]})}),j&&u&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Challenge Art"}),p.jsx("button",{onClick:()=>B(!1),className:"text-white/60 hover:text-white text-2xl",children:"✕"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Art Name *"}),p.jsx("input",{type:"text",value:T.name,onChange:G=>O(oe=>({...oe,name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter artwork name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Challenge Type *"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:dl.map(G=>p.jsx("button",{onClick:()=>O(oe=>({...oe,challenge:G.id,pokemon1Name:"",pokemon1ImageUrl:"",pokemon2Name:"",pokemon2ImageUrl:"",trainerType:"trainer",creator:G.id==="body-completion"?"":oe.creator})),className:`px-3 py-2 rounded-lg font-semibold transition-all text-sm ${T.challenge===G.id?"bg-yellow-400 text-black":"bg-white/20 text-white/80 hover:bg-white/30"}`,title:G.description,children:G.name},G.id))})]}),T.challenge!=="body-completion"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Creator *"}),p.jsx("div",{className:"flex gap-2",children:["DAVE","JOAO","GUTO"].map(G=>p.jsx("button",{onClick:()=>O(oe=>({...oe,creator:G})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${T.creator===G?"bg-blue-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G},G))})]}),T.challenge==="fusions"&&p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[p.jsx("h3",{className:"text-white font-semibold mb-3",children:"Fusion Details"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Pokemon 1 *"}),p.jsx("input",{type:"text",value:T.pokemon1Name,onChange:G=>O(oe=>({...oe,pokemon1Name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Pokemon 1 name"}),T.pokemon1ImageUrl&&p.jsxs("div",{className:"mb-2",children:[p.jsx("img",{src:T.pokemon1ImageUrl,alt:"Current Pokemon 1",className:"w-20 h-20 object-cover rounded-lg border border-white/20"}),p.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Current image"})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}O(He=>({...He,pokemon1Image:oe}))}},className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),T.pokemon1Image&&p.jsxs("div",{className:"mt-2 text-sm text-green-400",children:["✅ New: ",T.pokemon1Image.name]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:"→"}),p.jsx("div",{className:"text-white/60 text-sm",children:"FUSION"}),p.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:"←"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Pokemon 2 *"}),p.jsx("input",{type:"text",value:T.pokemon2Name,onChange:G=>O(oe=>({...oe,pokemon2Name:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Pokemon 2 name"}),T.pokemon2ImageUrl&&p.jsxs("div",{className:"mb-2",children:[p.jsx("img",{src:T.pokemon2ImageUrl,alt:"Current Pokemon 2",className:"w-20 h-20 object-cover rounded-lg border border-white/20"}),p.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Current image"})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:G=>{const oe=G.target.files?.[0];if(oe){if(oe.size>5*1024*1024){be("File size too large. Please select an image under 5MB.","error");return}if(!oe.type.startsWith("image/")){be("Please select a valid image file.","error");return}O(He=>({...He,pokemon2Image:oe}))}},className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),T.pokemon2Image&&p.jsxs("div",{className:"mt-2 text-sm text-green-400",children:["✅ New: ",T.pokemon2Image.name]})]})]})]})}),T.challenge==="trainers"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white font-semibold mb-2",children:"Type *"}),p.jsx("div",{className:"flex gap-2",children:[{value:"trainer",label:"Trainer"},{value:"gym-leader",label:"Gym Leader"}].map(G=>p.jsx("button",{onClick:()=>O(oe=>({...oe,trainerType:G.value})),className:`px-4 py-2 rounded-lg font-semibold transition-all ${T.trainerType===G.value?"bg-purple-500 text-white":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G.label},G.value))})]}),T.challenge==="themes"&&p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[p.jsx("h3",{className:"text-white font-semibold mb-3",children:"Theme Details"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{children:[p.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Theme Name *"}),p.jsx("input",{type:"text",value:T.themeName,onChange:G=>O(oe=>({...oe,themeName:G.target.value})),className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"e.g., Halloween, Christmas, Cyberpunk"})]})})]})}),p.jsxs("div",{onPaste:ye,tabIndex:0,className:"outline-none",children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Challenge Art Image ",p.jsx("span",{className:"text-xs text-white/60",children:"(Upload or paste to replace current image)"})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:ge,className:"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),T.image&&p.jsxs("p",{className:"text-green-400 text-sm mt-2",children:["✅ ",T.image.name," selected (will replace current image)"]}),!T.image&&p.jsx("p",{className:"text-white/60 text-xs mt-1",children:"Leave empty to keep current image, or select a new image to replace it"})]}),(T.challenge!=="trainers"&&T.challenge!=="fusions"||T.challenge==="trainers"&&T.trainerType==="gym-leader")&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-white font-semibold mb-2",children:["Pokemon Types *",T.challenge==="trainers"&&T.trainerType==="gym-leader"?" (Select gym type - 1 only)":" (Select 1-2)"]}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-40 overflow-y-auto",children:["Normal","Fire","Water","Electric","Grass","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dragon","Dark","Steel","Fairy"].map(G=>p.jsx("button",{onClick:()=>Y(G),disabled:!T.types.includes(G)&&(T.challenge==="trainers"&&T.trainerType==="gym-leader"&&T.types.length>=1||T.challenge!=="trainers"&&T.types.length>=2),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${T.types.includes(G)?"bg-yellow-400 text-black":!T.types.includes(G)&&(T.challenge==="trainers"&&T.trainerType==="gym-leader"&&T.types.length>=1||T.challenge!=="trainers"&&T.types.length>=2)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:G},G))}),p.jsxs("p",{className:"text-white/60 text-sm mt-2",children:["Selected: ",T.types.join(", ")||"None"]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{onClick:()=>B(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Cancel"}),p.jsx("button",{onClick:ae,disabled:$||!T.name||T.challenge!=="body-completion"&&!T.creator||T.challenge==="fusions"&&(!T.pokemon1Image&&!T.pokemon1ImageUrl||!T.pokemon2Image&&!T.pokemon2ImageUrl||!T.pokemon1Name||!T.pokemon2Name)||T.challenge==="themes"&&!T.themeName||T.challenge==="trainers"&&T.trainerType==="trainer"&&T.types.length>0||T.challenge==="trainers"&&T.trainerType==="gym-leader"&&T.types.length!==1||T.challenge!=="trainers"&&T.challenge!=="fusions"&&T.types.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold disabled:bg-green-400 disabled:cursor-not-allowed",children:$?"Updating...":"Update Challenge Art"})]})]})]})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Xu(n){return n+.5|0}const ta=(n,e,t)=>Math.max(Math.min(n,t),e);function tu(n){return ta(Xu(n*2.55),0,255)}function ca(n){return ta(Xu(n*255),0,255)}function sr(n){return ta(Xu(n/2.55)/100,0,1)}function Xw(n){return ta(Xu(n*100),0,100)}const Ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hy=[..."0123456789ABCDEF"],sj=n=>hy[n&15],rj=n=>hy[(n&240)>>4]+hy[n&15],Ed=n=>(n&240)>>4===(n&15),aj=n=>Ed(n.r)&&Ed(n.g)&&Ed(n.b)&&Ed(n.a);function oj(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ii[n[1]]*17,g:255&Ii[n[2]]*17,b:255&Ii[n[3]]*17,a:e===5?Ii[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ii[n[1]]<<4|Ii[n[2]],g:Ii[n[3]]<<4|Ii[n[4]],b:Ii[n[5]]<<4|Ii[n[6]],a:e===9?Ii[n[7]]<<4|Ii[n[8]]:255})),t}const lj=(n,e)=>n<255?e(n):"";function cj(n){var e=aj(n)?sj:rj;return n?"#"+e(n.r)+e(n.g)+e(n.b)+lj(n.a,e):void 0}const uj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nA(n,e,t){const i=e*Math.min(t,1-t),r=(o,c=(o+n/30)%12)=>t-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function hj(n,e,t){const i=(r,o=(r+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function dj(n,e,t){const i=nA(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function fj(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function T0(n){const t=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(t,i,r),c=Math.min(t,i,r),u=(o+c)/2;let d,f,y;return o!==c&&(y=o-c,f=u>.5?y/(2-o-c):y/(o+c),d=fj(t,i,r,y,o),d=d*60+.5),[d|0,f||0,u]}function A0(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ca)}function R0(n,e,t){return A0(nA,n,e,t)}function mj(n,e,t){return A0(dj,n,e,t)}function gj(n,e,t){return A0(hj,n,e,t)}function iA(n){return(n%360+360)%360}function pj(n){const e=uj.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?tu(+e[5]):ca(+e[5]));const r=iA(+e[2]),o=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?i=mj(r,o,c):e[1]==="hsv"?i=gj(r,o,c):i=R0(r,o,c),{r:i[0],g:i[1],b:i[2],a:t}}function yj(n,e){var t=T0(n);t[0]=iA(t[0]+e),t=R0(t),n.r=t[0],n.g=t[1],n.b=t[2]}function bj(n){if(!n)return;const e=T0(n),t=e[0],i=Xw(e[1]),r=Xw(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${sr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const Qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Zw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _j(){const n={},e=Object.keys(Zw),t=Object.keys(Qw);let i,r,o,c,u;for(i=0;i<e.length;i++){for(c=u=e[i],r=0;r<t.length;r++)o=t[r],u=u.replace(o,Qw[o]);o=parseInt(Zw[c],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let Sd;function vj(n){Sd||(Sd=_j(),Sd.transparent=[0,0,0,0]);const e=Sd[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const xj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wj(n){const e=xj.exec(n);let t=255,i,r,o;if(e){if(e[7]!==i){const c=+e[7];t=e[8]?tu(c):ta(c*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?tu(i):ta(i,0,255)),r=255&(e[4]?tu(r):ta(r,0,255)),o=255&(e[6]?tu(o):ta(o,0,255)),{r:i,g:r,b:o,a:t}}}function Ej(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${sr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Ep=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,fl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Sj(n,e,t){const i=fl(sr(n.r)),r=fl(sr(n.g)),o=fl(sr(n.b));return{r:ca(Ep(i+t*(fl(sr(e.r))-i))),g:ca(Ep(r+t*(fl(sr(e.g))-r))),b:ca(Ep(o+t*(fl(sr(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Td(n,e,t){if(n){let i=T0(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=R0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function sA(n,e){return n&&Object.assign(e||{},n)}function Jw(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ca(n[3]))):(e=sA(n,{r:0,g:0,b:0,a:1}),e.a=ca(e.a)),e}function Tj(n){return n.charAt(0)==="r"?wj(n):pj(n)}class Tu{constructor(e){if(e instanceof Tu)return e;const t=typeof e;let i;t==="object"?i=Jw(e):t==="string"&&(i=oj(e)||vj(e)||Tj(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=sA(this._rgb);return e&&(e.a=sr(e.a)),e}set rgb(e){this._rgb=Jw(e)}rgbString(){return this._valid?Ej(this._rgb):void 0}hexString(){return this._valid?cj(this._rgb):void 0}hslString(){return this._valid?bj(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let o;const c=t===o?.5:t,u=2*c-1,d=i.a-r.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,i.r=255&f*i.r+o*r.r+.5,i.g=255&f*i.g+o*r.g+.5,i.b=255&f*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Sj(this._rgb,e._rgb,t)),this}clone(){return new Tu(this.rgb)}alpha(e){return this._rgb.a=ca(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Xu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Td(this._rgb,2,e),this}darken(e){return Td(this._rgb,2,-e),this}saturate(e){return Td(this._rgb,1,e),this}desaturate(e){return Td(this._rgb,1,-e),this}rotate(e){return yj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function tr(){}const Aj=(()=>{let n=0;return()=>n++})();function dt(n){return n==null}function sn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function at(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Pi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function fs(n,e){return Pi(n)?n:e}function $e(n,e){return typeof n>"u"?e:n}const Rj=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,rA=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Ct(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function yt(n,e,t,i){let r,o,c;if(sn(n))for(o=n.length,r=0;r<o;r++)e.call(t,n[r],r);else if(at(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)e.call(t,n[c[r]],c[r])}function Ef(n,e){let t,i,r,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],o=e[t],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Sf(n){if(sn(n))return n.map(Sf);if(at(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=Sf(n[t[r]]);return e}return n}function aA(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Nj(n,e,t,i){if(!aA(n))return;const r=e[n],o=t[n];at(r)&&at(o)?Au(r,o,i):e[n]=Sf(o)}function Au(n,e,t){const i=sn(e)?e:[e],r=i.length;if(!at(n))return n;t=t||{};const o=t.merger||Nj;let c;for(let u=0;u<r;++u){if(c=i[u],!at(c))continue;const d=Object.keys(c);for(let f=0,y=d.length;f<y;++f)o(d[f],n,c,t)}return n}function uu(n,e){return Au(n,e,{merger:kj})}function kj(n,e,t){if(!aA(n))return;const i=e[n],r=t[n];at(i)&&at(r)?uu(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Sf(r))}const e1={"":n=>n,x:n=>n.x,y:n=>n.y};function Cj(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Ij(n){const e=Cj(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function bo(n,e){return(e1[e]||(e1[e]=Ij(e)))(n)}function N0(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ru=n=>typeof n<"u",ba=n=>typeof n=="function",t1=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Dj(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const bt=Math.PI,Ut=2*bt,Mj=Ut+bt,Tf=Number.POSITIVE_INFINITY,Pj=bt/180,an=bt/2,to=bt/4,n1=bt*2/3,oA=Math.log10,Ss=Math.sign;function hu(n,e,t){return Math.abs(n-e)<t}function i1(n){const e=Math.round(n);n=hu(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(oA(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Oj(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,o)=>r-o).pop(),e}function jj(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Nu(n){return!jj(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Lj(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Vj(n,e,t){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function or(n){return n*(bt/180)}function Uj(n){return n*(180/bt)}function s1(n){if(!Pi(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function lA(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let o=Math.atan2(i,t);return o<-.5*bt&&(o+=Ut),{angle:o,distance:r}}function dy(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Fj(n,e){return(n-e+Mj)%Ut-bt}function qi(n){return(n%Ut+Ut)%Ut}function ku(n,e,t,i){const r=qi(n),o=qi(e),c=qi(t),u=qi(o-r),d=qi(c-r),f=qi(r-o),y=qi(r-c);return r===o||r===c||i&&o===c||u>d&&f<y}function In(n,e,t){return Math.max(e,Math.min(t,n))}function zj(n){return In(n,-32768,32767)}function na(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function k0(n,e,t){t=t||(c=>n[c]<e);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,t(o)?r=o:i=o;return{lo:r,hi:i}}const lo=(n,e,t,i)=>k0(n,t,i?r=>{const o=n[r][e];return o<t||o===t&&n[r+1][e]===t}:r=>n[r][e]<t),Bj=(n,e,t)=>k0(n,t,i=>n[i][e]>=t);function Hj(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const cA=["push","pop","shift","splice","unshift"];function qj(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cA.forEach(t=>{const i="_onData"+N0(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),c}})})}function r1(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(cA.forEach(o=>{delete n[o]}),delete n._chartjs)}function uA(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const hA=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function dA(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,hA.call(window,()=>{i=!1,n.apply(e,t)}))}}function Gj(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const C0=n=>n==="start"?"left":n==="end"?"right":"center",Nn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,$j=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function Wj(n,e,t){const i=e.length;let r=0,o=i;if(n._sorted){const{iScale:c,vScale:u,_parsed:d}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=c.axis,{min:_,max:x,minDefined:w,maxDefined:A}=c.getUserBounds();if(w){if(r=Math.min(lo(d,y,_).lo,t?i:lo(e,y,c.getPixelForValue(_)).lo),f){const k=d.slice(0,r+1).reverse().findIndex(R=>!dt(R[u.axis]));r-=Math.max(0,k)}r=In(r,0,i-1)}if(A){let k=Math.max(lo(d,c.axis,x,!0).hi+1,t?0:lo(e,y,c.getPixelForValue(x),!0).hi+1);if(f){const R=d.slice(k-1).findIndex(j=>!dt(j[u.axis]));k+=Math.max(0,R)}o=In(k,r,i)-r}else o=i-r}return{start:r,count:o}}function Yj(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),o}const Ad=n=>n===0||n===1,a1=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Ut/t)),o1=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Ut/t)+1,du={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*an)+1,easeOutSine:n=>Math.sin(n*an),easeInOutSine:n=>-.5*(Math.cos(bt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ad(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ad(n)?n:a1(n,.075,.3),easeOutElastic:n=>Ad(n)?n:o1(n,.075,.3),easeInOutElastic(n){return Ad(n)?n:n<.5?.5*a1(n*2,.1125,.45):.5+.5*o1(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-du.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?du.easeInBounce(n*2)*.5:du.easeOutBounce(n*2-1)*.5+.5};function I0(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function l1(n){return I0(n)?n:new Tu(n)}function Sp(n){return I0(n)?n:new Tu(n).saturate(.5).darken(.1).hexString()}const Kj=["x","y","borderWidth","radius","tension"],Xj=["color","borderColor","backgroundColor"];function Qj(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Xj},numbers:{type:"number",properties:Kj}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Zj(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const c1=new Map;function Jj(n,e){e=e||{};const t=n+JSON.stringify(e);let i=c1.get(t);return i||(i=new Intl.NumberFormat(n,e),c1.set(t,i)),i}function D0(n,e,t){return Jj(e,t).format(n)}const e3={values(n){return sn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),o=t3(n,t)}const c=oA(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),D0(n,i,d)}};function t3(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var fA={formatters:e3};function n3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _o=Object.create(null),fy=Object.create(null);function fu(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function Tp(n,e,t){return typeof e=="string"?Au(fu(n,e),t):Au(fu(n,""),e)}class i3{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Sp(r.backgroundColor),this.hoverBorderColor=(i,r)=>Sp(r.borderColor),this.hoverColor=(i,r)=>Sp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Tp(this,e,t)}get(e){return fu(this,e)}describe(e,t){return Tp(fy,e,t)}override(e,t){return Tp(_o,e,t)}route(e,t,i,r){const o=fu(this,e),c=fu(this,i),u="_"+t;Object.defineProperties(o,{[u]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[u],f=c[r];return at(d)?Object.assign({},f,d):$e(d,f)},set(d){this[u]=d}}})}apply(e){e.forEach(t=>t(this))}}var Ht=new i3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Qj,Zj,n3]);function s3(n){return!n||dt(n.size)||dt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function u1(n,e,t,i,r){let o=e[r];return o||(o=e[r]=n.measureText(r).width,t.push(r)),o>i&&(i=o),i}function no(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function h1(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function my(n,e,t,i){mA(n,e,t,i,null)}function mA(n,e,t,i,r){let o,c,u,d,f,y,_,x;const w=e.pointStyle,A=e.rotation,k=e.radius;let R=(A||0)*Pj;if(w&&typeof w=="object"&&(o=w.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(R),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),w){default:r?n.ellipse(t,i,r/2,k,0,0,Ut):n.arc(t,i,k,0,Ut),n.closePath();break;case"triangle":y=r?r/2:k,n.moveTo(t+Math.sin(R)*y,i-Math.cos(R)*k),R+=n1,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*k),R+=n1,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*k),n.closePath();break;case"rectRounded":f=k*.516,d=k-f,c=Math.cos(R+to)*d,_=Math.cos(R+to)*(r?r/2-f:d),u=Math.sin(R+to)*d,x=Math.sin(R+to)*(r?r/2-f:d),n.arc(t-_,i-u,f,R-bt,R-an),n.arc(t+x,i-c,f,R-an,R),n.arc(t+_,i+u,f,R,R+an),n.arc(t-x,i+c,f,R+an,R+bt),n.closePath();break;case"rect":if(!A){d=Math.SQRT1_2*k,y=r?r/2:d,n.rect(t-y,i-d,2*y,2*d);break}R+=to;case"rectRot":_=Math.cos(R)*(r?r/2:k),c=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(r?r/2:k),n.moveTo(t-_,i-u),n.lineTo(t+x,i-c),n.lineTo(t+_,i+u),n.lineTo(t-x,i+c),n.closePath();break;case"crossRot":R+=to;case"cross":_=Math.cos(R)*(r?r/2:k),c=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(r?r/2:k),n.moveTo(t-_,i-u),n.lineTo(t+_,i+u),n.moveTo(t+x,i-c),n.lineTo(t-x,i+c);break;case"star":_=Math.cos(R)*(r?r/2:k),c=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(r?r/2:k),n.moveTo(t-_,i-u),n.lineTo(t+_,i+u),n.moveTo(t+x,i-c),n.lineTo(t-x,i+c),R+=to,_=Math.cos(R)*(r?r/2:k),c=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(r?r/2:k),n.moveTo(t-_,i-u),n.lineTo(t+_,i+u),n.moveTo(t+x,i-c),n.lineTo(t-x,i+c);break;case"line":c=r?r/2:Math.cos(R)*k,u=Math.sin(R)*k,n.moveTo(t-c,i-u),n.lineTo(t+c,i+u);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(R)*(r?r/2:k),i+Math.sin(R)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Cu(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function M0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function P0(n){n.restore()}function r3(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function a3(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function o3(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),dt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function l3(n,e,t,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,d=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,y=r.strikethrough?(d+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,y),n.lineTo(u,y),n.stroke()}}function c3(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Iu(n,e,t,i,r,o={}){const c=sn(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(n.save(),n.font=r.string,o3(n,o),d=0;d<c.length;++d)f=c[d],o.backdrop&&c3(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),dt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,i,o.maxWidth)),n.fillText(f,t,i,o.maxWidth),l3(n,t,i,f,o),i+=Number(r.lineHeight);n.restore()}function Af(n,e){const{x:t,y:i,w:r,h:o,radius:c}=e;n.arc(t+c.topLeft,i+c.topLeft,c.topLeft,1.5*bt,bt,!0),n.lineTo(t,i+o-c.bottomLeft),n.arc(t+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,bt,an,!0),n.lineTo(t+r-c.bottomRight,i+o),n.arc(t+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,an,0,!0),n.lineTo(t+r,i+c.topRight),n.arc(t+r-c.topRight,i+c.topRight,c.topRight,0,-an,!0),n.lineTo(t+c.topLeft,i)}const u3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,h3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function d3(n,e){const t=(""+n).match(u3);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const f3=n=>+n||0;function O0(n,e){const t={},i=at(e),r=i?Object.keys(e):e,o=at(n)?i?c=>$e(n[c],n[e[c]]):c=>n[c]:()=>n;for(const c of r)t[c]=f3(o(c));return t}function gA(n){return O0(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Al(n){return O0(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Oi(n){const e=gA(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dn(n,e){n=n||{},e=e||Ht.font;let t=$e(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=$e(n.style,e.style);i&&!(""+i).match(h3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:$e(n.family,e.family),lineHeight:d3($e(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:$e(n.weight,e.weight),string:""};return r.string=s3(r),r}function Rd(n,e,t,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function m3(n,e,t){const{min:i,max:r}=n,o=rA(e,(r-i)/2),c=(u,d)=>t&&u===0?0:u+d;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function To(n,e){return Object.assign(Object.create(n),e)}function j0(n,e=[""],t,i,r=()=>n[0]){const o=t||n;typeof i>"u"&&(i=_A("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>j0([u,...n],e,o,i)};return new Proxy(c,{deleteProperty(u,d){return delete u[d],delete u._keys,delete n[0][d],!0},get(u,d){return yA(u,d,()=>w3(d,e,n,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,d){return f1(u).includes(d)},ownKeys(u){return f1(u)},set(u,d,f){const y=u._storage||(u._storage=r());return u[d]=y[d]=f,delete u._keys,!0}})}function Ol(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:pA(n,i),setContext:o=>Ol(n,o,t,i),override:o=>Ol(n.override(o),e,t,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,u){return yA(o,c,()=>p3(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,u){return n[c]=u,delete o[c],!0}})}function pA(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:ba(t)?t:()=>t,isIndexable:ba(i)?i:()=>i}}const g3=(n,e)=>n?n+N0(e):e,L0=(n,e)=>at(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yA(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function p3(n,e,t){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let u=i[e];return ba(u)&&c.isScriptable(e)&&(u=y3(e,u,n,t)),sn(u)&&u.length&&(u=b3(e,u,n,c.isIndexable)),L0(e,u)&&(u=Ol(u,r,o&&o[e],c)),u}function y3(n,e,t,i){const{_proxy:r,_context:o,_subProxy:c,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let d=e(o,c||i);return u.delete(n),L0(n,d)&&(d=V0(r._scopes,r,n,d)),d}function b3(n,e,t,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:u}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(at(e[0])){const d=e,f=r._scopes.filter(y=>y!==d);e=[];for(const y of d){const _=V0(f,r,n,y);e.push(Ol(_,o,c&&c[n],u))}}return e}function bA(n,e,t){return ba(n)?n(e,t):n}const _3=(n,e)=>n===!0?e:typeof n=="string"?bo(e,n):void 0;function v3(n,e,t,i,r){for(const o of e){const c=_3(t,o);if(c){n.add(c);const u=bA(c._fallback,t,r);if(typeof u<"u"&&u!==t&&u!==i)return u}else if(c===!1&&typeof i<"u"&&t!==i)return null}return!1}function V0(n,e,t,i){const r=e._rootScopes,o=bA(e._fallback,t,i),c=[...n,...r],u=new Set;u.add(i);let d=d1(u,c,t,o||t,i);return d===null||typeof o<"u"&&o!==t&&(d=d1(u,c,o,d,i),d===null)?!1:j0(Array.from(u),[""],r,o,()=>x3(e,t,i))}function d1(n,e,t,i,r){for(;t;)t=v3(n,e,t,i,r);return t}function x3(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return sn(r)&&at(t)?t:r||{}}function w3(n,e,t,i){let r;for(const o of e)if(r=_A(g3(o,n),t),typeof r<"u")return L0(n,r)?V0(t,i,n,r):r}function _A(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function f1(n){let e=n._keys;return e||(e=n._keys=E3(n._scopes)),e}function E3(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const S3=Number.EPSILON||1e-14,jl=(n,e)=>e<n.length&&!n[e].skip&&n[e],vA=n=>n==="x"?"y":"x";function T3(n,e,t,i){const r=n.skip?e:n,o=e,c=t.skip?e:t,u=dy(o,r),d=dy(c,o);let f=u/(u+d),y=d/(u+d);f=isNaN(f)?0:f,y=isNaN(y)?0:y;const _=i*f,x=i*y;return{previous:{x:o.x-_*(c.x-r.x),y:o.y-_*(c.y-r.y)},next:{x:o.x+x*(c.x-r.x),y:o.y+x*(c.y-r.y)}}}function A3(n,e,t){const i=n.length;let r,o,c,u,d,f=jl(n,0);for(let y=0;y<i-1;++y)if(d=f,f=jl(n,y+1),!(!d||!f)){if(hu(e[y],0,S3)){t[y]=t[y+1]=0;continue}r=t[y]/e[y],o=t[y+1]/e[y],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(c=3/Math.sqrt(u),t[y]=r*c*e[y],t[y+1]=o*c*e[y])}}function R3(n,e,t="x"){const i=vA(t),r=n.length;let o,c,u,d=jl(n,0);for(let f=0;f<r;++f){if(c=u,u=d,d=jl(n,f+1),!u)continue;const y=u[t],_=u[i];c&&(o=(y-c[t])/3,u[`cp1${t}`]=y-o,u[`cp1${i}`]=_-o*e[f]),d&&(o=(d[t]-y)/3,u[`cp2${t}`]=y+o,u[`cp2${i}`]=_+o*e[f])}}function N3(n,e="x"){const t=vA(e),i=n.length,r=Array(i).fill(0),o=Array(i);let c,u,d,f=jl(n,0);for(c=0;c<i;++c)if(u=d,d=f,f=jl(n,c+1),!!d){if(f){const y=f[e]-d[e];r[c]=y!==0?(f[t]-d[t])/y:0}o[c]=u?f?Ss(r[c-1])!==Ss(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}A3(n,r,o),R3(n,o,e)}function Nd(n,e,t){return Math.max(Math.min(n,t),e)}function k3(n,e){let t,i,r,o,c,u=Cu(n[0],e);for(t=0,i=n.length;t<i;++t)c=o,o=u,u=t<i-1&&Cu(n[t+1],e),o&&(r=n[t],c&&(r.cp1x=Nd(r.cp1x,e.left,e.right),r.cp1y=Nd(r.cp1y,e.top,e.bottom)),u&&(r.cp2x=Nd(r.cp2x,e.left,e.right),r.cp2y=Nd(r.cp2y,e.top,e.bottom)))}function C3(n,e,t,i,r){let o,c,u,d;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")N3(n,r);else{let f=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)u=n[o],d=T3(f,u,n[Math.min(o+1,c-(i?0:1))%c],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}e.capBezierPoints&&k3(n,t)}function U0(){return typeof window<"u"&&typeof document<"u"}function F0(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rf(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const nm=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function I3(n,e){return nm(n).getPropertyValue(e)}const D3=["top","right","bottom","left"];function uo(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const o=D3[r];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const M3=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function P3(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,u,d;if(M3(r,o,n.target))u=r,d=o;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,c=!0}return{x:u,y:d,box:c}}function ro(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=nm(t),o=r.boxSizing==="border-box",c=uo(r,"padding"),u=uo(r,"border","width"),{x:d,y:f,box:y}=P3(n,t),_=c.left+(y&&u.left),x=c.top+(y&&u.top);let{width:w,height:A}=e;return o&&(w-=c.width+u.width,A-=c.height+u.height),{x:Math.round((d-_)/w*t.width/i),y:Math.round((f-x)/A*t.height/i)}}function O3(n,e,t){let i,r;if(e===void 0||t===void 0){const o=n&&F0(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const c=o.getBoundingClientRect(),u=nm(o),d=uo(u,"border","width"),f=uo(u,"padding");e=c.width-f.width-d.width,t=c.height-f.height-d.height,i=Rf(u.maxWidth,o,"clientWidth"),r=Rf(u.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||Tf,maxHeight:r||Tf}}const kd=n=>Math.round(n*10)/10;function j3(n,e,t,i){const r=nm(n),o=uo(r,"margin"),c=Rf(r.maxWidth,n,"clientWidth")||Tf,u=Rf(r.maxHeight,n,"clientHeight")||Tf,d=O3(n,e,t);let{width:f,height:y}=d;if(r.boxSizing==="content-box"){const x=uo(r,"border","width"),w=uo(r,"padding");f-=w.width+x.width,y-=w.height+x.height}return f=Math.max(0,f-o.width),y=Math.max(0,i?f/i:y-o.height),f=kd(Math.min(f,c,d.maxWidth)),y=kd(Math.min(y,u,d.maxHeight)),f&&!y&&(y=kd(f/2)),(e!==void 0||t!==void 0)&&i&&d.height&&y>d.height&&(y=d.height,f=kd(Math.floor(y*i))),{width:f,height:y}}function m1(n,e,t){const i=e||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(t||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const L3=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};U0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function g1(n,e){const t=I3(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ao(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function V3(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function U3(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},c=ao(n,r,t),u=ao(r,o,t),d=ao(o,e,t),f=ao(c,u,t),y=ao(u,d,t);return ao(f,y,t)}const F3=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},z3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Rl(n,e,t){return n?F3(e,t):z3()}function xA(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function wA(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function EA(n){return n==="angle"?{between:ku,compare:Fj,normalize:qi}:{between:na,compare:(e,t)=>e-t,normalize:e=>e}}function p1({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function B3(n,e,t){const{property:i,start:r,end:o}=t,{between:c,normalize:u}=EA(i),d=e.length;let{start:f,end:y,loop:_}=n,x,w;if(_){for(f+=d,y+=d,x=0,w=d;x<w&&c(u(e[f%d][i]),r,o);++x)f--,y--;f%=d,y%=d}return y<f&&(y+=d),{start:f,end:y,loop:_,style:n.style}}function H3(n,e,t){if(!t)return[n];const{property:i,start:r,end:o}=t,c=e.length,{compare:u,between:d,normalize:f}=EA(i),{start:y,end:_,loop:x,style:w}=B3(n,e,t),A=[];let k=!1,R=null,j,B,W;const Z=()=>d(r,W,j)&&u(r,W)!==0,$=()=>u(o,j)===0||d(o,W,j),le=()=>k||Z(),P=()=>!k||$();for(let I=y,T=y;I<=_;++I)B=e[I%c],!B.skip&&(j=f(B[i]),j!==W&&(k=d(j,r,o),R===null&&le()&&(R=u(j,r)===0?I:T),R!==null&&P()&&(A.push(p1({start:R,end:I,loop:x,count:c,style:w})),R=null),T=I,W=j));return R!==null&&A.push(p1({start:R,end:_,loop:x,count:c,style:w})),A}function q3(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const o=H3(i[r],n.points,e);o.length&&t.push(...o)}return t}function G3(n,e,t,i){let r=0,o=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(o+=r);o>r&&n[o%e].skip;)o--;return o%=e,{start:r,end:o}}function $3(n,e,t,i){const r=n.length,o=[];let c=e,u=n[e],d;for(d=e+1;d<=t;++d){const f=n[d%r];f.skip||f.stop?u.skip||(i=!1,o.push({start:e%r,end:(d-1)%r,loop:i}),e=c=f.stop?d:null):(c=d,u.skip&&(e=d)),u=f}return c!==null&&o.push({start:e%r,end:c%r,loop:i}),o}function W3(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const o=!!n._loop,{start:c,end:u}=G3(t,r,o,i);if(i===!0)return y1(n,[{start:c,end:u,loop:o}],t,e);const d=u<c?u+r:u,f=!!n._fullLoop&&c===0&&u===r-1;return y1(n,$3(t,c,d,f),t,e)}function y1(n,e,t,i){return!i||!i.setContext||!t?e:Y3(n,e,t,i)}function Y3(n,e,t,i){const r=n._chart.getContext(),o=b1(n.options),{_datasetIndex:c,options:{spanGaps:u}}=n,d=t.length,f=[];let y=o,_=e[0].start,x=_;function w(A,k,R,j){const B=u?-1:1;if(A!==k){for(A+=d;t[A%d].skip;)A-=B;for(;t[k%d].skip;)k+=B;A%d!==k%d&&(f.push({start:A%d,end:k%d,loop:R,style:j}),y=j,_=k%d)}}for(const A of e){_=u?_:A.start;let k=t[_%d],R;for(x=_+1;x<=A.end;x++){const j=t[x%d];R=b1(i.setContext(To(r,{type:"segment",p0:k,p1:j,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:c}))),K3(R,y)&&w(_,x-1,A.loop,y),k=j,y=R}_<x-1&&w(_,x-1,A.loop,y)}return f}function b1(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function K3(n,e){if(!e)return!1;const t=[],i=function(r,o){return I0(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Cd(n,e,t){return n.options.clip?n[t]:e[t]}function X3(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Cd(t,e,"left"),right:Cd(t,e,"right"),top:Cd(i,e,"top"),bottom:Cd(i,e,"bottom")}:e}function Q3(n,e){const t=e._clip;if(t.disabled)return!1;const i=X3(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Z3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const o=t.listeners[r],c=t.duration;o.forEach(u=>u({chart:e,initial:t.initial,numSteps:c,currentStep:Math.min(i-t.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=hA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,u=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(e),u=!0):(o[c]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var nr=new Z3;const _1="transparent",J3={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=l1(n||_1),r=i.valid&&l1(e||_1);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class e6{constructor(e,t,i,r){const o=t[i];r=Rd([e.to,r,o,e.from]);const c=Rd([e.from,o,r]);this._active=!0,this._fn=e.fn||J3[e.type||typeof c],this._easing=du[e.easing]||du.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Rd([e.to,t,r,e.from]),this._from=Rd([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,u=this._to;let d;if(this._active=o!==u&&(c||t<i),!this._active){this._target[r]=u,this._notify(!0);return}if(t<0){this._target[r]=o;return}d=t/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(o,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class SA{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!at(e))return;const t=Object.keys(Ht.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!at(o))return;const c={};for(const u of t)c[u]=o[u];(sn(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,c)})})}_animateOptions(e,t){const i=t.options,r=n6(e,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&t6(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,r=[],o=e.$animations||(e.$animations={}),c=Object.keys(t),u=Date.now();let d;for(d=c.length-1;d>=0;--d){const f=c[d];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(e,t));continue}const y=t[f];let _=o[f];const x=i.get(f);if(_)if(x&&_.active()){_.update(x,y,u);continue}else _.cancel();if(!x||!x.duration){e[f]=y;continue}o[f]=_=new e6(x,e,f,y),r.push(_)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return nr.add(this._chart,i),!0}}function t6(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function n6(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function v1(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function i6(n,e,t){if(t===!1)return!1;const i=v1(n,t),r=v1(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function s6(n){let e,t,i,r;return at(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function TA(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)t.push(i[r].index);return t}function x1(n,e,t,i={}){const r=n.keys,o=i.mode==="single";let c,u,d,f;if(e===null)return;let y=!1;for(c=0,u=r.length;c<u;++c){if(d=+r[c],d===t){if(y=!0,i.all)continue;break}f=n.values[d],Pi(f)&&(o||e===0||Ss(e)===Ss(f))&&(e+=f)}return!y&&!i.all?0:e}function r6(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),u=new Array(c.length);let d,f,y;for(d=0,f=c.length;d<f;++d)y=c[d],u[d]={[r]:y,[o]:n[y]};return u}function Ap(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function a6(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function o6(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function l6(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function w1(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(t&&o>0||!t&&o<0)return r.index}return null}function E1(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:o,vScale:c,index:u}=i,d=o.axis,f=c.axis,y=a6(o,c,i),_=e.length;let x;for(let w=0;w<_;++w){const A=e[w],{[d]:k,[f]:R}=A,j=A._stacks||(A._stacks={});x=j[f]=l6(r,y,k),x[u]=R,x._top=w1(x,c,!0,i.type),x._bottom=w1(x,c,!1,i.type);const B=x._visualValues||(x._visualValues={});B[u]=R}}function Rp(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function c6(n,e){return To(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function u6(n,e,t){return To(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Gc(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const o=r._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}const Np=n=>n==="reset"||n==="none",S1=(n,e)=>e?n:Object.assign({},n),h6=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:TA(t,!0),values:null};class im{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ap(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(_,x,w,A)=>_==="x"?x:_==="r"?A:w,o=t.xAxisID=$e(i.xAxisID,Rp(e,"x")),c=t.yAxisID=$e(i.yAxisID,Rp(e,"y")),u=t.rAxisID=$e(i.rAxisID,Rp(e,"r")),d=t.indexAxis,f=t.iAxisID=r(d,o,c,u),y=t.vAxisID=r(d,c,o,u);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(c),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&r1(this._data,this),e._stacked&&Gc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(at(t)){const r=this._cachedMeta;this._data=r6(t,r)}else if(i!==t){if(i){r1(i,this);const r=this._cachedMeta;Gc(r),r._parsed=[]}t&&Object.isExtensible(t)&&qj(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=t._stacked;t._stacked=Ap(t.vScale,t),t.stack!==i.stack&&(r=!0,Gc(t),t.stack=i.stack),this._resyncElements(e),(r||o!==t._stacked)&&(E1(this,t._parsed),t._stacked=Ap(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,u=o.axis;let d=e===0&&t===r.length?!0:i._sorted,f=e>0&&i._parsed[e-1],y,_,x;if(this._parsing===!1)i._parsed=r,i._sorted=!0,x=r;else{sn(r[e])?x=this.parseArrayData(i,r,e,t):at(r[e])?x=this.parseObjectData(i,r,e,t):x=this.parsePrimitiveData(i,r,e,t);const w=()=>_[u]===null||f&&_[u]<f[u];for(y=0;y<t;++y)i._parsed[y+e]=_=x[y],d&&(w()&&(d=!1),f=_);i._sorted=d}c&&E1(this,x)}parsePrimitiveData(e,t,i,r){const{iScale:o,vScale:c}=e,u=o.axis,d=c.axis,f=o.getLabels(),y=o===c,_=new Array(r);let x,w,A;for(x=0,w=r;x<w;++x)A=x+i,_[x]={[u]:y||o.parse(f[A],A),[d]:c.parse(t[A],A)};return _}parseArrayData(e,t,i,r){const{xScale:o,yScale:c}=e,u=new Array(r);let d,f,y,_;for(d=0,f=r;d<f;++d)y=d+i,_=t[y],u[d]={x:o.parse(_[0],y),y:c.parse(_[1],y)};return u}parseObjectData(e,t,i,r){const{xScale:o,yScale:c}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(r);let y,_,x,w;for(y=0,_=r;y<_;++y)x=y+i,w=t[x],f[y]={x:o.parse(bo(w,u),x),y:c.parse(bo(w,d),x)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,o=this._cachedMeta,c=t[e.axis],u={keys:TA(r,!0),values:t._stacks[e.axis]._visualValues};return x1(u,c,o.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const o=i[t.axis];let c=o===null?NaN:o;const u=r&&i._stacks[t.axis];r&&u&&(r.values=u,c=x1(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&e===i.iScale,c=r.length,u=this._getOtherScale(e),d=h6(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:_}=o6(u);let x,w;function A(){w=r[x];const k=w[u.axis];return!Pi(w[e.axis])||y>k||_<k}for(x=0;x<c&&!(!A()&&(this.updateRangeFromParsed(f,e,w,d),o));++x);if(o){for(x=c-1;x>=0;--x)if(!A()){this.updateRangeFromParsed(f,e,w,d);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=t.length;r<o;++r)c=t[r][e.axis],Pi(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=s6($e(this.options.clip,i6(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],o=t.chartArea,c=[],u=this._drawStart||0,d=this._drawCount||r.length-u,f=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(e,o,u,d),y=u;y<u+d;++y){const _=r[y];_.hidden||(_.active&&f?c.push(_):_.draw(e,o))}for(y=0;y<c.length;++y)c[y].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];o=c.$context||(c.$context=u6(this.getContext(),e,c)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=c6(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",o=this._cachedDataOpts,c=e+"-"+t,u=o[c],d=this.enableOptionSharing&&Ru(i);if(u)return S1(u,d);const f=this.chart.config,y=f.datasetElementScopeKeys(this._type,e),_=r?[`${e}Hover`,"hover",e,""]:[e,""],x=f.getOptionScopes(this.getDataset(),y),w=Object.keys(Ht.elements[e]),A=()=>this.getContext(i,r,t),k=f.resolveNamedOptions(x,w,A,_);return k.$shared&&(k.$shared=d,o[c]=Object.freeze(S1(k,d))),k}_resolveAnimations(e,t,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${t}`,u=o[c];if(u)return u;let d;if(r.options.animation!==!1){const y=this.chart.config,_=y.datasetAnimationScopeKeys(this._type,t),x=y.getOptionScopes(this.getDataset(),_);d=y.createResolver(x,this.getContext(e,i,t))}const f=new SA(r,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Np(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(t,o)||o!==r;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:c}}updateElement(e,t,i,r){Np(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!Np(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const o=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const r=i.length,o=t.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,t,i=!0){const r=this._cachedMeta,o=r.data,c=e+t;let u;const d=f=>{for(f.length+=t,u=f.length-1;u>=c;u--)f[u]=f[u-t]};for(d(o),u=e;u<c;++u)o[u]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Gc(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function d6(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,o=t.length;r<o;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=uA(i.sort((r,o)=>r-o))}return n._cache.$bar}function f6(n){const e=n.iScale,t=d6(e,n.type);let i=e._length,r,o,c,u;const d=()=>{c===32767||c===-32768||(Ru(u)&&(i=Math.min(i,Math.abs(c-u)||i)),u=c)};for(r=0,o=t.length;r<o;++r)c=e.getPixelForValue(t[r]),d();for(u=void 0,r=0,o=e.ticks.length;r<o;++r)c=e.getPixelForTick(r),d();return i}function m6(n,e,t,i){const r=t.barThickness;let o,c;return dt(r)?(o=e.min*t.categoryPercentage,c=t.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:e.pixels[n]-o/2}}function g6(n,e,t,i){const r=e.pixels,o=r[n];let c=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const d=t.categoryPercentage;c===null&&(c=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-c);const f=o-(o-Math.min(c,u))/2*d;return{chunk:Math.abs(u-c)/2*d/i,ratio:t.barPercentage,start:f}}function p6(n,e,t,i){const r=t.parse(n[0],i),o=t.parse(n[1],i),c=Math.min(r,o),u=Math.max(r,o);let d=c,f=u;Math.abs(c)>Math.abs(u)&&(d=u,f=c),e[t.axis]=f,e._custom={barStart:d,barEnd:f,start:r,end:o,min:c,max:u}}function AA(n,e,t,i){return sn(n)?p6(n,e,t,i):e[t.axis]=t.parse(n,i),e}function T1(n,e,t,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),u=r===o,d=[];let f,y,_,x;for(f=t,y=t+i;f<y;++f)x=e[f],_={},_[r.axis]=u||r.parse(c[f],f),d.push(AA(x,_,o,f));return d}function kp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function y6(n,e,t){return n!==0?Ss(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function b6(n){let e,t,i,r,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:t,end:i,reverse:e,top:r,bottom:o}}function _6(n,e,t,i){let r=e.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:d,top:f,bottom:y}=b6(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=f:(t._bottom||0)===i?r=y:(o[A1(y,c,u,d)]=!0,r=f)),o[A1(r,c,u,d)]=!0,n.borderSkipped=o}function A1(n,e,t,i){return i?(n=v6(n,e,t),n=R1(n,t,e)):n=R1(n,e,t),n}function v6(n,e,t){return n===e?t:n===t?e:n}function R1(n,e,t){return n==="start"?e:n==="end"?t:n}function x6(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class w6 extends im{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,r){return T1(e,t,i,r)}parseArrayData(e,t,i,r){return T1(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:o,vScale:c}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=o.axis==="x"?u:d,y=c.axis==="x"?u:d,_=[];let x,w,A,k;for(x=i,w=i+r;x<w;++x)k=t[x],A={},A[o.axis]=o.parse(bo(k,f),x),_.push(AA(bo(k,y),A,c,x));return _}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,o=this.getParsed(e),c=o._custom,u=kp(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:u}}=this,d=u.getBasePixel(),f=u.isHorizontal(),y=this._getRuler(),{sharedOptions:_,includeOptions:x}=this._getSharedOptions(t,r);for(let w=t;w<t+i;w++){const A=this.getParsed(w),k=o||dt(A[u.axis])?{base:d,head:d}:this._calculateBarValuePixels(w),R=this._calculateBarIndexPixels(w,y),j=(A._stacks||{})[u.axis],B={horizontal:f,base:k.base,enableBorderRadius:!j||kp(A._custom)||c===j._top||c===j._bottom,x:f?k.head:R.center,y:f?R.center:k.head,height:f?R.size:Math.abs(k.size),width:f?Math.abs(k.size):R.size};x&&(B.options=_||this.resolveDataElementOptions(w,e[w].active?"active":r));const W=B.options||e[w].options;_6(B,W,j,c),x6(B,W,y.ratio),this.updateElement(e[w],w,B,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),o=i.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(t),d=u&&u[i.axis],f=y=>{const _=y._parsed.find(w=>w[i.axis]===d),x=_&&_[y.vScale.axis];if(dt(x)||isNaN(x))return!0};for(const y of r)if(!(t!==void 0&&f(y))&&((o===!1||c.indexOf(y.stack)===-1||o===void 0&&y.stack===void 0)&&c.push(y.stack),y.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[$e(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const r=this._getStacks(e,i),o=t!==void 0?r.indexOf(t):-1;return o===-1?r.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let o,c;for(o=0,c=t.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=e.barThickness;return{min:u||f6(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,u=o||0,d=this.getParsed(e),f=d._custom,y=kp(f);let _=d[t.axis],x=0,w=i?this.applyStack(t,d,i):_,A,k;w!==_&&(x=w-_,w=_),y&&(_=f.barStart,w=f.barEnd-f.barStart,_!==0&&Ss(_)!==Ss(f.barEnd)&&(x=0),x+=_);const R=!dt(o)&&!y?o:x;let j=t.getPixelForValue(R);if(this.chart.getDataVisibility(e)?A=t.getPixelForValue(x+w):A=j,k=A-j,Math.abs(k)<c){k=y6(k,t,u)*c,_===u&&(j-=k/2);const B=t.getPixelForDecimal(0),W=t.getPixelForDecimal(1),Z=Math.min(B,W),$=Math.max(B,W);j=Math.max(Math.min(j,$),Z),A=j+k,i&&!y&&(d._stacks[t.axis]._visualValues[r]=t.getValueForPixel(A)-t.getValueForPixel(j))}if(j===t.getPixelForValue(u)){const B=Ss(k)*t.getLineWidthForValue(u)/2;j+=B,k-=B}return{size:k,base:j,head:A,center:A+k/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,o=r.skipNull,c=$e(r.maxBarThickness,1/0);let u,d;const f=this._getAxisCount();if(t.grouped){const y=o?this._getStackCount(e):t.stackCount,_=r.barThickness==="flex"?g6(e,t,r,y*f):m6(e,t,r,y*f),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf($e(x,this.getFirstScaleIdForIndexAxis())),A=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+w;u=_.start+_.chunk*A+_.chunk/2,d=Math.min(c,_.chunk*_.ratio)}else u=i.getPixelForValue(this.getParsed(e)[i.axis],e),d=Math.min(c,t.min*t.ratio);return{base:u-d/2,head:u+d/2,center:u,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[t.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function E6(n,e,t){let i=1,r=1,o=0,c=0;if(e<Ut){const u=n,d=u+e,f=Math.cos(u),y=Math.sin(u),_=Math.cos(d),x=Math.sin(d),w=(W,Z,$)=>ku(W,u,d,!0)?1:Math.max(Z,Z*t,$,$*t),A=(W,Z,$)=>ku(W,u,d,!0)?-1:Math.min(Z,Z*t,$,$*t),k=w(0,f,_),R=w(an,y,x),j=A(bt,f,_),B=A(bt+an,y,x);i=(k-j)/2,r=(R-B)/2,o=-(k+j)/2,c=-(R+B)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:c}}class S6 extends im{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((o,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:r,lineWidth:d.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=d=>+i[d];if(at(i[e])){const{key:d="value"}=this._parsing;o=f=>+bo(i[f],d)}let c,u;for(c=e,u=e+t;c<u;++c)r._parsed[c]=o(c)}}_getRotation(){return or(this.options.rotation-90)}_getCircumference(){return or(this.options.circumference)}_getRotationExtents(){let e=Ut,t=-Ut;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),c=r._getCircumference();e=Math.min(e,o),t=Math.max(t,o+c)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,o=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-c)/2,0),d=Math.min(Rj(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:y,rotation:_}=this._getRotationExtents(),{ratioX:x,ratioY:w,offsetX:A,offsetY:k}=E6(_,y,d),R=(i.width-c)/x,j=(i.height-c)/w,B=Math.max(Math.min(R,j)/2,0),W=rA(this.options.radius,B),Z=Math.max(W*d,0),$=(W-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=A*W,this.offsetY=k*W,r.total=this.calculateTotal(),this.outerRadius=W-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/Ut)}updateElements(e,t,i,r){const o=r==="reset",c=this.chart,u=c.chartArea,f=c.options.animation,y=(u.left+u.right)/2,_=(u.top+u.bottom)/2,x=o&&f.animateScale,w=x?0:this.innerRadius,A=x?0:this.outerRadius,{sharedOptions:k,includeOptions:R}=this._getSharedOptions(t,r);let j=this._getRotation(),B;for(B=0;B<t;++B)j+=this._circumference(B,o);for(B=t;B<t+i;++B){const W=this._circumference(B,o),Z=e[B],$={x:y+this.offsetX,y:_+this.offsetY,startAngle:j,endAngle:j+W,circumference:W,outerRadius:A,innerRadius:w};R&&($.options=k||this.resolveDataElementOptions(B,Z.active?"active":r)),j+=W,this.updateElement(Z,B,$,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ut*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=D0(t._parsed[e],i.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,o,c,u,d;if(!e){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),e=c.data,u=c.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)d=u.resolveDataElementOptions(r),d.borderAlign!=="inner"&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const o=this.resolveDataElementOptions(i);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max($e(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class T6 extends im{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=t,c=this.chart._animationsDisabled;let{start:u,count:d}=Wj(t,r,c);this._drawStart=u,this._drawCount=d,Yj(t)&&(u=0,d=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:f},e),this.updateElements(r,u,d,e)}updateElements(e,t,i,r){const o=r==="reset",{iScale:c,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(t,r),x=c.axis,w=u.axis,{spanGaps:A,segment:k}=this.options,R=Nu(A)?A:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||o||r==="none",B=t+i,W=e.length;let Z=t>0&&this.getParsed(t-1);for(let $=0;$<W;++$){const le=e[$],P=j?le:{};if($<t||$>=B){P.skip=!0;continue}const I=this.getParsed($),T=dt(I[w]),O=P[x]=c.getPixelForValue(I[x],$),C=P[w]=o||T?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,I,d):I[w],$);P.skip=isNaN(O)||isNaN(C)||T,P.stop=$>0&&Math.abs(I[x]-Z[x])>R,k&&(P.parsed=I,P.raw=f.data[$]),_&&(P.options=y||this.resolveDataElementOptions($,le.active?"active":r)),j||this.updateElement(le,$,P,r),Z=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function io(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class z0{static override(e){Object.assign(z0.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return io()}parse(){return io()}format(){return io()}add(){return io()}diff(){return io()}startOf(){return io()}endOf(){return io()}}var A6={_date:z0};function R6(n,e,t,i){const{controller:r,data:o,_sorted:c}=n,u=r._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&c&&o.length){const f=u._reversePixels?Bj:lo;if(i){if(r._sharedOptions){const y=o[0],_=typeof y.getRange=="function"&&y.getRange(e);if(_){const x=f(o,e,t-_),w=f(o,e,t+_);return{lo:x.lo,hi:w.hi}}}}else{const y=f(o,e,t);if(d){const{vScale:_}=r._cachedMeta,{_parsed:x}=n,w=x.slice(0,y.lo+1).reverse().findIndex(k=>!dt(k[_.axis]));y.lo-=Math.max(0,w);const A=x.slice(y.hi).findIndex(k=>!dt(k[_.axis]));y.hi+=Math.max(0,A)}return y}}return{lo:0,hi:o.length-1}}function sm(n,e,t,i,r){const o=n.getSortedVisibleDatasetMetas(),c=t[e];for(let u=0,d=o.length;u<d;++u){const{index:f,data:y}=o[u],{lo:_,hi:x}=R6(o[u],e,c,r);for(let w=_;w<=x;++w){const A=y[w];A.skip||i(A,f,w)}}}function N6(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const o=e?Math.abs(i.x-r.x):0,c=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Cp(n,e,t,i,r){const o=[];return!r&&!n.isPointInArea(e)||sm(n,t,e,function(u,d,f){!r&&!Cu(u,n.chartArea,0)||u.inRange(e.x,e.y,i)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function k6(n,e,t,i){let r=[];function o(c,u,d){const{startAngle:f,endAngle:y}=c.getProps(["startAngle","endAngle"],i),{angle:_}=lA(c,{x:e.x,y:e.y});ku(_,f,y)&&r.push({element:c,datasetIndex:u,index:d})}return sm(n,t,e,o),r}function C6(n,e,t,i,r,o){let c=[];const u=N6(t);let d=Number.POSITIVE_INFINITY;function f(y,_,x){const w=y.inRange(e.x,e.y,r);if(i&&!w)return;const A=y.getCenterPoint(r);if(!(!!o||n.isPointInArea(A))&&!w)return;const R=u(e,A);R<d?(c=[{element:y,datasetIndex:_,index:x}],d=R):R===d&&c.push({element:y,datasetIndex:_,index:x})}return sm(n,t,e,f),c}function Ip(n,e,t,i,r,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?k6(n,e,t,r):C6(n,e,t,i,r,o)}function N1(n,e,t,i,r){const o=[],c=t==="x"?"inXRange":"inYRange";let u=!1;return sm(n,t,e,(d,f,y)=>{d[c]&&d[c](e[t],r)&&(o.push({element:d,datasetIndex:f,index:y}),u=u||d.inRange(e.x,e.y,r))}),i&&!u?[]:o}var I6={modes:{index(n,e,t,i){const r=ro(e,n),o=t.axis||"x",c=t.includeInvisible||!1,u=t.intersect?Cp(n,r,o,i,c):Ip(n,r,o,!1,i,c),d=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const y=u[0].index,_=f.data[y];_&&!_.skip&&d.push({element:_,datasetIndex:f.index,index:y})}),d):[]},dataset(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",c=t.includeInvisible||!1;let u=t.intersect?Cp(n,r,o,i,c):Ip(n,r,o,!1,i,c);if(u.length>0){const d=u[0].datasetIndex,f=n.getDatasetMeta(d).data;u=[];for(let y=0;y<f.length;++y)u.push({element:f[y],datasetIndex:d,index:y})}return u},point(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",c=t.includeInvisible||!1;return Cp(n,r,o,i,c)},nearest(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",c=t.includeInvisible||!1;return Ip(n,r,o,t.intersect,i,c)},x(n,e,t,i){const r=ro(e,n);return N1(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=ro(e,n);return N1(n,r,"y",t.intersect,i)}}};const RA=["left","top","right","bottom"];function $c(n,e){return n.filter(t=>t.pos===e)}function k1(n,e){return n.filter(t=>RA.indexOf(t.pos)===-1&&t.box.axis===e)}function Wc(n,e){return n.sort((t,i)=>{const r=e?i:t,o=e?t:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function D6(n){const e=[];let t,i,r,o,c,u;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:o,options:{stack:c,stackWeight:u=1}}=r,e.push({index:t,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:u});return e}function M6(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:o}=t;if(!i||!RA.includes(r))continue;const c=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return e}function P6(n,e){const t=M6(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,c,u;for(o=0,c=n.length;o<c;++o){u=n[o];const{fullSize:d}=u.box,f=t[u.stack],y=f&&u.stackWeight/f.weight;u.horizontal?(u.width=y?y*i:d&&e.availableWidth,u.height=r):(u.width=i,u.height=y?y*r:d&&e.availableHeight)}return t}function O6(n){const e=D6(n),t=Wc(e.filter(f=>f.box.fullSize),!0),i=Wc($c(e,"left"),!0),r=Wc($c(e,"right")),o=Wc($c(e,"top"),!0),c=Wc($c(e,"bottom")),u=k1(e,"x"),d=k1(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:r.concat(d).concat(c).concat(u),chartArea:$c(e,"chartArea"),vertical:i.concat(r).concat(d),horizontal:o.concat(c).concat(u)}}function C1(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function NA(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function j6(n,e,t,i){const{pos:r,box:o}=t,c=n.maxPadding;if(!at(r)){t.size&&(n[r]-=t.size);const _=i[t.stack]||{size:0,count:1};_.size=Math.max(_.size,t.horizontal?o.height:o.width),t.size=_.size/_.count,n[r]+=t.size}o.getPadding&&NA(c,o.getPadding());const u=Math.max(0,e.outerWidth-C1(c,n,"left","right")),d=Math.max(0,e.outerHeight-C1(c,n,"top","bottom")),f=u!==n.w,y=d!==n.h;return n.w=u,n.h=d,t.horizontal?{same:f,other:y}:{same:y,other:f}}function L6(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function V6(n,e){const t=e.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(e[c],t[c])}),o}return i(n?["left","right"]:["top","bottom"])}function nu(n,e,t,i){const r=[];let o,c,u,d,f,y;for(o=0,c=n.length,f=0;o<c;++o){u=n[o],d=u.box,d.update(u.width||e.w,u.height||e.h,V6(u.horizontal,e));const{same:_,other:x}=j6(e,t,u,i);f|=_&&r.length,y=y||x,d.fullSize||r.push(u)}return f&&nu(r,e,t,i)||y}function Id(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function I1(n,e,t,i){const r=t.padding;let{x:o,y:c}=e;for(const u of n){const d=u.box,f=i[u.stack]||{placed:0,weight:1},y=u.stackWeight/f.weight||1;if(u.horizontal){const _=e.w*y,x=f.size||d.height;Ru(f.start)&&(c=f.start),d.fullSize?Id(d,r.left,c,t.outerWidth-r.right-r.left,x):Id(d,e.left+f.placed,c,_,x),f.start=c,f.placed+=_,c=d.bottom}else{const _=e.h*y,x=f.size||d.width;Ru(f.start)&&(o=f.start),d.fullSize?Id(d,o,r.top,x,t.outerHeight-r.bottom-r.top):Id(d,o,e.top+f.placed,x,_),f.start=o,f.placed+=_,o=d.right}}e.x=o,e.y=c}var Mi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=Oi(n.options.layout.padding),o=Math.max(e-r.width,0),c=Math.max(t-r.height,0),u=O6(n.boxes),d=u.vertical,f=u.horizontal;yt(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const y=d.reduce((k,R)=>R.box.options&&R.box.options.display===!1?k:k+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/y,hBoxMaxHeight:c/2}),x=Object.assign({},r);NA(x,Oi(i));const w=Object.assign({maxPadding:x,w:o,h:c,x:r.left,y:r.top},r),A=P6(d.concat(f),_);nu(u.fullSize,w,_,A),nu(d,w,_,A),nu(f,w,_,A)&&nu(d,w,_,A),L6(w),I1(u.leftAndTop,w,_,A),w.x+=w.w,w.y+=w.h,I1(u.rightAndBottom,w,_,A),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},yt(u.chartArea,k=>{const R=k.box;Object.assign(R,n.chartArea),R.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class kA{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class U6 extends kA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Qd="$chartjs",F6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},D1=n=>n===null||n==="";function z6(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Qd]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",D1(r)){const o=g1(n,"width");o!==void 0&&(n.width=o)}if(D1(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=g1(n,"height");o!==void 0&&(n.height=o)}return n}const CA=L3?{passive:!0}:!1;function B6(n,e,t){n&&n.addEventListener(e,t,CA)}function H6(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,CA)}function q6(n,e){const t=F6[n.type]||n.type,{x:i,y:r}=ro(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Nf(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function G6(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||Nf(u.addedNodes,i),c=c&&!Nf(u.removedNodes,i);c&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function $6(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||Nf(u.removedNodes,i),c=c&&!Nf(u.addedNodes,i);c&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const Du=new Map;let M1=0;function IA(){const n=window.devicePixelRatio;n!==M1&&(M1=n,Du.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function W6(n,e){Du.size||window.addEventListener("resize",IA),Du.set(n,e)}function Y6(n){Du.delete(n),Du.size||window.removeEventListener("resize",IA)}function K6(n,e,t){const i=n.canvas,r=i&&F0(i);if(!r)return;const o=dA((u,d)=>{const f=r.clientWidth;t(u,d),f<r.clientWidth&&t()},window),c=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,y=d.contentRect.height;f===0&&y===0||o(f,y)});return c.observe(r),W6(n,o),c}function Dp(n,e,t){t&&t.disconnect(),e==="resize"&&Y6(n)}function X6(n,e,t){const i=n.canvas,r=dA(o=>{n.ctx!==null&&t(q6(o,n))},n);return B6(i,e,r),r}class Q6 extends kA{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(z6(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Qd])return!1;const i=t[Qd].initial;["height","width"].forEach(o=>{const c=i[o];dt(c)?t.removeAttribute(o):t.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{t.style[o]=r[o]}),t.width=t.width,delete t[Qd],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),c={attach:G6,detach:$6,resize:K6}[t]||X6;r[t]=c(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:Dp,detach:Dp,resize:Dp}[t]||H6)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return j3(e,t,i,r)}isAttached(e){const t=e&&F0(e);return!!(t&&t.isConnected)}}function Z6(n){return!U0()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?U6:Q6}class yr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Nu(this.x)&&Nu(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function J6(n,e){const t=n.options.ticks,i=e5(n),r=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?n5(e):[],c=o.length,u=o[0],d=o[c-1],f=[];if(c>r)return i5(e,f,o,c/r),f;const y=t5(o,e,r);if(c>0){let _,x;const w=c>1?Math.round((d-u)/(c-1)):null;for(Dd(e,f,y,dt(w)?0:u-w,u),_=0,x=c-1;_<x;_++)Dd(e,f,y,o[_],o[_+1]);return Dd(e,f,y,d,dt(w)?e.length:d+w),f}return Dd(e,f,y),f}function e5(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function t5(n,e,t){const i=s5(n),r=e.length/t;if(!i)return Math.max(r,1);const o=Oj(i);for(let c=0,u=o.length-1;c<u;c++){const d=o[c];if(d>r)return d}return Math.max(r,1)}function n5(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function i5(n,e,t,i){let r=0,o=t[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(e.push(n[c]),r++,o=t[r*i])}function Dd(n,e,t,i,r){const o=$e(i,0),c=Math.min($e(r,n.length),n.length);let u=0,d,f,y;for(t=Math.ceil(t),r&&(d=r-i,t=d/Math.floor(d/t)),y=o;y<0;)u++,y=Math.round(o+u*t);for(f=Math.max(o,0);f<c;f++)f===y&&(e.push(n[f]),u++,y=Math.round(o+u*t))}function s5(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const r5=n=>n==="left"?"right":n==="right"?"left":n,P1=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,O1=(n,e)=>Math.min(e||n,n);function j1(n,e){const t=[],i=n.length/e,r=n.length;let o=0;for(;o<r;o+=i)t.push(n[Math.floor(o)]);return t}function a5(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),o=n._startPixel,c=n._endPixel,u=1e-6;let d=n.getPixelForTick(r),f;if(!(t&&(i===1?f=Math.max(d-o,c-d):e===0?f=(n.getPixelForTick(1)-d)/2:f=(d-n.getPixelForTick(r-1))/2,d+=r<e?f:-f,d<o-u||d>c+u)))return d}function o5(n,e){yt(n,t=>{const i=t.gc,r=i.length/2;let o;if(r>e){for(o=0;o<r;++o)delete t.data[i[o]];i.splice(0,r)}})}function Yc(n){return n.drawTicks?n.tickLength:0}function L1(n,e){if(!n.display)return 0;const t=Dn(n.font,e),i=Oi(n.padding);return(sn(n.text)?n.text.length:1)*t.lineHeight+i.height}function l5(n,e){return To(n,{scale:e,type:"scale"})}function c5(n,e,t){return To(n,{tick:t,index:e,type:"tick"})}function u5(n,e,t){let i=C0(n);return(t&&e!=="right"||!t&&e==="right")&&(i=r5(i)),i}function h5(n,e,t,i){const{top:r,left:o,bottom:c,right:u,chart:d}=n,{chartArea:f,scales:y}=d;let _=0,x,w,A;const k=c-r,R=u-o;if(n.isHorizontal()){if(w=Nn(i,o,u),at(t)){const j=Object.keys(t)[0],B=t[j];A=y[j].getPixelForValue(B)+k-e}else t==="center"?A=(f.bottom+f.top)/2+k-e:A=P1(n,t,e);x=u-o}else{if(at(t)){const j=Object.keys(t)[0],B=t[j];w=y[j].getPixelForValue(B)-R+e}else t==="center"?w=(f.left+f.right)/2-R+e:w=P1(n,t,e);A=Nn(i,c,r),_=t==="left"?-an:an}return{titleX:w,titleY:A,maxWidth:x,rotation:_}}class $l extends yr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=fs(e,Number.POSITIVE_INFINITY),t=fs(t,Number.NEGATIVE_INFINITY),i=fs(i,Number.POSITIVE_INFINITY),r=fs(r,Number.NEGATIVE_INFINITY),{min:fs(e,i),max:fs(t,r),minDefined:Pi(e),maxDefined:Pi(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:t,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)c=u[d].controller.getMinMax(this,e),r||(t=Math.min(t,c.min)),o||(i=Math.max(i,c.max));return t=o&&t>i?i:t,i=r&&t>i?t:i,{min:fs(t,fs(i,t)),max:fs(i,fs(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ct(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=m3(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?j1(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=J6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ct(this.options.afterUpdate,[this])}beforeSetDimensions(){Ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ct(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ct(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=Ct(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){Ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=O1(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,o=t.maxRotation;let c=r,u,d,f;if(!this._isVisible()||!t.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const y=this._getLabelSizes(),_=y.widest.width,x=y.highest.height,w=In(this.chart.width-_,0,this.maxWidth);u=e.offset?this.maxWidth/i:w/(i-1),_+6>u&&(u=w/(i-(e.offset?.5:1)),d=this.maxHeight-Yc(e.grid)-t.padding-L1(e.title,this.chart.options.font),f=Math.sqrt(_*_+x*x),c=Uj(Math.min(Math.asin(In((y.highest.height+6)/u,-1,1)),Math.asin(In(d/f,-1,1))-Math.asin(In(x/f,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ct(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const d=L1(r,t.options.font);if(u?(e.width=this.maxWidth,e.height=Yc(o)+d):(e.height=this.maxHeight,e.width=Yc(o)+d),i.display&&this.ticks.length){const{first:f,last:y,widest:_,highest:x}=this._getLabelSizes(),w=i.padding*2,A=or(this.labelRotation),k=Math.cos(A),R=Math.sin(A);if(u){const j=i.mirror?0:R*_.width+k*x.height;e.height=Math.min(this.maxHeight,e.height+j+w)}else{const j=i.mirror?0:k*_.width+R*x.height;e.width=Math.min(this.maxWidth,e.width+j+w)}this._calculatePadding(f,y,R,k)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:o,padding:c},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;d?f?(x=r*e.width,w=i*t.height):(x=i*e.height,w=r*t.width):o==="start"?w=t.width:o==="end"?x=e.width:o!=="inner"&&(x=e.width/2,w=t.width/2),this.paddingLeft=Math.max((x-y+c)*this.width/(this.width-y),0),this.paddingRight=Math.max((w-_+c)*this.width/(this.width-_),0)}else{let y=t.height/2,_=e.height/2;o==="start"?(y=0,_=e.height):o==="end"&&(y=t.height,_=0),this.paddingTop=y+c,this.paddingBottom=_+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ct(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)dt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=j1(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:o}=this,c=[],u=[],d=Math.floor(t/O1(t,i));let f=0,y=0,_,x,w,A,k,R,j,B,W,Z,$;for(_=0;_<t;_+=d){if(A=e[_].label,k=this._resolveTickFontOptions(_),r.font=R=k.string,j=o[R]=o[R]||{data:{},gc:[]},B=k.lineHeight,W=Z=0,!dt(A)&&!sn(A))W=u1(r,j.data,j.gc,W,A),Z=B;else if(sn(A))for(x=0,w=A.length;x<w;++x)$=A[x],!dt($)&&!sn($)&&(W=u1(r,j.data,j.gc,W,$),Z+=B);c.push(W),u.push(Z),f=Math.max(W,f),y=Math.max(Z,y)}o5(o,t);const le=c.indexOf(f),P=u.indexOf(y),I=T=>({width:c[T]||0,height:u[T]||0});return{first:I(0),last:I(t-1),widest:I(le),highest:I(P),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return zj(this._alignToPixels?no(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=c5(this.getContext(),e,i))}return this.$context||(this.$context=l5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=or(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),c=e.autoSkipPadding||0,u=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>u*r?u/i:d/r:d*r<u*i?d/i:u/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:u}=r,d=o.offset,f=this.isHorizontal(),_=this.ticks.length+(d?1:0),x=Yc(o),w=[],A=u.setContext(this.getContext()),k=A.display?A.width:0,R=k/2,j=function(F){return no(i,F,k)};let B,W,Z,$,le,P,I,T,O,C,z,L;if(c==="top")B=j(this.bottom),P=this.bottom-x,T=B-R,C=j(e.top)+R,L=e.bottom;else if(c==="bottom")B=j(this.top),C=e.top,L=j(e.bottom)-R,P=B+R,T=this.top+x;else if(c==="left")B=j(this.right),le=this.right-x,I=B-R,O=j(e.left)+R,z=e.right;else if(c==="right")B=j(this.left),O=e.left,z=j(e.right)-R,le=B+R,I=this.left+x;else if(t==="x"){if(c==="center")B=j((e.top+e.bottom)/2+.5);else if(at(c)){const F=Object.keys(c)[0],ee=c[F];B=j(this.chart.scales[F].getPixelForValue(ee))}C=e.top,L=e.bottom,P=B+R,T=P+x}else if(t==="y"){if(c==="center")B=j((e.left+e.right)/2);else if(at(c)){const F=Object.keys(c)[0],ee=c[F];B=j(this.chart.scales[F].getPixelForValue(ee))}le=B-R,I=le-x,O=e.left,z=e.right}const be=$e(r.ticks.maxTicksLimit,_),Ae=Math.max(1,Math.ceil(_/be));for(W=0;W<_;W+=Ae){const F=this.getContext(W),ee=o.setContext(F),ue=u.setContext(F),xe=ee.lineWidth,V=ee.color,ae=ue.dash||[],te=ue.dashOffset,Y=ee.tickWidth,ge=ee.tickColor,ye=ee.tickBorderDash||[],_e=ee.tickBorderDashOffset;Z=a5(this,W,d),Z!==void 0&&($=no(i,Z,xe),f?le=I=O=z=$:P=T=C=L=$,w.push({tx1:le,ty1:P,tx2:I,ty2:T,x1:O,y1:C,x2:z,y2:L,width:xe,color:V,borderDash:ae,borderDashOffset:te,tickWidth:Y,tickColor:ge,tickBorderDash:ye,tickBorderDashOffset:_e}))}return this._ticksLength=_,this._borderValue=B,w}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:y,mirror:_}=o,x=Yc(i.grid),w=x+y,A=_?-y:w,k=-or(this.labelRotation),R=[];let j,B,W,Z,$,le,P,I,T,O,C,z,L="middle";if(r==="top")le=this.bottom-A,P=this._getXAxisLabelAlignment();else if(r==="bottom")le=this.top+A,P=this._getXAxisLabelAlignment();else if(r==="left"){const Ae=this._getYAxisLabelAlignment(x);P=Ae.textAlign,$=Ae.x}else if(r==="right"){const Ae=this._getYAxisLabelAlignment(x);P=Ae.textAlign,$=Ae.x}else if(t==="x"){if(r==="center")le=(e.top+e.bottom)/2+w;else if(at(r)){const Ae=Object.keys(r)[0],F=r[Ae];le=this.chart.scales[Ae].getPixelForValue(F)+w}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")$=(e.left+e.right)/2-w;else if(at(r)){const Ae=Object.keys(r)[0],F=r[Ae];$=this.chart.scales[Ae].getPixelForValue(F)}P=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(d==="start"?L="top":d==="end"&&(L="bottom"));const be=this._getLabelSizes();for(j=0,B=u.length;j<B;++j){W=u[j],Z=W.label;const Ae=o.setContext(this.getContext(j));I=this.getPixelForTick(j)+o.labelOffset,T=this._resolveTickFontOptions(j),O=T.lineHeight,C=sn(Z)?Z.length:1;const F=C/2,ee=Ae.color,ue=Ae.textStrokeColor,xe=Ae.textStrokeWidth;let V=P;c?($=I,P==="inner"&&(j===B-1?V=this.options.reverse?"left":"right":j===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?f==="near"||k!==0?z=-C*O+O/2:f==="center"?z=-be.highest.height/2-F*O+O:z=-be.highest.height+O/2:f==="near"||k!==0?z=O/2:f==="center"?z=be.highest.height/2-F*O:z=be.highest.height-C*O,_&&(z*=-1),k!==0&&!Ae.showLabelBackdrop&&($+=O/2*Math.sin(k))):(le=I,z=(1-C)*O/2);let ae;if(Ae.showLabelBackdrop){const te=Oi(Ae.backdropPadding),Y=be.heights[j],ge=be.widths[j];let ye=z-te.top,_e=0-te.left;switch(L){case"middle":ye-=Y/2;break;case"bottom":ye-=Y;break}switch(P){case"center":_e-=ge/2;break;case"right":_e-=ge;break;case"inner":j===B-1?_e-=ge:j>0&&(_e-=ge/2);break}ae={left:_e,top:ye,width:ge+te.width,height:Y+te.height,color:Ae.backdropColor}}R.push({label:Z,font:T,textOffset:z,options:{rotation:k,color:ee,strokeColor:ue,strokeWidth:xe,textAlign:V,textBaseline:L,translation:[$,le],backdrop:ae}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-or(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),u=e+o,d=c.widest.width;let f,y;return t==="left"?r?(y=this.right+o,i==="near"?f="left":i==="center"?(f="center",y+=d/2):(f="right",y+=d)):(y=this.right-u,i==="near"?f="right":i==="center"?(f="center",y-=d/2):(f="left",y=this.left)):t==="right"?r?(y=this.left+o,i==="near"?f="right":i==="center"?(f="center",y-=d/2):(f="left",y-=d)):(y=this.left+u,i==="near"?f="left":i==="center"?(f="center",y+=d/2):(f="right",y=this.right)):f="right",{textAlign:f,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:o,height:c}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,o,c),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,c;const u=(d,f,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(o=0,c=r.length;o<c;++o){const d=r[o];t.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const u=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,y,_,x;this.isHorizontal()?(f=no(e,this.left,c)-c/2,y=no(e,this.right,u)+u/2,_=x=d):(_=no(e,this.top,c)-c/2,x=no(e,this.bottom,u)+u/2,f=y=d),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,_),t.lineTo(y,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&M0(i,r);const o=this.getLabelItems(e);for(const c of o){const u=c.options,d=c.font,f=c.label,y=c.textOffset;Iu(i,f,0,y,d,u)}r&&P0(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const o=Dn(i.font),c=Oi(i.padding),u=i.align;let d=o.lineHeight/2;t==="bottom"||t==="center"||at(t)?(d+=c.bottom,sn(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:f,titleY:y,maxWidth:_,rotation:x}=h5(this,d,t,u);Iu(e,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:x,textAlign:u5(u,t,r),textBaseline:"middle",translation:[f,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=$e(e.grid&&e.grid.z,-1),r=$e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$l.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=t.length;o<c;++o){const u=t[o];u[i]===this.id&&(!e||u.type===e)&&r.push(u)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Dn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Md{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;m5(t)&&(i=this.register(t));const r=this.items,o=e.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,d5(e,c,i),this.override&&Ht.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Ht[r]&&(delete Ht[r][i],this.override&&delete _o[i])}}function d5(n,e,t){const i=Au(Object.create(null),[t?Ht.get(t):{},Ht.get(e),n.defaults]);Ht.set(e,i),n.defaultRoutes&&f5(e,n.defaultRoutes),n.descriptors&&Ht.describe(e,n.descriptors)}function f5(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),o=[n].concat(i).join("."),c=e[t].split("."),u=c.pop(),d=c.join(".");Ht.route(o,r,d,u)})}function m5(n){return"id"in n&&"defaults"in n}class g5{constructor(){this.controllers=new Md(im,"datasets",!0),this.elements=new Md(yr,"elements"),this.plugins=new Md(Object,"plugins"),this.scales=new Md($l,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):yt(r,c=>{const u=i||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,t,i){const r=N0(e);Ct(i["before"+r],[],i),t[e](i),Ct(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var gs=new g5;class p5{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=r?this._descriptors(e).filter(r):this._descriptors(e),c=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,t,i,r){r=r||{};for(const o of e){const c=o.plugin,u=c[i],d=[t,r,o.options];if(Ct(u,d,c)===!1&&r.cancelable)return!1}return!0}invalidate(){dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=$e(i.options&&i.options.plugins,{}),o=y5(i);return r===!1&&!t?[]:_5(e,o,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(u=>!c.some(d=>u.plugin.id===d.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function y5(n){const e={},t=[],i=Object.keys(gs.plugins.items);for(let o=0;o<i.length;o++)t.push(gs.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];t.indexOf(c)===-1&&(t.push(c),e[c.id]=!0)}return{plugins:t,localIds:e}}function b5(n,e){return!e&&n===!1?null:n===!0?{}:n}function _5(n,{plugins:e,localIds:t},i,r){const o=[],c=n.getContext();for(const u of e){const d=u.id,f=b5(i[d],r);f!==null&&o.push({plugin:u,options:v5(n.config,{plugin:u,local:t[d]},f,c)})}return o}function v5(n,{plugin:e,local:t},i,r){const o=n.pluginScopeKeys(e),c=n.getOptionScopes(i,o);return t&&e.defaults&&c.push(e.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gy(n,e){const t=Ht.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function x5(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function w5(n,e){return n===e?"_index_":"_value_"}function V1(n){if(n==="x"||n==="y"||n==="r")return n}function E5(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function py(n,...e){if(V1(n))return n;for(const t of e){const i=t.axis||E5(t.position)||n.length>1&&V1(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function U1(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function S5(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return U1(n,"x",t[0])||U1(n,"y",t[0])}return{}}function T5(n,e){const t=_o[n.type]||{scales:{}},i=e.scales||{},r=gy(n.type,e),o=Object.create(null);return Object.keys(i).forEach(c=>{const u=i[c];if(!at(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=py(c,u,S5(c,n),Ht.scales[u.type]),f=w5(d,r),y=t.scales||{};o[c]=uu(Object.create(null),[{axis:d},u,y[d],y[f]])}),n.data.datasets.forEach(c=>{const u=c.type||n.type,d=c.indexAxis||gy(u,e),y=(_o[u]||{}).scales||{};Object.keys(y).forEach(_=>{const x=x5(_,d),w=c[x+"AxisID"]||x;o[w]=o[w]||Object.create(null),uu(o[w],[{axis:x},i[w],y[_]])})}),Object.keys(o).forEach(c=>{const u=o[c];uu(u,[Ht.scales[u.type],Ht.scale])}),o}function DA(n){const e=n.options||(n.options={});e.plugins=$e(e.plugins,{}),e.scales=T5(n,e)}function MA(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function A5(n){return n=n||{},n.data=MA(n.data),DA(n),n}const F1=new Map,PA=new Set;function Pd(n,e){let t=F1.get(n);return t||(t=e(),F1.set(n,t),PA.add(t)),t}const Kc=(n,e,t)=>{const i=bo(e,t);i!==void 0&&n.add(i)};class R5{constructor(e){this._config=A5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=MA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Pd(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Pd(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Pd(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:o}=this,c=this._cachedScopes(e,i),u=c.get(t);if(u)return u;const d=new Set;t.forEach(y=>{e&&(d.add(e),y.forEach(_=>Kc(d,e,_))),y.forEach(_=>Kc(d,r,_)),y.forEach(_=>Kc(d,_o[o]||{},_)),y.forEach(_=>Kc(d,Ht,_)),y.forEach(_=>Kc(d,fy,_))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),PA.has(t)&&c.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,_o[t]||{},Ht.datasets[t]||{},{type:t},Ht,fy]}resolveNamedOptions(e,t,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=z1(this._resolverCache,e,r);let d=c;if(k5(c,t)){o.$shared=!1,i=ba(i)?i():i;const f=this.createResolver(e,i,u);d=Ol(c,i,f)}for(const f of t)o[f]=d[f];return o}createResolver(e,t,i=[""],r){const{resolver:o}=z1(this._resolverCache,e,i);return at(t)?Ol(o,t,void 0,r):o}}function z1(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let o=i.get(r);return o||(o={resolver:j0(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const N5=n=>at(n)&&Object.getOwnPropertyNames(n).some(e=>ba(n[e]));function k5(n,e){const{isScriptable:t,isIndexable:i}=pA(n);for(const r of e){const o=t(r),c=i(r),u=(c||o)&&n[r];if(o&&(ba(u)||N5(u))||c&&sn(u))return!0}return!1}var C5="4.5.0";const I5=["top","bottom","left","right","chartArea"];function B1(n,e){return n==="top"||n==="bottom"||I5.indexOf(n)===-1&&e==="x"}function H1(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function q1(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Ct(t&&t.onComplete,[n],e)}function D5(n){const e=n.chart,t=e.options.animation;Ct(t&&t.onProgress,[n],e)}function OA(n){return U0()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Zd={},G1=n=>{const e=OA(n);return Object.values(Zd).filter(t=>t.canvas===e).pop()};function M5(n,e,t){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=e){const c=n[r];delete n[r],(t>0||o>e)&&(n[o+t]=c)}}}function P5(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}let rm=class{static defaults=Ht;static instances=Zd;static overrides=_o;static registry=gs;static version=C5;static getChart=G1;static register(...e){gs.add(...e),$1()}static unregister(...e){gs.remove(...e),$1()}constructor(e,t){const i=this.config=new R5(t),r=OA(e),o=G1(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Z6(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,c.aspectRatio),d=u&&u.canvas,f=d&&d.height,y=d&&d.width;if(this.id=Aj(),this.ctx=u,this.canvas=d,this.width=y,this.height=f,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new p5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Gj(_=>this.update(_),c.resizeDelay||0),this._dataChanges=[],Zd[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}nr.listen(this,"complete",q1),nr.listen(this,"progress",D5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:o}=this;return dt(e)?t&&o?o:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():m1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return h1(this.canvas,this.ctx),this}stop(){return nr.stop(this),this}resize(e,t){nr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,e,t,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,m1(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),Ct(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};yt(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((c,u)=>(c[u]=!1,c),{});let o=[];t&&(o=o.concat(Object.keys(t).map(c=>{const u=t[c],d=py(c,u),f=d==="r",y=d==="x";return{options:u,dposition:f?"chartArea":y?"bottom":"left",dtype:f?"radialLinear":y?"category":"linear"}}))),yt(o,c=>{const u=c.options,d=u.id,f=py(d,u),y=$e(u.type,c.dtype);(u.position===void 0||B1(u.position,f)!==B1(c.dposition))&&(u.position=c.dposition),r[d]=!0;let _=null;if(d in i&&i[d].type===y)_=i[d];else{const x=gs.getScale(y);_=new x({id:d,type:y,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(u,e)}),yt(r,(c,u)=>{c||delete i[u]}),yt(i,c=>{Mi.configure(this,c,c.options),Mi.addBox(this,c)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,o)=>r.index-o.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(H1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const o=t[i];let c=this.getDatasetMeta(i);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=u,c.indexAxis=o.indexAxis||gy(u,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=gs.getController(u),{datasetElementType:f,dataElementType:y}=Ht.datasets[u];Object.assign(d,{dataElementType:gs.getElement(y),datasetElementType:f&&gs.getElement(f)}),c.controller=new d(this,i),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){yt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let f=0,y=this.data.datasets.length;f<y;f++){const{controller:_}=this.getDatasetMeta(f),x=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(x),c=Math.max(+_.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||yt(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(H1("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){yt(this.scales,e=>{Mi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!t1(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of t){const c=i==="_removeElements"?-o:o;M5(e,r,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=o=>new Set(e.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<t;o++)if(!t1(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Mi.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],yt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ba(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(nr.has(this)?this.attached&&!nr.running(this)&&nr.start(this):(this.draw(),q1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,o;for(r=0,o=t.length;r<o;++r){const c=t[r];(!e||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Q3(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&M0(t,r),e.controller.draw(),r&&P0(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Cu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const o=I6.modes[t];return typeof o=="function"?o(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(o=>o&&o._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=To(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",o=this.getDatasetMeta(e),c=o.controller._resolveAnimations(void 0,r);Ru(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),c.update(o,{visible:i}),this.update(u=>u.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),nr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),h1(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Zd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(o,c)=>{t.addEventListener(this,o,c),e[o]=c},r=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};yt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(d,f)=>{t.addEventListener(this,d,f),e[d]=f},r=(d,f)=>{e[d]&&(t.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let c;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},t.isAttached(this.canvas)?u():c()}unbindEvents(){yt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},yt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let o,c,u,d;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){c=e[u];const f=c&&this.getDatasetMeta(c.datasetIndex).controller;f&&f[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!Ef(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,o=(d,f)=>d.filter(y=>!f.some(_=>y.datasetIndex===_.datasetIndex&&y.index===_.index)),c=o(t,e),u=i?e:o(e,t);c.length&&this.updateHoverStyle(c,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:o}=this,c=t,u=this._getActiveElements(e,r,i,c),d=Dj(e),f=P5(e,this._lastEvent,i,d);i&&(this._lastEvent=null,Ct(o.onHover,[e,u,this],this),d&&Ct(o.onClick,[e,u,this],this));const y=!Ef(u,r);return(y||t)&&(this._active=u,this._updateHoverStyles(u,r,t)),this._lastEvent=f,y}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}};function $1(){return yt(rm.instances,n=>n._plugins.invalidate())}function O5(n,e,t){const{startAngle:i,x:r,y:o,outerRadius:c,innerRadius:u,options:d}=e,{borderWidth:f,borderJoinStyle:y}=d,_=Math.min(f/c,qi(i-t));if(n.beginPath(),n.arc(r,o,c-f/2,i+_/2,t-_/2),u>0){const x=Math.min(f/u,qi(i-t));n.arc(r,o,u+f/2,t-x/2,i+x/2,!0)}else{const x=Math.min(f/2,c*qi(i-t));if(y==="round")n.arc(r,o,x,t-bt/2,i+bt/2,!0);else if(y==="bevel"){const w=2*x*x,A=-w*Math.cos(t+bt/2)+r,k=-w*Math.sin(t+bt/2)+o,R=w*Math.cos(i+bt/2)+r,j=w*Math.sin(i+bt/2)+o;n.lineTo(A,k),n.lineTo(R,j)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function j5(n,e,t){const{startAngle:i,pixelMargin:r,x:o,y:c,outerRadius:u,innerRadius:d}=e;let f=r/u;n.beginPath(),n.arc(o,c,u,i-f,t+f),d>r?(f=r/d,n.arc(o,c,d,t+f,i-f,!0)):n.arc(o,c,r,t+an,i-an),n.closePath(),n.clip()}function L5(n){return O0(n,["outerStart","outerEnd","innerStart","innerEnd"])}function V5(n,e,t,i){const r=L5(n.options.borderRadius),o=(t-e)/2,c=Math.min(o,i*e/2),u=d=>{const f=(t-Math.min(o,d))*i/2;return In(d,0,Math.min(o,f))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:In(r.innerStart,0,c),innerEnd:In(r.innerEnd,0,c)}}function ml(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function kf(n,e,t,i,r,o){const{x:c,y:u,startAngle:d,pixelMargin:f,innerRadius:y}=e,_=Math.max(e.outerRadius+i+t-f,0),x=y>0?y+i+t+f:0;let w=0;const A=r-d;if(i){const Ae=y>0?y-i:0,F=_>0?_-i:0,ee=(Ae+F)/2,ue=ee!==0?A*ee/(ee+i):A;w=(A-ue)/2}const k=Math.max(.001,A*_-t/bt)/_,R=(A-k)/2,j=d+R+w,B=r-R-w,{outerStart:W,outerEnd:Z,innerStart:$,innerEnd:le}=V5(e,x,_,B-j),P=_-W,I=_-Z,T=j+W/P,O=B-Z/I,C=x+$,z=x+le,L=j+$/C,be=B-le/z;if(n.beginPath(),o){const Ae=(T+O)/2;if(n.arc(c,u,_,T,Ae),n.arc(c,u,_,Ae,O),Z>0){const xe=ml(I,O,c,u);n.arc(xe.x,xe.y,Z,O,B+an)}const F=ml(z,B,c,u);if(n.lineTo(F.x,F.y),le>0){const xe=ml(z,be,c,u);n.arc(xe.x,xe.y,le,B+an,be+Math.PI)}const ee=(B-le/x+(j+$/x))/2;if(n.arc(c,u,x,B-le/x,ee,!0),n.arc(c,u,x,ee,j+$/x,!0),$>0){const xe=ml(C,L,c,u);n.arc(xe.x,xe.y,$,L+Math.PI,j-an)}const ue=ml(P,j,c,u);if(n.lineTo(ue.x,ue.y),W>0){const xe=ml(P,T,c,u);n.arc(xe.x,xe.y,W,j-an,T)}}else{n.moveTo(c,u);const Ae=Math.cos(T)*_+c,F=Math.sin(T)*_+u;n.lineTo(Ae,F);const ee=Math.cos(O)*_+c,ue=Math.sin(O)*_+u;n.lineTo(ee,ue)}n.closePath()}function U5(n,e,t,i,r){const{fullCircles:o,startAngle:c,circumference:u}=e;let d=e.endAngle;if(o){kf(n,e,t,i,d,r);for(let f=0;f<o;++f)n.fill();isNaN(u)||(d=c+(u%Ut||Ut))}return kf(n,e,t,i,d,r),n.fill(),d}function F5(n,e,t,i,r){const{fullCircles:o,startAngle:c,circumference:u,options:d}=e,{borderWidth:f,borderJoinStyle:y,borderDash:_,borderDashOffset:x,borderRadius:w}=d,A=d.borderAlign==="inner";if(!f)return;n.setLineDash(_||[]),n.lineDashOffset=x,A?(n.lineWidth=f*2,n.lineJoin=y||"round"):(n.lineWidth=f,n.lineJoin=y||"bevel");let k=e.endAngle;if(o){kf(n,e,t,i,k,r);for(let R=0;R<o;++R)n.stroke();isNaN(u)||(k=c+(u%Ut||Ut))}A&&j5(n,e,k),d.selfJoin&&k-c>=bt&&w===0&&y!=="miter"&&O5(n,e,k),o||(kf(n,e,t,i,k,r),n.stroke())}class z5 extends yr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:o,distance:c}=lA(r,{x:e,y:t}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:y,circumference:_}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),x=(this.options.spacing+this.options.borderWidth)/2,w=$e(_,d-u),A=ku(o,u,d)&&u!==d,k=w>=Ut||A,R=na(c,f+x,y+x);return k&&R}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:o,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,y=(r+o)/2,_=(c+u+f+d)/2;return{x:t+Math.cos(y)*_,y:i+Math.sin(y)*_}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/4,o=(t.spacing||0)/2,c=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Ut?Math.floor(i/Ut):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*r,Math.sin(u)*r);const d=1-Math.sin(Math.min(bt,i||0)),f=r*d;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,U5(e,this,f,o,c),F5(e,this,f,o,c),e.restore()}}function jA(n,e,t=e){n.lineCap=$e(t.borderCapStyle,e.borderCapStyle),n.setLineDash($e(t.borderDash,e.borderDash)),n.lineDashOffset=$e(t.borderDashOffset,e.borderDashOffset),n.lineJoin=$e(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=$e(t.borderWidth,e.borderWidth),n.strokeStyle=$e(t.borderColor,e.borderColor)}function B5(n,e,t){n.lineTo(t.x,t.y)}function H5(n){return n.stepped?r3:n.tension||n.cubicInterpolationMode==="monotone"?a3:B5}function LA(n,e,t={}){const i=n.length,{start:r=0,end:o=i-1}=t,{start:c,end:u}=e,d=Math.max(r,c),f=Math.min(o,u),y=r<c&&o<c||r>u&&o>u;return{count:i,start:d,loop:e.loop,ilen:f<d&&!y?i+f-d:f-d}}function q5(n,e,t,i){const{points:r,options:o}=e,{count:c,start:u,loop:d,ilen:f}=LA(r,t,i),y=H5(o);let{move:_=!0,reverse:x}=i||{},w,A,k;for(w=0;w<=f;++w)A=r[(u+(x?f-w:w))%c],!A.skip&&(_?(n.moveTo(A.x,A.y),_=!1):y(n,k,A,x,o.stepped),k=A);return d&&(A=r[(u+(x?f:0))%c],y(n,k,A,x,o.stepped)),!!d}function G5(n,e,t,i){const r=e.points,{count:o,start:c,ilen:u}=LA(r,t,i),{move:d=!0,reverse:f}=i||{};let y=0,_=0,x,w,A,k,R,j;const B=Z=>(c+(f?u-Z:Z))%o,W=()=>{k!==R&&(n.lineTo(y,R),n.lineTo(y,k),n.lineTo(y,j))};for(d&&(w=r[B(0)],n.moveTo(w.x,w.y)),x=0;x<=u;++x){if(w=r[B(x)],w.skip)continue;const Z=w.x,$=w.y,le=Z|0;le===A?($<k?k=$:$>R&&(R=$),y=(_*y+Z)/++_):(W(),n.lineTo(Z,$),A=le,_=0,k=R=$),j=$}W()}function yy(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?G5:q5}function $5(n){return n.stepped?V3:n.tension||n.cubicInterpolationMode==="monotone"?U3:ao}function W5(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),jA(n,e.options),n.stroke(r)}function Y5(n,e,t,i){const{segments:r,options:o}=e,c=yy(e);for(const u of r)jA(n,o,u.style),n.beginPath(),c(n,e,u,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const K5=typeof Path2D=="function";function X5(n,e,t,i){K5&&!e.options.segment?W5(n,e,t,i):Y5(n,e,t,i)}class Q5 extends yr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;C3(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=W3(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],o=this.points,c=q3(this,{property:t,start:r,end:r});if(!c.length)return;const u=[],d=$5(i);let f,y;for(f=0,y=c.length;f<y;++f){const{start:_,end:x}=c[f],w=o[_],A=o[x];if(w===A){u.push(w);continue}const k=Math.abs((r-w[t])/(A[t]-w[t])),R=d(w,A,k,i.stepped);R[t]=e[t],u.push(R)}return u.length===1?u[0]:u}pathSegment(e,t,i){return yy(this)(e,this,t,i)}path(e,t,i){const r=this.segments,o=yy(this);let c=this._loop;t=t||0,i=i||this.points.length-t;for(const u of r)c&=o(e,this,u,{start:t,end:t+i-1});return!!c}draw(e,t,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),X5(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function W1(n,e,t,i){const r=n.options,{[t]:o}=n.getProps([t],i);return Math.abs(e-o)<r.radius+r.hitRadius}class Z5 extends yr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(t-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return W1(this,e,"x",t)}inYRange(e,t){return W1(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!Cu(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,my(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function VA(n,e){const{x:t,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],e);let u,d,f,y,_;return n.horizontal?(_=c/2,u=Math.min(t,r),d=Math.max(t,r),f=i-_,y=i+_):(_=o/2,u=t-_,d=t+_,f=Math.min(i,r),y=Math.max(i,r)),{left:u,top:f,right:d,bottom:y}}function ia(n,e,t,i){return n?0:In(e,t,i)}function J5(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,o=gA(i);return{t:ia(r.top,o.top,0,t),r:ia(r.right,o.right,0,e),b:ia(r.bottom,o.bottom,0,t),l:ia(r.left,o.left,0,e)}}function eL(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Al(r),c=Math.min(e,t),u=n.borderSkipped,d=i||at(r);return{topLeft:ia(!d||u.top||u.left,o.topLeft,0,c),topRight:ia(!d||u.top||u.right,o.topRight,0,c),bottomLeft:ia(!d||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:ia(!d||u.bottom||u.right,o.bottomRight,0,c)}}function tL(n){const e=VA(n),t=e.right-e.left,i=e.bottom-e.top,r=J5(n,t/2,i/2),o=eL(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Mp(n,e,t,i){const r=e===null,o=t===null,u=n&&!(r&&o)&&VA(n,i);return u&&(r||na(e,u.left,u.right))&&(o||na(t,u.top,u.bottom))}function nL(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function iL(n,e){n.rect(e.x,e.y,e.w,e.h)}function Pp(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,c=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class sL extends yr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=tL(this),u=nL(c.radius)?Af:iL;e.save(),(c.w!==o.w||c.h!==o.h)&&(e.beginPath(),u(e,Pp(c,t,o)),e.clip(),u(e,Pp(o,-t,c)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),u(e,Pp(o,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return Mp(this,e,t,i)}inXRange(e,t){return Mp(this,e,null,t)}inYRange(e,t){return Mp(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+r)/2:t,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const Y1=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},rL=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class K1 extends yr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ct(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Dn(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=Y1(i,o);let f,y;t.font=r.string,this.isHorizontal()?(f=this.maxWidth,y=this._fitRows(c,o,u,d)+10):(y=this.maxHeight,f=this._fitCols(c,r,u,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],y=r+u;let _=e;o.textAlign="left",o.textBaseline="middle";let x=-1,w=-y;return this.legendItems.forEach((A,k)=>{const R=i+t/2+o.measureText(A.text).width;(k===0||f[f.length-1]+R+2*u>c)&&(_+=y,f[f.length-(k>0?0:1)]=0,w+=y,x++),d[k]={left:0,top:w,row:x,width:R,height:r},f[f.length-1]+=R+u}),_}_fitCols(e,t,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],y=c-e;let _=u,x=0,w=0,A=0,k=0;return this.legendItems.forEach((R,j)=>{const{itemWidth:B,itemHeight:W}=aL(i,t,o,R,r);j>0&&w+W+2*u>y&&(_+=x+u,f.push({width:x,height:w}),A+=x+u,k++,x=w=0),d[j]={left:A,top:w,col:k,width:B,height:W},x=Math.max(x,B),w+=W+u}),_+=x,f.push({width:x,height:w}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:o}}=this,c=Rl(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=Nn(i,this.left+r,this.right-this.lineWidths[u]);for(const f of t)u!==f.row&&(u=f.row,d=Nn(i,this.left+r,this.right-this.lineWidths[u])),f.top+=this.top+e+r,f.left=c.leftForLtr(c.x(d),f.width),d+=f.width+r}else{let u=0,d=Nn(i,this.top+e+r,this.bottom-this.columnSizes[u].height);for(const f of t)f.col!==u&&(u=f.col,d=Nn(i,this.top+e+r,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+r,f.left=c.leftForLtr(c.x(f.left),f.width),d+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;M0(e,this),this._draw(),P0(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:o,labels:c}=e,u=Ht.color,d=Rl(e.rtl,this.left,this.width),f=Dn(c.font),{padding:y}=c,_=f.size,x=_/2;let w;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:A,boxHeight:k,itemHeight:R}=Y1(c,_),j=function(le,P,I){if(isNaN(A)||A<=0||isNaN(k)||k<0)return;r.save();const T=$e(I.lineWidth,1);if(r.fillStyle=$e(I.fillStyle,u),r.lineCap=$e(I.lineCap,"butt"),r.lineDashOffset=$e(I.lineDashOffset,0),r.lineJoin=$e(I.lineJoin,"miter"),r.lineWidth=T,r.strokeStyle=$e(I.strokeStyle,u),r.setLineDash($e(I.lineDash,[])),c.usePointStyle){const O={radius:k*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:T},C=d.xPlus(le,A/2),z=P+x;mA(r,O,C,z,c.pointStyleWidth&&A)}else{const O=P+Math.max((_-k)/2,0),C=d.leftForLtr(le,A),z=Al(I.borderRadius);r.beginPath(),Object.values(z).some(L=>L!==0)?Af(r,{x:C,y:O,w:A,h:k,radius:z}):r.rect(C,O,A,k),r.fill(),T!==0&&r.stroke()}r.restore()},B=function(le,P,I){Iu(r,I.text,le,P+R/2,f,{strikethrough:I.hidden,textAlign:d.textAlign(I.textAlign)})},W=this.isHorizontal(),Z=this._computeTitleHeight();W?w={x:Nn(o,this.left+y,this.right-i[0]),y:this.top+y+Z,line:0}:w={x:this.left+y,y:Nn(o,this.top+Z+y,this.bottom-t[0].height),line:0},xA(this.ctx,e.textDirection);const $=R+y;this.legendItems.forEach((le,P)=>{r.strokeStyle=le.fontColor,r.fillStyle=le.fontColor;const I=r.measureText(le.text).width,T=d.textAlign(le.textAlign||(le.textAlign=c.textAlign)),O=A+x+I;let C=w.x,z=w.y;d.setWidth(this.width),W?P>0&&C+O+y>this.right&&(z=w.y+=$,w.line++,C=w.x=Nn(o,this.left+y,this.right-i[w.line])):P>0&&z+$>this.bottom&&(C=w.x=C+t[w.line].width+y,w.line++,z=w.y=Nn(o,this.top+Z+y,this.bottom-t[w.line].height));const L=d.x(C);if(j(L,z,le),C=$j(T,C+A+x,W?C+O:this.right,e.rtl),B(d.x(C),z,le),W)w.x+=O+y;else if(typeof le.text!="string"){const be=f.lineHeight;w.y+=UA(le,be)+y}else w.y+=$}),wA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Dn(t.font),r=Oi(t.padding);if(!t.display)return;const o=Rl(e.rtl,this.left,this.width),c=this.ctx,u=t.position,d=i.size/2,f=r.top+d;let y,_=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),y=this.top+f,_=Nn(e.align,_,this.right-x);else{const A=this.columnSizes.reduce((k,R)=>Math.max(k,R.height),0);y=f+Nn(e.align,this.top,this.bottom-A-e.labels.padding-this._computeTitleHeight())}const w=Nn(u,_,_+x);c.textAlign=o.textAlign(C0(u)),c.textBaseline="middle",c.strokeStyle=t.color,c.fillStyle=t.color,c.font=i.string,Iu(c,t.text,w,y,i)}_computeTitleHeight(){const e=this.options.title,t=Dn(e.font),i=Oi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,o;if(na(e,this.left,this.right)&&na(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],na(e,r.left,r.left+r.width)&&na(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!cL(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=rL(r,i);r&&!o&&Ct(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&Ct(t.onHover,[e,i,this],this)}else i&&Ct(t.onClick,[e,i,this],this)}}function aL(n,e,t,i,r){const o=oL(i,n,e,t),c=lL(r,i,e.lineHeight);return{itemWidth:o,itemHeight:c}}function oL(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),e+t.size/2+i.measureText(r).width}function lL(n,e,t){let i=n;return typeof e.text!="string"&&(i=UA(e,t)),i}function UA(n,e){const t=n.text?n.text.length:0;return e*t}function cL(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var uL={id:"legend",_element:K1,start(n,e,t){const i=n.legend=new K1({ctx:n.ctx,options:t,chart:n});Mi.configure(n,i,t),Mi.addBox(n,i)},stop(n){Mi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Mi.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(t?0:void 0),y=Oi(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:c&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class FA extends yr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=sn(i.text)?i.text.length:1;this._padding=Oi(i.padding);const o=r*Dn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:o,options:c}=this,u=c.align;let d=0,f,y,_;return this.isHorizontal()?(y=Nn(u,i,o),_=t+e,f=o-i):(c.position==="left"?(y=i+e,_=Nn(u,r,t),d=bt*-.5):(y=o-e,_=Nn(u,t,r),d=bt*.5),f=r-t),{titleX:y,titleY:_,maxWidth:f,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Dn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(o);Iu(e,t.text,0,0,i,{color:t.color,maxWidth:d,rotation:f,textAlign:C0(t.align),textBaseline:"middle",translation:[c,u]})}}function hL(n,e){const t=new FA({ctx:n.ctx,options:e,chart:n});Mi.configure(n,t,e),Mi.addBox(n,t),n.titleBlock=t}var dL={id:"title",_element:FA,start(n,e,t){hL(n,t)},stop(n){const e=n.titleBlock;Mi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Mi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const iu={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,o=0;for(e=0,t=n.length;e<t;++e){const u=n[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),r+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:r/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),y=dy(e,f);y<r&&(r=y,u=d)}}if(u){const d=u.tooltipPosition();t=d.x,i=d.y}return{x:t,y:i}}};function ms(n,e){return e&&(sn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ir(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function fL(n,e){const{element:t,datasetIndex:i,index:r}=e,o=n.getDatasetMeta(i).controller,{label:c,value:u}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function X1(n,e){const t=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:u}=e,d=Dn(e.bodyFont),f=Dn(e.titleFont),y=Dn(e.footerFont),_=o.length,x=r.length,w=i.length,A=Oi(e.padding);let k=A.height,R=0,j=i.reduce((Z,$)=>Z+$.before.length+$.lines.length+$.after.length,0);if(j+=n.beforeBody.length+n.afterBody.length,_&&(k+=_*f.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),j){const Z=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;k+=w*Z+(j-w)*d.lineHeight+(j-1)*e.bodySpacing}x&&(k+=e.footerMarginTop+x*y.lineHeight+(x-1)*e.footerSpacing);let B=0;const W=function(Z){R=Math.max(R,t.measureText(Z).width+B)};return t.save(),t.font=f.string,yt(n.title,W),t.font=d.string,yt(n.beforeBody.concat(n.afterBody),W),B=e.displayColors?c+2+e.boxPadding:0,yt(i,Z=>{yt(Z.before,W),yt(Z.lines,W),yt(Z.after,W)}),B=0,t.font=y.string,yt(n.footer,W),t.restore(),R+=A.width,{width:R,height:k}}function mL(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function gL(n,e,t,i){const{x:r,width:o}=i,c=t.caretSize+t.caretPadding;if(n==="left"&&r+o+c>e.width||n==="right"&&r-o-c<0)return!0}function pL(n,e,t,i){const{x:r,width:o}=t,{width:c,chartArea:{left:u,right:d}}=n;let f="center";return i==="center"?f=r<=(u+d)/2?"left":"right":r<=o/2?f="left":r>=c-o/2&&(f="right"),gL(f,n,e,t)&&(f="center"),f}function Q1(n,e,t){const i=t.yAlign||e.yAlign||mL(n,t);return{xAlign:t.xAlign||e.xAlign||pL(n,e,t,i),yAlign:i}}function yL(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function bL(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function Z1(n,e,t,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:u,yAlign:d}=t,f=r+o,{topLeft:y,topRight:_,bottomLeft:x,bottomRight:w}=Al(c);let A=yL(e,u);const k=bL(e,d,f);return d==="center"?u==="left"?A+=f:u==="right"&&(A-=f):u==="left"?A-=Math.max(y,x)+r:u==="right"&&(A+=Math.max(_,w)+r),{x:In(A,0,i.width-e.width),y:In(k,0,i.height-e.height)}}function Od(n,e,t){const i=Oi(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function J1(n){return ms([],ir(n))}function _L(n,e,t){return To(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function eE(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const zA={beforeTitle:tr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:tr,beforeBody:tr,beforeLabel:tr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return dt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:tr,afterBody:tr,beforeFooter:tr,footer:tr,afterFooter:tr};function Yn(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?zA[e].call(t,i):r}class tE extends yr{static positioners=iu;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,o=new SA(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=_L(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Yn(i,"beforeTitle",this,e),o=Yn(i,"title",this,e),c=Yn(i,"afterTitle",this,e);let u=[];return u=ms(u,ir(r)),u=ms(u,ir(o)),u=ms(u,ir(c)),u}getBeforeBody(e,t){return J1(Yn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return yt(e,o=>{const c={before:[],lines:[],after:[]},u=eE(i,o);ms(c.before,ir(Yn(u,"beforeLabel",this,o))),ms(c.lines,Yn(u,"label",this,o)),ms(c.after,ir(Yn(u,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(e,t){return J1(Yn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Yn(i,"beforeFooter",this,e),o=Yn(i,"footer",this,e),c=Yn(i,"afterFooter",this,e);let u=[];return u=ms(u,ir(r)),u=ms(u,ir(o)),u=ms(u,ir(c)),u}_createItems(e){const t=this._active,i=this.chart.data,r=[],o=[],c=[];let u=[],d,f;for(d=0,f=t.length;d<f;++d)u.push(fL(this.chart,t[d]));return e.filter&&(u=u.filter((y,_,x)=>e.filter(y,_,x,i))),e.itemSort&&(u=u.sort((y,_)=>e.itemSort(y,_,i))),yt(u,y=>{const _=eE(e.callbacks,y);r.push(Yn(_,"labelColor",this,y)),o.push(Yn(_,"labelPointStyle",this,y)),c.push(Yn(_,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=iu[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=X1(this,i),f=Object.assign({},u,d),y=Q1(this.chart,i,f),_=Z1(i,f,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:_.x,y:_.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const o=this.getCaretPosition(e,i,r);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:y,bottomRight:_}=Al(u),{x,y:w}=e,{width:A,height:k}=t;let R,j,B,W,Z,$;return o==="center"?(Z=w+k/2,r==="left"?(R=x,j=R-c,W=Z+c,$=Z-c):(R=x+A,j=R+c,W=Z-c,$=Z+c),B=R):(r==="left"?j=x+Math.max(d,y)+c:r==="right"?j=x+A-Math.max(f,_)-c:j=this.caretX,o==="top"?(W=w,Z=W-c,R=j-c,B=j+c):(W=w+k,Z=W+c,R=j+c,B=j-c),$=W),{x1:R,x2:j,x3:B,y1:W,y2:Z,y3:$}}drawTitle(e,t,i){const r=this.title,o=r.length;let c,u,d;if(o){const f=Rl(i.rtl,this.x,this.width);for(e.x=Od(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",c=Dn(i.titleFont),u=i.titleSpacing,t.fillStyle=i.titleColor,t.font=c.string,d=0;d<o;++d)t.fillText(r[d],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,d+1===o&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,t,i,r,o){const c=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=o,y=Dn(o.bodyFont),_=Od(this,"left",o),x=r.x(_),w=d<y.lineHeight?(y.lineHeight-d)/2:0,A=t.y+w;if(o.usePointStyle){const k={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=r.leftForLtr(x,f)+f/2,j=A+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,my(e,k,R,j),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,my(e,k,R,j)}else{e.lineWidth=at(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const k=r.leftForLtr(x,f),R=r.leftForLtr(r.xPlus(x,1),f-2),j=Al(c.borderRadius);Object.values(j).some(B=>B!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Af(e,{x:k,y:A,w:f,h:d,radius:j}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),Af(e,{x:R,y:A+1,w:f-2,h:d-2,radius:j}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(k,A,f,d),e.strokeRect(k,A,f,d),e.fillStyle=c.backgroundColor,e.fillRect(R,A+1,f-2,d-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:y}=i,_=Dn(i.bodyFont);let x=_.lineHeight,w=0;const A=Rl(i.rtl,this.x,this.width),k=function(I){t.fillText(I,A.x(e.x+w),e.y+x/2),e.y+=x+o},R=A.textAlign(c);let j,B,W,Z,$,le,P;for(t.textAlign=c,t.textBaseline="middle",t.font=_.string,e.x=Od(this,R,i),t.fillStyle=i.bodyColor,yt(this.beforeBody,k),w=u&&R!=="right"?c==="center"?f/2+y:f+2+y:0,Z=0,le=r.length;Z<le;++Z){for(j=r[Z],B=this.labelTextColors[Z],t.fillStyle=B,yt(j.before,k),W=j.lines,u&&W.length&&(this._drawColorBox(t,e,Z,A,i),x=Math.max(_.lineHeight,d)),$=0,P=W.length;$<P;++$)k(W[$]),x=_.lineHeight;yt(j.after,k)}w=0,x=_.lineHeight,yt(this.afterBody,k),e.y-=o}drawFooter(e,t,i){const r=this.footer,o=r.length;let c,u;if(o){const d=Rl(i.rtl,this.x,this.width);for(e.x=Od(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=d.textAlign(i.footerAlign),t.textBaseline="middle",c=Dn(i.footerFont),t.fillStyle=i.footerColor,t.font=c.string,u=0;u<o;++u)t.fillText(r[u],d.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:o,yAlign:c}=this,{x:u,y:d}=e,{width:f,height:y}=i,{topLeft:_,topRight:x,bottomLeft:w,bottomRight:A}=Al(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(u+_,d),c==="top"&&this.drawCaret(e,t,i,r),t.lineTo(u+f-x,d),t.quadraticCurveTo(u+f,d,u+f,d+x),c==="center"&&o==="right"&&this.drawCaret(e,t,i,r),t.lineTo(u+f,d+y-A),t.quadraticCurveTo(u+f,d+y,u+f-A,d+y),c==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(u+w,d+y),t.quadraticCurveTo(u,d+y,u,d+y-w),c==="center"&&o==="left"&&this.drawCaret(e,t,i,r),t.lineTo(u,d+_),t.quadraticCurveTo(u,d,u+_,d),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=iu[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=X1(this,e),d=Object.assign({},c,this._size),f=Q1(t,e,d),y=Z1(e,d,f,t);(r._to!==y.x||o._to!==y.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Oi(t.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,r,t),xA(e,t.textDirection),o.y+=c.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),wA(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!Ef(i,r),c=this._positionChanged(r,t);(o||c)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(e,o,t,i),u=this._positionChanged(c,e),d=t||!Ef(c,o)||u;return d&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,i,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(e,t){const{caretX:i,caretY:r,options:o}=this,c=iu[o.position].call(this,e,t);return c!==!1&&(i!==c.x||r!==c.y)}}var vL={id:"tooltip",_element:tE,positioners:iu,afterInit(n,e,t){t&&(n.tooltip=new tE({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xL=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function wL(n,e,t,i){const r=n.indexOf(e);if(r===-1)return xL(n,e,t,i);const o=n.lastIndexOf(e);return r!==o?t:r}const EL=(n,e)=>n===null?null:In(Math.round(n),0,e);function nE(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class SL extends $l{static id="category";static defaults={ticks:{callback:nE}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:o}of t)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(dt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:wL(i,e,$e(t,e),this._addedLabels),EL(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=e;c<=t;c++)r.push({value:c});return r}getLabelForValue(e){return nE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function TL(n,e){const t=[],{bounds:r,step:o,min:c,max:u,precision:d,count:f,maxTicks:y,maxDigits:_,includeBounds:x}=n,w=o||1,A=y-1,{min:k,max:R}=e,j=!dt(c),B=!dt(u),W=!dt(f),Z=(R-k)/(_+1);let $=i1((R-k)/A/w)*w,le,P,I,T;if($<1e-14&&!j&&!B)return[{value:k},{value:R}];T=Math.ceil(R/$)-Math.floor(k/$),T>A&&($=i1(T*$/A/w)*w),dt(d)||(le=Math.pow(10,d),$=Math.ceil($*le)/le),r==="ticks"?(P=Math.floor(k/$)*$,I=Math.ceil(R/$)*$):(P=k,I=R),j&&B&&o&&Lj((u-c)/o,$/1e3)?(T=Math.round(Math.min((u-c)/$,y)),$=(u-c)/T,P=c,I=u):W?(P=j?c:P,I=B?u:I,T=f-1,$=(I-P)/T):(T=(I-P)/$,hu(T,Math.round(T),$/1e3)?T=Math.round(T):T=Math.ceil(T));const O=Math.max(s1($),s1(P));le=Math.pow(10,dt(d)?O:d),P=Math.round(P*le)/le,I=Math.round(I*le)/le;let C=0;for(j&&(x&&P!==c?(t.push({value:c}),P<c&&C++,hu(Math.round((P+C*$)*le)/le,c,iE(c,Z,n))&&C++):P<c&&C++);C<T;++C){const z=Math.round((P+C*$)*le)/le;if(B&&z>u)break;t.push({value:z})}return B&&x&&I!==u?t.length&&hu(t[t.length-1].value,u,iE(u,Z,n))?t[t.length-1].value=u:t.push({value:u}):(!B||I===u)&&t.push({value:I}),t}function iE(n,e,{horizontal:t,minRotation:i}){const r=or(i),o=(t?Math.sin(r):Math.cos(r))||.001,c=.75*e*(""+n).length;return Math.min(e/o,c)}class AL extends $l{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=d=>r=t?r:d,u=d=>o=i?o:d;if(e){const d=Ss(r),f=Ss(o);d<0&&f<0?u(0):d>0&&f>0&&c(0)}if(r===o){let d=o===0?1:Math.abs(o*.05);u(o+d),e||c(r-d)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,c=TL(r,o);return e.bounds==="ticks"&&Vj(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return D0(e,this.chart.options.locale,this.options.ticks.format)}}class RL extends AL{static id="linear";static defaults={ticks:{callback:fA.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Pi(e)?e:0,this.max=Pi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=or(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const am={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qn=Object.keys(am);function sE(n,e){return n-e}function rE(n,e){if(dt(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=e;return typeof i=="function"&&(c=i(c)),Pi(c)||(c=typeof i=="string"?t.parse(c,i):t.parse(c)),c===null?null:(r&&(c=r==="week"&&(Nu(o)||o===!0)?t.startOf(c,"isoWeek",o):t.startOf(c,r)),+c)}function aE(n,e,t,i){const r=Qn.length;for(let o=Qn.indexOf(n);o<r-1;++o){const c=am[Qn[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((t-e)/(u*c.size))<=i)return Qn[o]}return Qn[r-1]}function NL(n,e,t,i,r){for(let o=Qn.length-1;o>=Qn.indexOf(t);o--){const c=Qn[o];if(am[c].common&&n._adapter.diff(r,i,c)>=e-1)return c}return Qn[t?Qn.indexOf(t):0]}function kL(n){for(let e=Qn.indexOf(n)+1,t=Qn.length;e<t;++e)if(am[Qn[e]].common)return Qn[e]}function oE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=k0(t,e),o=t[i]>=e?t[i]:t[r];n[o]=!0}}function CL(n,e,t,i){const r=n._adapter,o=+r.startOf(e[0].value,i),c=e[e.length-1].value;let u,d;for(u=o;u<=c;u=+r.add(u,1,i))d=t[u],d>=0&&(e[d].major=!0);return e}function lE(n,e,t){const i=[],r={},o=e.length;let c,u;for(c=0;c<o;++c)u=e[c],r[u]=c,i.push({value:u,major:!1});return o===0||!t?i:CL(n,i,r,t)}class cE extends $l{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new A6._date(e.adapters.date);r.init(t),uu(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:rE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function d(f){!c&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!c||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=Pi(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),o=Pi(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,u=Hj(r,o,c);return this._unit=t.unit||(i.autoSkip?aE(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):NL(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:kL(this._unit),this.initOffsets(r),e.reverse&&u.reverse(),lE(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;t=In(t,0,c),i=In(i,0,c),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||aE(o.minUnit,t,i,this._getLabelCapacity(t)),u=$e(r.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,f=Nu(d)||d===!0,y={};let _=t,x,w;if(f&&(_=+e.startOf(_,"isoWeek",d)),_=+e.startOf(_,f?"day":c),e.diff(i,t,c)>1e5*u)throw new Error(t+" and "+i+" are too far apart with stepSize of "+u+" "+c);const A=r.ticks.source==="data"&&this.getDataTimestamps();for(x=_,w=0;x<i;x=+e.add(x,u,c),w++)oE(y,x,A);return(x===i||r.bounds==="ticks"||w===1)&&oE(y,x,A),Object.keys(y).sort(sE).map(k=>+k)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,o=this._unit,c=t||r[o];return this._adapter.format(e,c)}_tickFormatFunction(e,t,i,r){const o=this.options,c=o.ticks.callback;if(c)return Ct(c,[e,t,i],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,y=d&&u[d],_=f&&u[f],x=i[t],w=f&&_&&x&&x.major;return this._adapter.format(e,r||(w?_:y))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=or(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(r),c=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*c,h:i*c+u*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,lE(this,[e],this._majorUnit),r),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(rE(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uA(e.sort(sE))}}function jd(n,e,t){let i=0,r=n.length-1,o,c,u,d;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=lo(n,"pos",e)),{pos:o,time:u}=n[i],{pos:c,time:d}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=lo(n,"time",e)),{time:o,pos:u}=n[i],{time:c,pos:d}=n[r]);const f=c-o;return f?u+(d-u)*(e-o)/f:u}class qL extends cE{static id="timeseries";static defaults=cE.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=jd(t,this.min),this._tableRange=jd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],o=[];let c,u,d,f,y;for(c=0,u=e.length;c<u;++c)f=e[c],f>=t&&f<=i&&r.push(f);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(c=0,u=r.length;c<u;++c)y=r[c+1],d=r[c-1],f=r[c],Math.round((y+d)/2)!==f&&o.push({time:f,pos:c/(u-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(jd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return jd(this._table,i*this._tableRange+this._minPos,!0)}}const BA="label";function uE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function IL(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function HA(n,e){n.labels=e}function qA(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BA;const i=[];n.datasets=e.map(r=>{const o=n.datasets.find(c=>c[t]===r[t]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function DL(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BA;const t={labels:[],datasets:[]};return HA(t,n.labels),qA(t,n.datasets,e),t}function ML(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:u,options:d,plugins:f=[],fallbackContent:y,updateMode:_,...x}=n,w=H.useRef(null),A=H.useRef(null),k=()=>{w.current&&(A.current=new rm(w.current,{type:c,data:DL(u,o),options:d&&{...d},plugins:f}),uE(e,A.current))},R=()=>{uE(e,null),A.current&&(A.current.destroy(),A.current=null)};return H.useEffect(()=>{!r&&A.current&&d&&IL(A.current,d)},[r,d]),H.useEffect(()=>{!r&&A.current&&HA(A.current.config.data,u.labels)},[r,u.labels]),H.useEffect(()=>{!r&&A.current&&u.datasets&&qA(A.current.config.data,u.datasets,o)},[r,u.datasets]),H.useEffect(()=>{A.current&&(r?(R(),setTimeout(k)):A.current.update(_))},[r,d,u.labels,u.datasets,_]),H.useEffect(()=>{A.current&&(R(),setTimeout(k))},[c]),H.useEffect(()=>(k(),()=>R()),[]),vy.createElement("canvas",{ref:w,role:"img",height:t,width:i,...x},y)}const PL=H.forwardRef(ML);function B0(n,e){return rm.register(e),H.forwardRef((t,i)=>vy.createElement(PL,{...t,ref:i,type:n}))}const OL=B0("line",T6),Op=B0("bar",w6),jL=B0("doughnut",S6);rm.register(SL,RL,sL,dL,vL,uL,z5,Q5,Z5);const LL=()=>{const[n,e]=H.useState(!0),[t,i]=H.useState([]),[r,o]=H.useState({}),[c,u]=H.useState([]),[d,f]=H.useState({}),[y,_]=H.useState("");H.useEffect(()=>{x()},[]);const x=async()=>{try{e(!0);const F=await em();i(F);const ee=await Su();f(ee);const ue=await tA();u(ue);const xe=[...new Set(F.map(ae=>ae.artist))],V={};for(const ae of xe){const te=await Q4(ae);V[ae]=te.map(Y=>({...Y,pokemon:F.find(ge=>ge.id===Y.pokemonId)}))}o(V)}catch(F){console.error("Error loading Pokemon data:",F)}finally{e(!1)}},w=t.length,k=Math.round(w/151*100),R={};t.forEach(F=>{F.types.forEach(ee=>{R[ee]=(R[ee]||0)+1})});const j={};t.forEach(F=>{j[F.artist]=(j[F.artist]||0)+1});const B=t.filter(F=>F.unique&&["U0","U1","U2"].includes(F.unique)).length,W={"No Evolution (U0)":t.filter(F=>F.unique==="U0").length,"One Evolution (U1)":t.filter(F=>F.unique==="U1").length,"Two Evolutions (U2)":t.filter(F=>F.unique==="U2").length},Z=["Fire","Water","Electric","Grass","Psychic","Dragon","Dark","Ghost","Steel","Normal","Ice","Fighting","Poison","Ground","Flying","Bug","Rock","Fairy"],$=Object.keys(j).map(F=>{const ee=t.filter(V=>V.artist===F),ue=ee.filter(V=>V.unique&&["U0","U1","U2"].includes(V.unique)),xe={};return Z.forEach(V=>{xe[V]=0}),ue.forEach(V=>{V.types.forEach(ae=>{xe[ae]=(xe[ae]||0)+1})}),{artist:F,totalPokemon:ee.length,uniquePokemon:ue.length,uniqueTypeDistribution:xe}}).sort((F,ee)=>ee.totalPokemon-F.totalPokemon);H.useEffect(()=>{$.length>0&&!y&&_($[0].artist)},[$,y]);const le=F=>{const ee=d[F];return ee?ee.averageRating:null},P=F=>{const ee=le(F);return ee===null||ee===0?"No ratings":`${ee.toFixed(1)}★`},I=F=>{const ee=c.find(ue=>ue.pokemonId===F);return ee?ee.rank:null},T=F=>{const ee=Object.entries(F),ue=ee.sort((Y,ge)=>Y[1]-ge[1]),V=ue.slice(0,Math.min(3,ue.length)).filter(([Y,ge])=>ge<=Math.min(2,Math.max(...ee.map(([ye,_e])=>_e)))),te=ue.slice(-3).reverse().filter(([Y,ge])=>ge>0&&ge>=Math.max(1,Math.max(...ee.map(([ye,_e])=>_e))-1));return{doMore:V.slice(0,3),doLess:te.slice(0,3)}},O=(F,ee=.8)=>({Fire:`rgba(240, 128, 48, ${ee})`,Water:`rgba(104, 144, 240, ${ee})`,Electric:`rgba(248, 208, 48, ${ee})`,Grass:`rgba(120, 200, 80, ${ee})`,Psychic:`rgba(248, 88, 136, ${ee})`,Dragon:`rgba(112, 56, 248, ${ee})`,Dark:`rgba(112, 88, 72, ${ee})`,Ghost:`rgba(112, 88, 152, ${ee})`,Steel:`rgba(184, 184, 208, ${ee})`,Normal:`rgba(184, 184, 168, ${ee})`,Ice:`rgba(152, 216, 216, ${ee})`,Fighting:`rgba(192, 48, 40, ${ee})`,Poison:`rgba(160, 64, 160, ${ee})`,Ground:`rgba(224, 192, 104, ${ee})`,Flying:`rgba(168, 144, 240, ${ee})`,Bug:`rgba(168, 184, 32, ${ee})`,Rock:`rgba(184, 160, 56, ${ee})`,Fairy:`rgba(238, 153, 172, ${ee})`})[F]||`rgba(184, 184, 168, ${ee})`,C={labels:Object.keys(R),datasets:[{label:"Pokemon Count",data:Object.values(R),backgroundColor:Object.keys(R).map(F=>O(F)),borderWidth:2,borderColor:"#ffffff"}]},z={labels:Object.keys(j),datasets:[{label:"Pokemon Created",data:Object.values(j),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2}]},L={labels:Object.keys(W),datasets:[{label:"Pokemon Count",data:Object.values(W),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)","rgba(34, 197, 94, 1)"],borderWidth:2}]},be={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"white"}}},scales:{y:{beginAtZero:!0,ticks:{color:"white",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}},x:{ticks:{color:"white",maxRotation:45,minRotation:0,font:{size:11}},grid:{color:"rgba(255, 255, 255, 0.2)"}}},layout:{padding:{top:10,bottom:10,left:10,right:10}}},Ae={responsive:!0,maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{display:!1}},layout:{padding:10}};return n?p.jsx("div",{className:"flex justify-center items-center min-h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white"})}):p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Statistics"}),p.jsx("p",{className:"text-white/80",children:"Complete overview of our Pokemon artwork collection"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:p.jsx(rk,{className:"text-blue-400",size:24})})}),p.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:w}),p.jsx("div",{className:"text-white/70 text-sm",children:"Completed Artwork"}),p.jsxs("div",{className:"text-white/50 text-xs",children:[k,"% of 151 slots"]})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:p.jsx(gk,{className:"text-green-400",size:24})})}),p.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:Object.keys(j).length}),p.jsx("div",{className:"text-white/70 text-sm",children:"Active Artists"})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:p.jsx(IE,{className:"text-purple-400",size:24})})}),p.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:B}),p.jsx("div",{className:"text-white/70 text-sm",children:"Unique Pokemon"}),p.jsx("div",{className:"text-white/50 text-xs",children:"Baseless Creations (U0/U1/U2)"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 mb-8",children:[p.jsxs("div",{className:"lg:col-span-2 bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Pokemon Types Distribution"}),p.jsxs("div",{className:"flex items-center gap-6 h-80",children:[p.jsx("div",{className:"flex-shrink-0 w-32 flex flex-col justify-center",children:p.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:Object.entries(R).map(([F,ee])=>p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx("span",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:O(F,1)}}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("div",{className:"text-white text-xs truncate leading-tight",children:F}),p.jsx("div",{className:"text-white/60 text-xs leading-tight",children:ee})]})]},F))})}),p.jsx("div",{className:"flex-1 h-full flex items-center justify-center overflow-hidden",children:p.jsx("div",{className:"w-72 h-72 max-w-full max-h-full",children:p.jsx(jL,{data:C,options:Ae})})})]})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"Artist Contributions"}),p.jsx("div",{className:"h-80",children:p.jsx(Op,{data:z,options:be})})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"Evolution Distribution"}),p.jsx("div",{className:"h-80",children:p.jsx(Op,{data:L,options:be})})]})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 mb-8",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Individual Artist Statistics"}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-white/20 pb-4",children:$.map(F=>p.jsxs("button",{onClick:()=>_(F.artist),className:`px-4 py-2 rounded-lg transition-all duration-200 font-medium ${y===F.artist?"bg-yellow-400 text-black":"bg-white/10 text-white hover:bg-white/20"}`,children:[F.artist,p.jsxs("span",{className:"ml-2 text-xs opacity-70",children:["(",F.totalPokemon,")"]})]},F.artist))}),y&&$.find(F=>F.artist===y)&&p.jsx("div",{className:"bg-white/5 rounded-lg p-6",children:(()=>{const F=$.find(ue=>ue.artist===y),ee=T(F.uniqueTypeDistribution);return p.jsxs(p.Fragment,{children:[p.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:F.artist}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-white/60 text-sm",children:"Total Pokemon"}),p.jsx("div",{className:"text-yellow-300 font-bold text-2xl",children:F.totalPokemon})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-white/60 text-sm",children:"Unique Pokemon"}),p.jsx("div",{className:"text-purple-300 font-bold text-2xl",children:F.uniquePokemon})]})]}),F.uniquePokemon>0&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[p.jsxs("div",{className:"lg:col-span-3",children:[p.jsx("h5",{className:"text-white font-semibold mb-3",children:"Unique Pokemon Type Distribution"}),p.jsx("div",{className:"h-64",children:p.jsx(Op,{data:{labels:Z,datasets:[{label:"Unique Pokemon Count",data:Z.map(ue=>F.uniqueTypeDistribution[ue]||0),backgroundColor:Z.map(ue=>O(ue)),borderColor:Z.map(ue=>O(ue,1)),borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:"white",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}},x:{ticks:{color:"white",maxRotation:45,minRotation:45,font:{size:10}},grid:{color:"rgba(255, 255, 255, 0.2)"}}}}})})]}),p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("h5",{className:"text-white font-semibold mb-3",children:"Suggestions"}),p.jsxs("div",{className:"space-y-4",children:[ee.doMore.length>0&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500/40 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[p.jsx(gx,{className:"text-green-400",size:16}),p.jsx("span",{className:"text-green-300 text-sm font-semibold",children:"Try More"})]}),p.jsx("div",{className:"space-y-1",children:ee.doMore.map(([ue,xe])=>p.jsxs("div",{className:"text-white text-sm",children:[p.jsx("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:O(ue,1)}}),ue,p.jsxs("span",{className:"text-white/60 text-xs ml-2",children:["(",xe,")"]})]},ue))})]}),ee.doLess.length>0&&ee.doLess.some(([ue,xe])=>xe>0)&&p.jsxs("div",{className:"bg-red-500/20 border border-red-500/40 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[p.jsx(uk,{className:"text-red-400",size:16}),p.jsx("span",{className:"text-red-300 text-sm font-semibold",children:"Maybe Less"})]}),p.jsx("div",{className:"space-y-1",children:ee.doLess.filter(([ue,xe])=>xe>0).map(([ue,xe])=>p.jsxs("div",{className:"text-white text-sm",children:[p.jsx("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:O(ue,1)}}),ue,p.jsxs("span",{className:"text-white/60 text-xs ml-2",children:["(",xe,")"]})]},ue))})]}),ee.doMore.length===0&&ee.doLess.length===0&&p.jsx("div",{className:"bg-blue-500/20 border border-blue-500/40 rounded-lg p-3 text-center",children:p.jsx("span",{className:"text-blue-300 text-sm",children:"Perfect balance! 🎯"})})]})]})]}),r[F.artist]&&r[F.artist].length>0&&p.jsxs("div",{className:"mt-6",children:[p.jsxs("h5",{className:"text-white font-semibold mb-3 flex items-center",children:[p.jsx(fk,{className:"mr-2 text-yellow-400",size:16}),"Pokemon Rankings (",r[F.artist].length,")"]}),r[F.artist].length>=3&&p.jsxs("div",{className:"mb-6 bg-gradient-to-b from-yellow-500/10 to-transparent rounded-lg p-8",children:[p.jsxs("div",{className:"flex items-end justify-center space-x-8 relative max-w-2xl mx-auto",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("div",{className:"relative mb-3",children:[p.jsx("img",{src:r[F.artist][1].pokemon.imageUrl,alt:r[F.artist][1].pokemon.name,className:"w-24 h-24 object-contain filter drop-shadow-lg"}),p.jsx("div",{className:"absolute -top-3 -right-3 bg-gray-300 text-black rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"2"})]}),p.jsx("div",{className:"bg-gray-300/20 rounded-t-lg w-28 h-14 flex items-center justify-center",children:p.jsx("span",{className:"text-gray-300 font-bold",children:"2nd"})})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("div",{className:"relative mb-3",children:[p.jsx("img",{src:r[F.artist][0].pokemon.imageUrl,alt:r[F.artist][0].pokemon.name,className:"w-32 h-32 object-contain filter drop-shadow-xl transform scale-110"}),p.jsx("div",{className:"absolute -top-4 -right-4 bg-yellow-500 text-black rounded-full w-10 h-10 flex items-center justify-center text-lg font-bold",children:"1"})]}),p.jsx("div",{className:"bg-yellow-500/30 rounded-t-lg w-32 h-20 flex items-center justify-center",children:p.jsx("span",{className:"text-yellow-300 font-bold text-lg",children:"1st"})})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("div",{className:"relative mb-3",children:[p.jsx("img",{src:r[F.artist][2].pokemon.imageUrl,alt:r[F.artist][2].pokemon.name,className:"w-24 h-24 object-contain filter drop-shadow-lg"}),p.jsx("div",{className:"absolute -top-3 -right-3 bg-amber-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"3"})]}),p.jsx("div",{className:"bg-amber-600/20 rounded-t-lg w-28 h-12 flex items-center justify-center",children:p.jsx("span",{className:"text-amber-400 font-bold",children:"3rd"})})]})]}),p.jsxs("div",{className:"flex justify-center space-x-8 mt-4 max-w-2xl mx-auto",children:[p.jsxs("div",{className:"text-center w-28",children:[p.jsx("div",{className:"text-gray-300 font-medium truncate",children:r[F.artist][1].pokemon.name}),p.jsx("div",{className:"text-yellow-400 text-xs mt-1",children:P(r[F.artist][1].pokemonId)})]}),p.jsxs("div",{className:"text-center w-32",children:[p.jsx("div",{className:"text-yellow-300 font-bold text-lg truncate",children:r[F.artist][0].pokemon.name}),p.jsx("div",{className:"text-yellow-400 text-sm mt-1",children:P(r[F.artist][0].pokemonId)})]}),p.jsxs("div",{className:"text-center w-28",children:[p.jsx("div",{className:"text-amber-400 font-medium truncate",children:r[F.artist][2].pokemon.name}),p.jsx("div",{className:"text-yellow-400 text-xs mt-1",children:P(r[F.artist][2].pokemonId)})]})]})]}),p.jsx("div",{className:"bg-white/5 rounded-lg p-4 max-h-64 overflow-y-auto",children:p.jsx("div",{className:"space-y-2",children:r[F.artist].slice(3).map((ue,xe)=>p.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded p-3 hover:bg-white/10 transition-colors",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`
                                  flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm
                                  bg-white/20 text-white
                                `,children:xe+4}),p.jsx("img",{src:ue.pokemon.imageUrl,alt:ue.pokemon.name,className:"w-8 h-8 object-contain"}),p.jsxs("div",{children:[p.jsx("div",{className:"text-white font-medium",children:ue.pokemon.name}),p.jsx("div",{className:"flex items-center space-x-2",children:ue.pokemon.types.map(V=>p.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium text-white",style:{backgroundColor:O(V,.8)},children:V},V))})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"text-white/60 text-sm",children:["Rank #",ue.rank]}),p.jsx("div",{className:"text-yellow-400 text-xs mt-1",children:P(ue.pokemonId)})]})]},ue.pokemonId))})})]}),r[F.artist]&&r[F.artist].length>1&&p.jsxs("div",{className:"mt-6",children:[p.jsxs("h5",{className:"text-white font-semibold mb-3 flex items-center",children:[p.jsx(gx,{className:"mr-2 text-blue-400",size:16}),"Performance Over Time (",r[F.artist].length," Pokemon)"]}),p.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:p.jsx("div",{className:"h-80",children:(()=>{const ue=[...r[F.artist]].sort((V,ae)=>V.pokemon.pokedexNumber-ae.pokemon.pokedexNumber),xe=new Map;return r[F.artist].forEach((V,ae)=>{xe.set(V.pokemonId,ae+1)}),p.jsx(OL,{data:{labels:ue.map(V=>V.pokemon.name),datasets:[{label:"Artist Rank",data:ue.map(V=>xe.get(V.pokemonId)),borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:V=>{const ae=V[0].dataIndex,te=ue[ae].pokemon;return`${te.name} (#${te.pokedexNumber.toString().padStart(3,"0")})`},label:V=>{const ae=V.parsed.y,te=ue[V.dataIndex],Y=P(te.pokemonId),ge=I(te.pokemonId);return[`Artist Rank: #${ae}`,`Global Rank: #${ge||"N/A"}`,`Average Rating: ${Y}`]},afterLabel:V=>`Pokedex #${ue[V.dataIndex].pokemon.pokedexNumber.toString().padStart(3,"0")}`}}},scales:{y:{reverse:!0,beginAtZero:!1,title:{display:!0,text:"Pokemon Rank",color:"white",font:{size:12}},ticks:{color:"white",stepSize:1,callback:function(V){return"#"+V}},grid:{color:"rgba(255, 255, 255, 0.2)"}},x:{title:{display:!0,text:"Pokemon Names (Chronological Order)",color:"white",font:{size:12}},ticks:{color:"white",font:{size:9},maxRotation:45,minRotation:45},grid:{color:"rgba(255, 255, 255, 0.2)"}}}}})})()})})]}),F.uniquePokemon===0&&p.jsx("div",{className:"text-white/50 text-center py-4",children:"No unique Pokemon yet"})]})})()})]})]})},Xc=({segments:n,onSpin:e,size:t=300,disabled:i=!1})=>{const[r,o]=H.useState(!1),[c,u]=H.useState(0),[d,f]=H.useState(null),[y,_]=H.useState(0),x=H.useRef(null),w=()=>{if(r||i||n.length===0)return;if(o(!0),f(null),n.length>20){let C=0;const z=setInterval(()=>{if(_(L=>(L+1)%n.length),C++,C>=20){clearInterval(z);const L=Math.floor(Math.random()*n.length),be=n[L];_(L),f(be),o(!1),e&&e(be)}},100);return}const Z=3,le=Math.random()*(6-Z)+Z,P=c+le*360;u(P),setTimeout(()=>{const I=P%360,T=360/n.length;let O=(360-I)%360;const C=Math.floor(O/T)%n.length,z=n[C];console.log("Debug:",{finalRotation:P,normalizedRotation:I,pointerAngle:O,segmentAngle:T,segmentIndex:C,selectedLabel:z.label}),f(z),o(!1),e&&e(z)},3e3)},A=360/n.length,k=t/2-20,R=t/2,j=t/2,B=Z=>{const $=Z*A*(Math.PI/180),le=(Z+1)*A*(Math.PI/180),P=R+k*Math.cos($),I=j+k*Math.sin($),T=R+k*Math.cos(le),O=j+k*Math.sin(le),C=A>180?1:0;return`M ${R} ${j} L ${P} ${I} A ${k} ${k} 0 ${C} 1 ${T} ${O} Z`},W=Z=>{const $=(Z*A+A/2)*(Math.PI/180),le=k*.7,P=R+le*Math.cos($),I=j+le*Math.sin($);return{x:P,y:I,angle:$*(180/Math.PI)}};return p.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[n.length>20?p.jsx("div",{className:"text-center",children:p.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-8 border border-white/30 min-h-[200px] flex items-center justify-center",children:p.jsxs("div",{className:"text-white",children:[p.jsx("div",{className:"text-sm text-white/70 mb-2",children:r?"Cycling through options...":"Ready to spin!"}),p.jsx("div",{className:"text-3xl font-bold mb-2",children:r||d?r?n[y]?.label:d?.label:"Press SPIN!"}),p.jsxs("div",{className:"text-sm text-white/60",children:[n.length," total options"]})]})})}):p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute top-1/2 -right-4 transform -translate-y-1/2 z-10",children:p.jsx("div",{className:"w-0 h-0 border-t-6 border-b-6 border-r-16 border-t-transparent border-b-transparent border-r-red-500 drop-shadow-lg",style:{borderRightWidth:"48px",borderTopWidth:"10px",borderBottomWidth:"10px"}})}),p.jsxs("svg",{ref:x,width:t,height:t,className:"drop-shadow-lg",style:{transform:`rotate(${c}deg)`,transition:r?"transform 3s cubic-bezier(0.2, 0.8, 0.2, 1)":"none"},children:[n.map((Z,$)=>p.jsxs("g",{children:[p.jsx("path",{d:B($),fill:Z.color,stroke:"#333",strokeWidth:"2",className:"hover:brightness-110 transition-all duration-200"}),p.jsx("text",{x:W($).x,y:W($).y,fill:"white",fontSize:Math.max(12,t/25),fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",transform:`rotate(${W($).angle}, ${W($).x}, ${W($).y})`,className:"pointer-events-none select-none drop-shadow-sm",children:Z.label.length>10?Z.label.substring(0,10)+"...":Z.label})]},Z.id)),p.jsx("circle",{cx:R,cy:j,r:"15",fill:"#333",stroke:"#fff",strokeWidth:"3"})]})]}),p.jsx("button",{onClick:w,disabled:r||i||n.length===0,className:`px-6 py-3 rounded-lg font-bold text-lg transition-all duration-200 ${r||i||n.length===0?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 active:scale-95"}`,children:r?"Spinning...":"SPIN!"}),n.length===0&&p.jsx("div",{className:"text-white/60 text-center",children:p.jsx("p",{children:"No segments available for this wheel"})})]})},by=[{name:"Generation 1",range:"Kanto (1-151)",pokemon:["Bulbasaur","Ivysaur","Venusaur","Charmander","Charmeleon","Charizard","Squirtle","Wartortle","Blastoise","Caterpie","Metapod","Butterfree","Weedle","Kakuna","Beedrill","Pidgey","Pidgeotto","Pidgeot","Rattata","Raticate","Spearow","Fearow","Ekans","Arbok","Pikachu","Raichu","Sandshrew","Sandslash","Nidoran♀","Nidorina","Nidoqueen","Nidoran♂","Nidorino","Nidoking","Clefairy","Clefable","Vulpix","Ninetales","Jigglypuff","Wigglytuff","Zubat","Golbat","Oddish","Gloom","Vileplume","Paras","Parasect","Venonat","Venomoth","Diglett","Dugtrio","Meowth","Persian","Psyduck","Golduck","Mankey","Primeape","Growlithe","Arcanine","Poliwag","Poliwhirl","Poliwrath","Abra","Kadabra","Alakazam","Machop","Machoke","Machamp","Bellsprout","Weepinbell","Victreebel","Tentacool","Tentacruel","Geodude","Graveler","Golem","Ponyta","Rapidash","Slowpoke","Slowbro","Magnemite","Magneton","Farfetchd","Doduo","Dodrio","Seel","Dewgong","Grimer","Muk","Shellder","Cloyster","Gastly","Haunter","Gengar","Onix","Drowzee","Hypno","Krabby","Kingler","Voltorb","Electrode","Exeggcute","Exeggutor","Cubone","Marowak","Hitmonlee","Hitmonchan","Lickitung","Koffing","Weezing","Rhyhorn","Rhydon","Chansey","Tangela","Kangaskhan","Horsea","Seadra","Goldeen","Seaking","Staryu","Starmie","Mr. Mime","Scyther","Jynx","Electabuzz","Magmar","Pinsir","Tauros","Magikarp","Gyarados","Lapras","Ditto","Eevee","Vaporeon","Jolteon","Flareon","Porygon","Omanyte","Omastar","Kabuto","Kabutops","Aerodactyl","Snorlax","Articuno","Zapdos","Moltres","Dratini","Dragonair","Dragonite","Mewtwo","Mew"]},{name:"Generation 2",range:"Johto (152-251)",pokemon:["Chikorita","Bayleef","Meganium","Cyndaquil","Quilava","Typhlosion","Totodile","Croconaw","Feraligatr","Sentret","Furret","Hoothoot","Noctowl","Ledyba","Ledian","Spinarak","Ariados","Crobat","Chinchou","Lanturn","Pichu","Cleffa","Igglybuff","Togepi","Togetic","Natu","Xatu","Mareep","Flaaffy","Ampharos","Bellossom","Marill","Azumarill","Sudowoodo","Politoed","Hoppip","Skiploom","Jumpluff","Aipom","Sunkern","Sunflora","Yanma","Wooper","Quagsire","Espeon","Umbreon","Murkrow","Slowking","Misdreavus","Unown","Wobbuffet","Girafarig","Pineco","Forretress","Dunsparce","Gligar","Steelix","Snubbull","Granbull","Qwilfish","Scizor","Shuckle","Heracross","Sneasel","Teddiursa","Ursaring","Slugma","Magcargo","Swinub","Piloswine","Corsola","Remoraid","Octillery","Delibird","Mantine","Skarmory","Houndour","Houndoom","Kingdra","Phanpy","Donphan","Porygon2","Stantler","Smeargle","Tyrogue","Hitmontop","Smoochum","Elekid","Magby","Miltank","Blissey","Raikou","Entei","Suicune","Larvitar","Pupitar","Tyranitar","Lugia","Ho-Oh","Celebi"]},{name:"Generation 3",range:"Hoenn (252-386)",pokemon:["Treecko","Grovyle","Sceptile","Torchic","Combusken","Blaziken","Mudkip","Marshtomp","Swampert","Poochyena","Mightyena","Zigzagoon","Linoone","Wurmple","Silcoon","Beautifly","Cascoon","Dustox","Lotad","Lombre","Ludicolo","Seedot","Nuzleaf","Shiftry","Taillow","Swellow","Wingull","Pelipper","Ralts","Kirlia","Gardevoir","Surskit","Masquerain","Shroomish","Breloom","Slakoth","Vigoroth","Slaking","Nincada","Ninjask","Shedinja","Whismur","Loudred","Exploud","Makuhita","Hariyama","Azurill","Nosepass","Skitty","Delcatty","Sableye","Mawile","Aron","Lairon","Aggron","Meditite","Medicham","Electrike","Manectric","Plusle","Minun","Volbeat","Illumise","Roselia","Gulpin","Swalot","Carvanha","Sharpedo","Wailmer","Wailord","Numel","Camerupt","Torkoal","Spoink","Grumpig","Spinda","Trapinch","Vibrava","Flygon","Cacnea","Cacturne","Swablu","Altaria","Zangoose","Seviper","Lunatone","Solrock","Barboach","Whiscash","Corphish","Crawdaunt","Baltoy","Claydol","Lileep","Cradily","Anorith","Armaldo","Feebas","Milotic","Castform","Kecleon","Shuppet","Banette","Duskull","Dusclops","Tropius","Chimecho","Absol","Wynaut","Snorunt","Glalie","Spheal","Sealeo","Walrein","Clamperl","Huntail","Gorebyss","Relicanth","Luvdisc","Bagon","Shelgon","Salamence","Beldum","Metang","Metagross","Regirock","Regice","Registeel","Latias","Latios","Kyogre","Groudon","Rayquaza","Jirachi","Deoxys"]},{name:"Generation 4",range:"Sinnoh (387-493)",pokemon:["Turtwig","Grotle","Torterra","Chimchar","Monferno","Infernape","Piplup","Prinplup","Empoleon","Starly","Staravia","Staraptor","Bidoof","Bibarel","Kricketot","Kricketune","Shinx","Luxio","Luxray","Budew","Roserade","Cranidos","Rampardos","Shieldon","Bastiodon","Burmy","Wormadam","Mothim","Combee","Vespiquen","Pachirisu","Buizel","Floatzel","Cherubi","Cherrim","Shellos","Gastrodon","Ambipom","Drifloon","Drifblim","Buneary","Lopunny","Mismagius","Honchkrow","Glameow","Purugly","Chingling","Stunky","Skuntank","Bronzor","Bronzong","Bonsly","Mime Jr.","Happiny","Chatot","Spiritomb","Gible","Gabite","Garchomp","Munchlax","Riolu","Lucario","Hippopotas","Hippowdon","Skorupi","Drapion","Croagunk","Toxicroak","Carnivine","Finneon","Lumineon","Mantyke","Snover","Abomasnow","Weavile","Magnezone","Lickilicky","Rhyperior","Tangrowth","Electivire","Magmortar","Togekiss","Yanmega","Leafeon","Glaceon","Gliscor","Mamoswine","Porygon-Z","Gallade","Probopass","Dusknoir","Froslass","Rotom","Uxie","Mesprit","Azelf","Dialga","Palkia","Heatran","Regigigas","Giratina","Cresselia","Phione","Manaphy","Darkrai","Shaymin","Arceus"]},{name:"Generation 5",range:"Unova (494-649)",pokemon:["Victini","Snivy","Servine","Serperior","Tepig","Pignite","Emboar","Oshawott","Dewott","Samurott","Patrat","Watchog","Lillipup","Herdier","Stoutland","Purrloin","Liepard","Pansage","Simisage","Pansear","Simisear","Panpour","Simipour","Munna","Musharna","Pidove","Tranquill","Unfezant","Blitzle","Zebstrika","Roggenrola","Boldore","Gigalith","Woobat","Swoobat","Drilbur","Excadrill","Audino","Timburr","Gurdurr","Conkeldurr","Tympole","Palpitoad","Seismitoad","Throh","Sawk","Sewaddle","Swadloon","Leavanny","Venipede","Whirlipede","Scolipede","Cottonee","Whimsicott","Petilil","Lilligant","Basculin","Sandile","Krokorok","Krookodile","Darumaka","Darmanitan","Maractus","Dwebble","Crustle","Scraggy","Scrafty","Sigilyph","Yamask","Cofagrigus","Tirtouga","Carracosta","Archen","Archeops","Trubbish","Garbodor","Zorua","Zoroark","Minccino","Cinccino","Gothita","Gothorita","Gothitelle","Solosis","Duosion","Reuniclus","Ducklett","Swanna","Vanillite","Vanillish","Vanilluxe","Deerling","Sawsbuck","Emolga","Karrablast","Escavalier","Foongus","Amoonguss","Frillish","Jellicent","Alomomola","Joltik","Galvantula","Ferroseed","Ferrothorn","Klink","Klang","Klinklang","Tynamo","Eelektrik","Eelektross","Elgyem","Beheeyem","Litwick","Lampent","Chandelure","Axew","Fraxure","Haxorus","Cubchoo","Beartic","Cryogonal","Shelmet","Accelgor","Stunfisk","Mienfoo","Mienshao","Druddigon","Golett","Golurk","Pawniard","Bisharp","Bouffalant","Rufflet","Braviary","Vullaby","Mandibuzz","Heatmor","Durant","Deino","Zweilous","Hydreigon","Larvesta","Volcarona","Cobalion","Terrakion","Virizion","Tornadus","Thundurus","Reshiram","Zekrom","Landorus","Kyurem","Keldeo","Meloetta","Genesect"]},{name:"Generation 6",range:"Kalos (650-721)",pokemon:["Chespin","Quilladin","Chesnaught","Fennekin","Braixen","Delphox","Froakie","Frogadier","Greninja","Bunnelby","Diggersby","Fletchling","Fletchinder","Talonflame","Scatterbug","Spewpa","Vivillon","Litleo","Pyroar","Flabébé","Floette","Florges","Skiddo","Gogoat","Pancham","Pangoro","Furfrou","Espurr","Meowstic","Honedge","Doublade","Aegislash","Spritzee","Aromatisse","Swirlix","Slurpuff","Inkay","Malamar","Binacle","Barbaracle","Skrelp","Dragalge","Clauncher","Clawitzer","Helioptile","Heliolisk","Tyrunt","Tyrantrum","Amaura","Aurorus","Sylveon","Hawlucha","Dedenne","Carbink","Goomy","Sliggoo","Goodra","Klefki","Phantump","Trevenant","Pumpkaboo","Gourgeist","Bergmite","Avalugg","Noibat","Noivern","Xerneas","Yveltal","Zygarde","Diancie","Hoopa","Volcanion"]},{name:"Generation 7",range:"Alola (722-809)",pokemon:["Rowlet","Dartrix","Decidueye","Litten","Torracat","Incineroar","Popplio","Brionne","Primarina","Pikipek","Trumbeak","Toucannon","Yungoos","Gumshoos","Grubbin","Charjabug","Vikavolt","Crabrawler","Crabominable","Oricorio","Cutiefly","Ribombee","Rockruff","Lycanroc","Wishiwashi","Mareanie","Toxapex","Mudbray","Mudsdale","Dewpider","Araquanid","Fomantis","Lurantis","Morelull","Shiinotic","Salandit","Salazzle","Stufful","Bewear","Bounsweet","Steenee","Tsareena","Comfey","Oranguru","Passimian","Wimpod","Golisopod","Sandygast","Palossand","Pyukumuku","Type: Null","Silvally","Minior","Komala","Turtonator","Togedemaru","Mimikyu","Bruxish","Drampa","Dhelmise","Jangmo-o","Hakamo-o","Kommo-o","Tapu Koko","Tapu Lele","Tapu Bulu","Tapu Fini","Cosmog","Cosmoem","Solgaleo","Lunala","Necrozma","Magearna","Marshadow","Poipole","Naganadel","Stakataka","Blacephalon","Zeraora"]},{name:"Generation 8",range:"Galar (810-905)",pokemon:["Grookey","Thwackey","Rillaboom","Scorbunny","Raboot","Cinderace","Sobble","Drizzile","Inteleon","Skwovet","Greedent","Rookidee","Corvisquire","Corviknight","Blipbug","Dottler","Orbeetle","Nickit","Thievul","Gossifleur","Eldegoss","Wooloo","Dubwool","Chewtle","Drednaw","Yamper","Boltund","Rolycoly","Carkol","Coalossal","Applin","Flapple","Appletun","Silicobra","Sandaconda","Cramorant","Arrokuda","Barraskewda","Toxel","Toxtricity","Sizzlipede","Centiskorch","Clobbopus","Grapploct","Sinistea","Polteageist","Hatenna","Hattrem","Hatterene","Impidimp","Morgrem","Grimmsnarl","Obstagoon","Perrserker","Cursola","Sirfetch'd","Mr. Rime","Runerigus","Milcery","Alcremie","Falinks","Pincurchin","Snom","Frosmoth","Stonjourner","Eiscue","Indeedee","Morpeko","Cufant","Copperajah","Dracozolt","Arctozolt","Dracovish","Arctovish","Duraludon","Dreepy","Drakloak","Dragapult","Zacian","Zamazenta","Eternatus","Kubfu","Urshifu","Regieleki","Regidrago","Glastrier","Spectrier","Calyrex"]},{name:"Generation 9",range:"Paldea (906-1025)",pokemon:["Sprigatito","Floragato","Meowscarada","Fuecoco","Crocalor","Skeledirge","Quaxly","Quaxwell","Quaquaval","Lechonk","Oinkologne","Tarountula","Spidops","Nymble","Lokix","Pawmi","Pawmo","Pawmot","Tandemaus","Maushold","Fidough","Dachsbun","Smoliv","Dolliv","Arboliva","Squawkabilly","Nacli","Naclstack","Garganacl","Charcadet","Armarouge","Ceruledge","Tadbulb","Bellibolt","Wattrel","Kilowattrel","Maschiff","Mabosstiff","Shroodle","Grafaiai","Bramblin","Brambleghast","Toedscool","Toedscruel","Klawf","Capsakid","Scovillain","Rellor","Rabsca","Flittle","Espathra","Tinkatink","Tinkaton","Tinkaton","Wiglett","Wugtrio","Bombirdier","Finizen","Palafin","Varoom","Revavroom","Cyclizar","Orthworm","Glimmet","Glimmora","Greavard","Houndstone","Flamigo","Cetoddle","Cetitan","Veluza","Dondozo","Tatsugiri","Annihilape","Clodsire","Farigiraf","Dudunsparce","Kingambit","Great Tusk","Scream Tail","Brute Bonnet","Flutter Mane","Slither Wing","Sandy Shocks","Iron Treads","Iron Bundle","Iron Hands","Iron Jugulis","Iron Moth","Iron Thorns","Frigibax","Arctibax","Baxcalibur","Gimmighoul","Gholdengo","Wo-Chien","Chien-Pao","Ting-Lu","Chi-Yu","Roaring Moon","Iron Valiant","Koraidon","Miraidon","Walking Wake","Iron Leaves","Dipplin","Poltchageist","Sinistcha","Okidogi","Munkidori","Fezandipiti","Ogerpon","Archaludon","Hydrapple","Gouging Fire","Raging Bolt","Iron Boulder","Iron Crown","Terapagos","Pecharunt"]}],hE=n=>{const e=[];return n.forEach(t=>{by[t]&&e.push(...by[t].pokemon)}),e},VL=n=>n.toLowerCase().replace(/\s+/g,"-").replace(/['.♀♂:]/g,"").replace(/farfetchd/g,"farfetchd").replace(/mr-mime/g,"mr-mime").replace(/mime-jr/g,"mime-jr").replace(/type-null/g,"type-null").replace(/tapu-/g,"tapu-").replace(/jangmo-o/g,"jangmo-o").replace(/hakamo-o/g,"hakamo-o").replace(/kommo-o/g,"kommo-o").replace(/wo-chien/g,"wo-chien").replace(/chien-pao/g,"chien-pao").replace(/ting-lu/g,"ting-lu").replace(/chi-yu/g,"chi-yu"),dE=n=>`https://img.pokemondb.net/artwork/${VL(n)}.jpg`,UL=[{id:"types",name:"TYPES",description:"Random Pokemon types for challenges"},{id:"evolution",name:"EVOLUTION",description:"Random evolution stages and categories"},{id:"fusion",name:"FUSION",description:"Spin for 2 Pokemon to fuse together"},{id:"pokemon",name:"POKEMON",description:"Random single Pokemon selection"},{id:"custom",name:"CUSTOM",description:"Create your own custom wheels"}],FL=()=>{const[n,e]=H.useState("types"),[t,i]=H.useState([]),[r,o]=H.useState(!0),[c,u]=H.useState({pokemon1:null,pokemon2:null}),[d,f]=H.useState(null),[y,_]=H.useState(null),[x,w]=H.useState(null),[A,k]=H.useState({message:"",type:"info",show:!1}),[R,j]=H.useState([]),[B,W]=H.useState(""),[Z,$]=H.useState(null),[le,P]=H.useState([0,1,2,3,4,5,6,7,8]),I=["Normal","Fire","Water","Electric","Grass","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dragon","Dark","Steel","Fairy"],T=[{label:"No Evos",value:"U0"},{label:"One Evos",value:"U1"},{label:"Two Evos",value:"U2"},{label:"GMAX",value:"GMAX"},{label:"Legendary",value:"Legendary"},{label:"MEGA",value:"MEGA"}];H.useEffect(()=>{O()},[]);const O=async()=>{try{o(!0);const te=await em();i(te)}catch(te){console.error("Error loading Pokemon data:",te)}finally{o(!1)}},C=(te,Y="info")=>{k({message:te,type:Y,show:!0}),setTimeout(()=>{k(ge=>({...ge,show:!1}))},3e3)},z=()=>{const te=["#A8A878","#F08030","#6890F0","#F8D030","#78C850","#98D8D8","#C03028","#A040A0","#E0C068","#A890F0","#F85888","#A8B820","#B8A038","#705898","#7038F8","#705848","#B8B8D0","#EE99AC"];return I.map((Y,ge)=>({id:Y.toLowerCase(),label:Y,color:te[ge%te.length],data:{type:Y}}))},L=()=>{const te=["#4CAF50","#2196F3","#FF9800","#9C27B0","#F44336","#607D8B"];return T.map((Y,ge)=>({id:Y.value,label:Y.label,color:te[ge%te.length],data:{evolution:Y.value}}))},be=()=>{const te=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#FF9F40","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9999","#66B2FF","#99FF99","#FFB366","#FF99CC","#99CCFF","#FFD93D","#6BCF7F","#4D96FF","#9775FA","#FF8787","#74C0FC","#FFB74D","#81C784","#64B5F6","#BA68C8","#F06292","#A1887F"];return t.map((Y,ge)=>({id:Y.id,label:Y.name,color:te[ge%te.length],data:{pokemon:Y}}))},Ae=()=>{const te=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#FF9F40","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9999","#66B2FF","#99FF99","#FFB366","#FF99CC","#99CCFF","#FFD93D","#6BCF7F","#4D96FF","#9775FA","#FF8787","#74C0FC","#FFB74D","#81C784","#64B5F6","#BA68C8","#F06292","#A1887F"];return hE(le).map((ge,ye)=>({id:`real-${ye}`,label:ge,color:te[ye%te.length],data:{pokemon:{name:ge,id:`real-${ye}`}}}))},F=te=>{const Y=te.data.pokemon;c.pokemon1?c.pokemon2?(u({pokemon1:Y,pokemon2:null}),C(`New fusion started with ${Y.name}!`,"info")):(u(ge=>({...ge,pokemon2:Y})),C(`Fusion Complete: ${c.pokemon1?.name} + ${Y.name}!`,"success")):(u(ge=>({...ge,pokemon1:Y})),C(`First Pokemon: ${Y.name}!`,"info"))},ee=()=>{u({pokemon1:null,pokemon2:null}),C("Fusion reset! Spin to select your first Pokemon.","info")};H.useEffect(()=>{(c.pokemon1||c.pokemon2)&&u({pokemon1:null,pokemon2:null})},[le]);const ue=te=>{const ge=[...["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#FF9F40","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9999","#66B2FF","#99FF99","#FFB366","#FF99CC","#99CCFF","#FFD93D","#6BCF7F","#4D96FF","#9775FA","#FF8787","#74C0FC","#FFB74D","#81C784","#64B5F6","#BA68C8","#F06292","#A1887F","#E57373","#F06292","#BA68C8","#9575CD","#7986CB","#64B5F6","#4FC3F7","#4DD0E1","#4DB6AC","#81C784","#AED581","#DCE775","#FFF176","#FFD54F","#FFB74D","#FF8A65","#A1887F","#90A4AE"]].sort(()=>Math.random()-.5),ye=[];for(let _e=0;_e<te;_e++)ye.push(ge[_e%ge.length]);return ye},xe=te=>{const Y=te.split(`
`).map(_e=>_e.trim()).filter(_e=>_e.length>0),ge=ue(Y.length),ye=Y.map((_e,_t)=>({id:`custom-${_t}`,label:_e,color:ge[_t],data:{custom:!0}}));j(ye)},V=te=>{W(te),xe(te)},ae=()=>{W(""),j([]),$(null),C("Custom wheel cleared.","info")};return p.jsxs("div",{className:"max-w-full mx-auto relative min-h-screen transform scale-90 origin-top mt-4",children:[r&&p.jsx("div",{className:"text-center py-16",children:p.jsxs("div",{className:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-purple-500 hover:bg-purple-400 transition ease-in-out duration-150",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Wheels..."]})}),!r&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Random Wheels"}),p.jsx("p",{className:"text-white/70",children:"Spin the wheels for random selections and inspiration!"})]}),p.jsx("div",{className:"mb-6 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-2",children:p.jsx("div",{className:"flex flex-wrap gap-2",children:UL.map(te=>p.jsx("button",{onClick:()=>e(te.id),className:`px-4 py-3 rounded-lg transition-all duration-300 flex-1 min-w-[120px] ${n===te.id?"bg-yellow-400 text-black font-bold shadow-lg":"bg-white/10 text-white/80 hover:bg-white/20 hover:text-white"}`,children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-semibold",children:te.name}),p.jsx("div",{className:"text-xs opacity-80 mt-1",children:te.description})]})},te.id))})}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-8",children:[n==="fusion"&&p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Fusion Wheel"}),p.jsx("p",{className:"text-white/70",children:"Spin to get 2 random Pokemon for your fusion art!"})]}),p.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-7 gap-4 items-start justify-items-center",children:[p.jsx("div",{className:"lg:col-span-2 flex justify-end",children:p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-xs",children:[p.jsx("h3",{className:"text-white font-bold text-xl mb-4 text-center",children:"Pokemon 1"}),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:c.pokemon1?p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("img",{src:dE(c.pokemon1.name),alt:c.pokemon1.name,className:"w-56 h-56 mx-auto object-contain",onError:te=>{const Y=te.target;Y.style.display="none"}}),p.jsx("div",{className:"text-white font-bold text-xl",children:c.pokemon1.name})]}):p.jsxs("div",{className:"text-white/60 text-center",children:[p.jsx("div",{className:"text-lg",children:"Waiting..."}),p.jsx("div",{className:"text-sm mt-2",children:"Spin to select"})]})})]})}),p.jsxs("div",{className:"lg:col-span-3 flex flex-col items-center space-y-6",children:[p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-md",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-white font-bold text-lg mb-3 text-center",children:"Select Generations"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:by.map((te,Y)=>p.jsxs("label",{className:"flex items-center space-x-2 text-white/80 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:le.includes(Y),onChange:ge=>{ge.target.checked?P(ye=>[...ye,Y].sort()):P(ye=>ye.filter(_e=>_e!==Y))},className:"rounded"}),p.jsx("span",{className:"text-sm",children:te.name})]},Y))}),p.jsxs("div",{className:"text-center mt-2 text-xs text-white/60",children:[hE(le).length," Pokemon available"]})]}),c.pokemon1&&c.pokemon2&&p.jsx("div",{className:"p-4 bg-green-500/20 border border-green-500/40 rounded-lg",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-green-300 font-bold text-lg mb-3",children:"Fusion Ready!"}),p.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[p.jsx("div",{className:"text-center",children:p.jsx("div",{className:"text-white text-sm",children:c.pokemon1.name})}),p.jsx("div",{className:"text-yellow-400 text-lg font-bold",children:"+"}),p.jsx("div",{className:"text-center",children:p.jsx("div",{className:"text-white text-sm",children:c.pokemon2.name})})]})]})}),(c.pokemon1||c.pokemon2)&&p.jsx("button",{onClick:ee,className:"w-full mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Reset Fusion"})]}),p.jsx(Xc,{segments:Ae(),onSpin:F,size:650})]}),p.jsx("div",{className:"lg:col-span-2 flex justify-start",children:p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-xs",children:[p.jsx("h3",{className:"text-white font-bold text-xl mb-4 text-center",children:"Pokemon 2"}),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:c.pokemon2?p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("img",{src:dE(c.pokemon2.name),alt:c.pokemon2.name,className:"w-56 h-56 mx-auto object-contain",onError:te=>{const Y=te.target;Y.style.display="none"}}),p.jsx("div",{className:"text-white font-bold text-xl",children:c.pokemon2.name})]}):p.jsxs("div",{className:"text-white/60 text-center",children:[p.jsx("div",{className:"text-lg",children:"Waiting..."}),p.jsx("div",{className:"text-sm mt-2",children:"Spin to select"})]})})]})})]})]}),n==="types"&&p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Type Wheel"}),p.jsx("p",{className:"text-white/70",children:"Spin to get random Pokemon types for challenges!"})]}),p.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-5 gap-8 items-center justify-items-center",children:[p.jsx("div",{className:"lg:col-span-2 flex justify-center",children:p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-sm",children:[p.jsx("h3",{className:"text-white font-bold text-lg mb-4 text-center",children:"Selected Type"}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-6 mt-2",children:[p.jsx("div",{className:"text-white font-bold text-2xl",children:d?d.label:"Spin to select..."}),d&&p.jsx("div",{className:"mt-4 mx-auto w-16 h-16 rounded-full border-4 border-white/30",style:{backgroundColor:d.color}})]}),d&&p.jsx("button",{onClick:()=>f(null),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Clear Result"})]})]})}),p.jsx("div",{className:"lg:col-span-3 flex justify-center",children:p.jsx(Xc,{segments:z(),onSpin:te=>{f(te),C(`Selected type: ${te.label}!`,"success")},size:500})})]})]}),n==="evolution"&&p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Evolution Wheel"}),p.jsx("p",{className:"text-white/70",children:"Spin to determine evolution stages and special categories!"})]}),p.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-5 gap-8 items-center justify-items-center",children:[p.jsx("div",{className:"lg:col-span-2 flex justify-center",children:p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-sm",children:[p.jsx("h3",{className:"text-white font-bold text-lg mb-4 text-center",children:"Selected Evolution"}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-6 mt-2",children:[p.jsx("div",{className:"text-white font-bold text-2xl",children:y?y.label:"Spin to select..."}),y&&p.jsx("div",{className:"mt-4 mx-auto w-16 h-16 rounded-full border-4 border-white/30",style:{backgroundColor:y.color}})]}),y&&p.jsx("button",{onClick:()=>_(null),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Clear Result"})]})]})}),p.jsx("div",{className:"lg:col-span-3 flex justify-center",children:p.jsx(Xc,{segments:L(),onSpin:te=>{_(te),C(`Selected: ${te.label}!`,"success")},size:500})})]})]}),n==="pokemon"&&p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Pokemon Wheel"}),p.jsx("p",{className:"text-white/70",children:"Spin to get a random Pokemon for art inspiration!"})]}),p.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-5 gap-8 items-center justify-items-center",children:[p.jsx("div",{className:"lg:col-span-2 flex justify-center",children:p.jsxs("div",{className:"bg-white/10 rounded-lg p-6 border border-white/10 w-full max-w-sm",children:[p.jsx("h3",{className:"text-white font-bold text-lg mb-4 text-center",children:"Selected Pokemon"}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"bg-white/20 rounded-lg p-6 mt-2",children:x?p.jsxs("div",{className:"space-y-3",children:[p.jsx("img",{src:x.data.pokemon.imageUrl,alt:x.label,className:"w-24 h-24 mx-auto object-contain",onError:te=>{const Y=te.target;Y.style.display="none"}}),p.jsx("div",{className:"text-white font-bold text-xl",children:x.label})]}):p.jsx("div",{className:"text-white font-bold text-2xl",children:"Spin to select..."})}),x&&p.jsx("button",{onClick:()=>w(null),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Clear Result"})]})]})}),p.jsx("div",{className:"lg:col-span-3 flex justify-center",children:p.jsx(Xc,{segments:be(),onSpin:te=>{w(te),C(`Selected Pokemon: ${te.label}!`,"success")},size:580})})]})]}),n==="custom"&&p.jsxs("div",{children:[p.jsx("div",{className:"text-center mb-6",children:p.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"🛠️ Custom Wheels"})}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10",children:[p.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:"Wheel Builder"}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white/80 text-sm mb-2",children:"Enter Options (one per line)"}),p.jsx("textarea",{value:B,onChange:te=>V(te.target.value),placeholder:`Option 1
Option 2
Option 3
...`,className:"w-full h-48 px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 resize-none"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"text-white/80 text-sm",children:["Segments: ",R.length,R.length>20&&p.jsx("span",{className:"text-yellow-300 ml-2",children:"(Text cycling mode)"})]}),R.length>0&&p.jsx("button",{onClick:ae,className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-sm",children:"Clear All"})]})]}),R.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"text-white/80 text-sm mb-2",children:"Result:"}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-4 border border-white/10",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-white font-bold text-xl",children:Z?Z.label:"Spin to select..."}),Z&&p.jsx("div",{className:"mt-3 mx-auto w-12 h-12 rounded-full border-3 border-white/30",style:{backgroundColor:Z.color}})]}),Z&&p.jsx("button",{onClick:()=>$(null),className:"w-full mt-3 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm",children:"Clear Result"})]})]})]}),p.jsx("div",{className:"text-center",children:R.length>0?p.jsx(Xc,{segments:R,onSpin:te=>{$(te),C(`Selected: ${te.label}!`,"success")},size:500}):p.jsx("div",{className:"bg-white/5 rounded-lg p-8 border border-white/10",children:p.jsxs("div",{className:"text-white/60 text-center",children:[p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Options Yet"}),p.jsx("p",{className:"text-sm mb-4",children:"Type your options in the text area to create your wheel!"})]})})})]})]})]})]}),A.show&&p.jsx("div",{className:`fixed top-4 right-4 z-[70] p-4 rounded-lg shadow-lg ${A.type==="success"?"bg-green-500":A.type==="error"?"bg-red-500":"bg-blue-500"} text-white`,children:A.message})]})};function zL(){return p.jsx(UN,{children:p.jsx("div",{className:"min-h-screen",children:p.jsxs(pN,{children:[p.jsx(Qc,{path:"/",element:p.jsx(Z4,{})}),p.jsx(Qc,{path:"/challenges",element:p.jsxs(p.Fragment,{children:[p.jsx(Ud,{}),p.jsx("main",{className:"container mx-auto px-4 py-8",children:p.jsx(ij,{})})]})}),p.jsx(Qc,{path:"/statistics",element:p.jsxs(p.Fragment,{children:[p.jsx(Ud,{}),p.jsx("main",{className:"container mx-auto px-4 py-8",children:p.jsx(LL,{})})]})}),p.jsx(Qc,{path:"/wheels",element:p.jsxs(p.Fragment,{children:[p.jsx(Ud,{}),p.jsx("main",{className:"container mx-auto px-4 py-8",children:p.jsx(FL,{})})]})})]})})})}TR.createRoot(document.getElementById("root")).render(p.jsx(vy.StrictMode,{children:p.jsx(bk,{children:p.jsx(zL,{})})}));
